import{d as q,t as w,L as P,M as B,A as g,N as A,o as s,c as k,i as e,F as D,g as a,b as f,f as S,e as o,n as F,r as L,B as _,_ as N,y as M,j as R,w as r,p as U,k as E,h,v as b,O as z,P as H,q as j,s as K}from"./main-e63d6b61.js";import{_ as O}from"./ViewWithSidebar.vue_vue_type_style_index_0_lang-a4892cf4.js";import{u as Q}from"./FormSegmentUpdate.vue_vue_type_script_setup_true_lang-e29f6146.js";import I from"./IframeView-49923c5a.js";import{_ as G,T as J,a as y}from"./TabList-5f50a1e9.js";import{_ as W}from"./ContactsList.vue_vue_type_script_setup_true_lang-6807fcf9.js";import{_ as X}from"./ErrorDummy.vue_vue_type_script_setup_true_lang-70077fcc.js";import{_ as Y}from"./ContactInfo.vue_vue_type_script_setup_true_lang-4be22bf4.js";import"./CustomColumn-72664405.js";import"./FieldCheckbox-c1b80b55.js";import"./InputWithContacts.vue_vue_type_script_setup_true_lang-51f96cc1.js";import"./UserPic-e63dca94.js";import"./DropDown-b752b133.js";import"./index-48d220da.js";import"./validation-8a3372bd.js";import"./iframeObserver-8117c859.js";import"./index-6448b8a4.js";import"./DropdownModal-872f106f.js";import"./useSortable-6edb9dbf.js";import"./SkeletonList-7e0e4de7.js";import"./LazyLoadingWithProgress.vue_vue_type_script_setup_true_lang-98bfe3bd.js";import"./EmptyList-8c2bab53.js";import"./ContactsListItems-4bbca116.js";import"./ChipsList-f1962714.js";import"./ContactsListItemAction.vue_vue_type_style_index_0_lang-ea671b34.js";import"./dayjs-e48e80eb.js";import"./WaDialogOpener.vue_vue_type_script_setup_true_lang-2e62a6a1.js";import"./DropdownIncludeSegment.vue_vue_type_script_setup_true_lang-3830a2f1.js";import"./WaSpinner-7a41251d.js";import"./InputWithUsers.vue_vue_type_script_setup_true_lang-32066fbd.js";import"./FormAddTag.vue_vue_type_script_setup_true_lang-911d3b89.js";import"./DropdownAddTags.vue_vue_type_script_setup_true_lang-264ee207.js";import"./FormContactUpdate.vue_vue_type_script_setup_true_lang-850d8f47.js";import"./fields-d5743e8f.js";import"./FieldSelect-d021e2ab.js";import"./FormContactUpdateInfo.vue_vue_type_script_setup_true_lang-bbb2cba4.js";import"./SortableList.vue_vue_type_script_setup_true_lang-a7709f9a.js";import"./imageUrlToBase64-bf4bcddf.js";import"./TagsCloud.vue_vue_type_script_setup_true_lang-1fa57b71.js";import"./emit-6e8c94d0.js";import"./ButtonSubmit-f072bf17.js";import"./CustomField-cc8fdc81.js";import"./TextAreaAutoresize-03f16fa4.js";import"./recentContacts-2c7dd6f4.js";import"./ButtonFavorites.vue_vue_type_script_setup_true_lang-13052a63.js";const Z={class:"tw-flex tw-flex-col tw-min-h-full md:tw-border-0 md:tw-border-solid md:tw-border-l md:tw-border-l-waBorder"},x=q({__name:"ContactTabs",props:{contactId:{}},setup(i){const n=i,{contactId:C,tabs:v,isFetching:l}=w(P()),{isFetching:u,error:m,statusCode:t}=w(B()),d=g(()=>l.value||u.value),p=g(()=>[403,404].includes(Number(t.value))&&m.value?m.value:null);return A(()=>{C.value=n.contactId}),(c,$)=>(s(),k("div",Z,[e("div",{class:F([{"mobile:!tw-hidden":p.value},"tabs-container bordered-bottom"])},[p.value?S("",!0):(s(),k(D,{key:0},[a(_).webView?S("",!0):(s(),f(G,{key:0,"entity-type":"contact","entity-id":n.contactId,class:"tw-ml-4 tw-mr-3"},null,8,["entity-id"])),o(J,{"entity-type":"contact",value:a(v),"is-fetching":d.value},null,8,["value","is-fetching"])],64))],2),e("div",{class:F(["tw-relative tw-flex-auto tw-bg-waBlank tw-min-h-[340px]",{"tw-p-4 tw-pb-0":["contactHistoryTab","contactInvoicesTab"].includes(String(c.$route.name))}])},[p.value?(s(),f(X,{key:0,code:a(t),message:p.value},null,8,["code","message"])):L(c.$slots,"default",{key:1},void 0,!0)],2)]))}});const tt=N(x,[["__scopeId","data-v-9eb117fc"]]),T=i=>(j("data-v-b0798280"),i=i(),K(),i),et={key:0,class:"sidebarHeader"},at={class:"tw-overflow-hidden"},ot=T(()=>e("i",{class:"fas fa-arrow-left"},null,-1)),st={class:"tw-truncate"},rt=T(()=>e("i",{class:"fas fa-list-ul black"},null,-1)),it=[rt],nt=T(()=>e("i",{class:"fas fa-times black"},null,-1)),ct=[nt],lt={class:"sidebarContainer"},ut={class:"sidebarList"},mt={class:"sidebarInfo"},dt=q({__name:"ContactView",props:{contactId:{}},setup(i){const n=i,C=g(()=>({context_contact_id:n.contactId})),{previousFetchParams:v}=w(M()),{showSidebar:l}=w(Q()),{contact:u}=w(B()),m=g(()=>{var t;return(t=u.value)!=null&&t.main&&Array.isArray(u.value.main.email)&&!u.value.main.email.length?"&noemail=1":""});return(t,d)=>{const p=R("RouterView");return s(),f(O,null,{sidebar:r(()=>{var c;return[a(_).webView?S("",!0):(s(),k("div",et,[e("div",at,[e("a",{class:"tw-flex tw-space-x-3 tw-items-center black",onClick:d[0]||(d[0]=U(()=>{var $,V;t.$router.push(`/contact/${((V=($=a(v))==null?void 0:$.hash)==null?void 0:V.replace("import/","import/result/").replace("crmSearch/","search/result/"))??""}`)},["prevent"]))},[ot,e("span",st,E((c=a(v))!=null&&c.hash?a(v).title:t.$t("allContacts")),1)])]),e("button",{class:"circle transparent",onClick:d[1]||(d[1]=$=>l.value=!a(l))},[h(e("span",null,it,512),[[b,!a(l)]]),h(e("span",null,ct,512),[[b,a(l)]])])])),e("div",lt,[e("div",ut,[o(y,null,{default:r(()=>[o(W,{"fetch-params":C.value,"hide-header":!0,"active-contact-id":n.contactId},null,8,["fetch-params","active-contact-id"])]),_:1})]),e("div",mt,[o(Y,{"contact-id":n.contactId},null,8,["contact-id"])])])]}),default:r(()=>[o(tt,{"contact-id":n.contactId},{default:r(()=>[o(p,null,{default:r(({Component:c})=>[(s(),f(z,null,[(s(),f(H(c),{key:t.$route.fullPath}))],1024)),h(e("div",null,[o(y,null,{default:r(()=>[o(I,{src:`${a(_).baseUrl}call/?iframe=1&contact=${t.$route.params.id}${t.$route.query.focus?"&focus=1":""}`},null,8,["src"])]),_:1})],512),[[b,t.$route.name==="contactCallsTab"]]),h(e("div",null,[o(y,null,{default:r(()=>[(s(),f(I,{key:String(t.$route.query.conversationId)+m.value,"is-pre-fetching":!a(u),src:t.$route.query.conversationId?`${a(_).baseUrl}message/conversation/${t.$route.query.conversationId}/?iframe=1&contact=${t.$route.params.id}${m.value}`:`${a(_).baseUrl}message/?iframe=1&contact=${t.$route.params.id}${t.$route.query.focus?"&focus=1":""}${m.value}`,"disable-resize":!0,"fixed-height-mobile":!0},null,8,["is-pre-fetching","src"]))]),_:1})],512),[[b,t.$route.name==="contactMessagesTab"]]),h(e("div",null,[o(y,null,{default:r(()=>[o(I,{src:`${a(_).baseUrl}reminder/all/?iframe=1&contact=${t.$route.params.id}${t.$route.query.focus?"&focus=1":""}`},null,8,["src"])]),_:1})],512),[[b,t.$route.name==="contactRemindersTab"]])]),_:1})]),_:1},8,["contact-id"])]),_:1})}}});const se=N(dt,[["__scopeId","data-v-b0798280"]]);export{se as default};
