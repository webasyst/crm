import{d as D,h as w,aW as P,bl as V,bz as k,aT as H,a$ as R,bA as g,bB as h,l as _,aS as y,bC as T,R as E,bv as A,bD as U,a_ as Y,bE as $,bd as j,ao as x}from"./main-2290994d.js";const K=D({name:"OnClickOutside",props:["as","options"],emits:["trigger"],setup(e,{slots:t,emit:n}){const o=w();return P(o,l=>{n("trigger",l)},e.options),()=>{if(t.default)return V(e.as||"div",{ref:o},t.default())}}});function m(e){var t;const n=y(e);return(t=n==null?void 0:n.$el)!=null?t:n}const C=$?window:void 0;function O(...e){let t,n,o,l;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,l]=e,t=C):[t,n,o,l]=e,!t)return h;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const d=[],v=()=>{d.forEach(a=>a()),d.length=0},u=(a,c,s,r)=>(a.addEventListener(c,s,r),()=>a.removeEventListener(c,s,r)),f=E(()=>[m(t),y(l)],([a,c])=>{if(v(),!a)return;const s=U(c)?{...c}:c;d.push(...n.flatMap(r=>o.map(i=>u(a,r,i,s))))},{immediate:!0,flush:"post"}),p=()=>{f(),v()};return A(p),p}let I=!1;function M(e,t,n={}){const{window:o=C,ignore:l=[],capture:d=!0,detectIframe:v=!1}=n;if(!o)return;g&&!I&&(I=!0,Array.from(o.document.body.children).forEach(s=>s.addEventListener("click",h)),o.document.documentElement.addEventListener("click",h));let u=!0;const f=s=>l.some(r=>{if(typeof r=="string")return Array.from(o.document.querySelectorAll(r)).some(i=>i===s.target||s.composedPath().includes(i));{const i=m(r);return i&&(s.target===i||s.composedPath().includes(i))}}),a=[O(o,"click",s=>{const r=m(e);if(!(!r||r===s.target||s.composedPath().includes(r))){if(s.detail===0&&(u=!f(s)),!u){u=!0;return}t(s)}},{passive:!0,capture:d}),O(o,"pointerdown",s=>{const r=m(e);r&&(u=!s.composedPath().includes(r)&&!f(s))},{passive:!0}),v&&O(o,"blur",s=>{setTimeout(()=>{var r;const i=m(e);((r=o.document.activeElement)==null?void 0:r.tagName)==="IFRAME"&&!(i!=null&&i.contains(o.document.activeElement))&&t(s)},0)})].filter(Boolean);return()=>a.forEach(s=>s())}const Q={[k.mounted](e,t){const n=!t.modifiers.bubble;if(typeof t.value=="function")e.__onClickOutside_stop=M(e,t.value,{capture:n});else{const[o,l]=t.value;e.__onClickOutside_stop=M(e,o,Object.assign({capture:n},l))}},[k.unmounted](e){e.__onClickOutside_stop()}};function X(){const e=w(!1);return j()&&x(()=>{e.value=!0}),e}function q(e){const t=X();return _(()=>(t.value,!!e()))}const Z=D({name:"UseElementVisibility",props:["as"],setup(e,{slots:t}){const n=w(),o=H({isVisible:R(n)});return()=>{if(t.default)return V(e.as||"div",{ref:n},t.default(o))}}});function W(e,t,n={}){const{root:o,rootMargin:l="0px",threshold:d=.1,window:v=C,immediate:u=!0}=n,f=q(()=>v&&"IntersectionObserver"in v),p=_(()=>{const i=y(e);return(Array.isArray(i)?i:[i]).map(m).filter(T)});let a=h;const c=w(u),s=f.value?E(()=>[p.value,m(o),c.value],([i,N])=>{if(a(),!c.value||!i.length)return;const L=new IntersectionObserver(t,{root:m(N),rootMargin:l,threshold:d});i.forEach(S=>S&&L.observe(S)),a=()=>{L.disconnect(),a=h}},{immediate:u,flush:"post"}):h,r=()=>{a(),s(),c.value=!1};return A(r),{isSupported:f,isActive:c,pause(){a(),c.value=!1},resume(){c.value=!0},stop:r}}function b(e){return typeof Window<"u"&&e instanceof Window?e.document.documentElement:typeof Document<"u"&&e instanceof Document?e.documentElement:e}const ee={[k.mounted](e,t){typeof t.value=="function"?W(e,t.value):W(e,...t.value)}};function B(e){const t=window.getComputedStyle(e);if(t.overflowX==="scroll"||t.overflowY==="scroll"||t.overflowX==="auto"&&e.clientWidth<e.scrollWidth||t.overflowY==="auto"&&e.clientHeight<e.scrollHeight)return!0;{const n=e.parentNode;return!n||n.tagName==="BODY"?!1:B(n)}}function z(e){const t=e||window.event,n=t.target;return B(n)?!1:t.touches.length>1?!0:(t.preventDefault&&t.preventDefault(),!1)}function F(e,t=!1){const n=w(t);let o=null,l;E(Y(e),u=>{const f=b(y(u));if(f){const p=f;l=p.style.overflow,n.value&&(p.style.overflow="hidden")}},{immediate:!0});const d=()=>{const u=b(y(e));!u||n.value||(g&&(o=O(u,"touchmove",f=>{z(f)},{passive:!1})),u.style.overflow="hidden",n.value=!0)},v=()=>{const u=b(y(e));!u||!n.value||(g&&(o==null||o()),u.style.overflow=l,n.value=!1)};return A(v),_({get(){return n.value},set(u){u?d():v()}})}function G(){let e=!1;const t=w(!1);return(n,o)=>{if(t.value=o.value,e)return;e=!0;const l=F(n,o.value);E(t,d=>l.value=d)}}G();export{K as O,Z as U,Q as a,ee as v};
