import{bG as b,I as v,aF as p,M as E,E as y,aj as g}from"./main-d7f03521.js";import{c as w}from"./index-884c82be.js";function f(e){const{stop:r}=b(document.documentElement,l=>{var c,o;const i=l[0].target.getAttribute("data-theme")??"";(o=(c=e.value)==null?void 0:c.contentWindow)==null||o.document.documentElement.setAttribute("data-theme",i)},{attributes:!0,attributeFilter:["data-theme"]});return{stop:r}}function k(e,r,l){const i=v(w),{stop:c}=f(e),o=t=>{e.value&&(i.value||l)&&(e.value.style.height=t+1+"px")},m=p(()=>{var t,u,a,s;(s=(a=(u=(t=e.value)==null?void 0:t.contentWindow)==null?void 0:u.document)==null?void 0:a.documentElement)==null||s.querySelectorAll('a[data-link="top"]').forEach(n=>{n.addEventListener("click",d=>{d.preventDefault(),window.history.pushState({reload:!0},"",n.href)})})},100);if(e.value)h();else{const t=E(()=>{e.value&&(e.value.onload=h,t())})}y(()=>{c()});function h(){var u,a,s;const t=(s=(a=(u=e.value)==null?void 0:u.contentWindow)==null?void 0:a.document)==null?void 0:s.documentElement;if(t){t.style.background="transparent";const n=t.querySelector("body");n&&(n.style.minHeight="auto",n.style.background="transparent"),r||g(t,d=>{o(d[0].contentRect.height)}),b(t,()=>{r||o(t.scrollHeight),m()},{childList:!0,subtree:!0}),m()}}}export{k as u};
