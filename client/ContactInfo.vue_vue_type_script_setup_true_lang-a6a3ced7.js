import{d as V,T as kt,o as f,b as $,w,e as x,i as m,k,p as K,g,H as Te,t as _t,M as ft,a as nt,X as Ot,ai as Je,ag as ta,aj as ea,ak as aa,R as ia,m as Z,c as y,f as W,n as dt,W as Ne,ae as na,al as Xt,r as ra,l as q,F as I,P as oa,B as wt,a2 as sa,j as Oe,A as le,N as ca,am as ha}from"./main-14ee4927.js";import{E as la}from"./EmptyList-32476ed0.js";import{_ as Ht,M as $e,D as Jt}from"./DropDown-3d660bad.js";import{_ as Ae}from"./FormContactUpdate.vue_vue_type_script_setup_true_lang-8f4ccd02.js";import{_ as te}from"./WaDialogOpener.vue_vue_type_script_setup_true_lang-406f9c22.js";import{c as ua,_ as da,b as ue}from"./DropdownIncludeSegment.vue_vue_type_script_setup_true_lang-3e978773.js";import{U as It}from"./UserPic-88a434b2.js";import{C as Y}from"./CustomColumn-9af7d856.js";import{i as pa}from"./imageUrlToBase64-bf4bcddf.js";import{_ as fa}from"./TagsCloud.vue_vue_type_script_setup_true_lang-6e9e5deb.js";import{_ as ma}from"./DropdownAddTags.vue_vue_type_script_setup_true_lang-6d18531f.js";import{B as Se}from"./ButtonSubmit-4d96401d.js";import{C as it}from"./CustomField-60551acb.js";import{T as ga}from"./TextAreaAutoresize-0b20aa66.js";import{u as va}from"./recentContacts-56405508.js";import{_ as wa}from"./ButtonFavorites.vue_vue_type_script_setup_true_lang-d39506c3.js";const ba=m("div",{class:"icon"},[m("i",{class:"fas fa-eye"})],-1),ya=["onClick"],_a=m("div",{class:"icon"},[m("i",{class:"fas fa-trash-alt"})],-1),xa=V({__name:"DropdownActions",props:{contact:{}},setup(i){const t=i,{show:a}=kt(Ae,{contact:t.contact,initialTab:"scope"});return(e,r)=>(f(),$($e,null,{default:w(()=>[x(Ht,null,{default:w(()=>[m("a",{onClick:r[0]||(r[0]=K((...n)=>g(a)&&g(a)(...n),["prevent"]))},[ba,m("span",null,k(e.$t("setScope")),1)])]),_:1}),x(Ht,null,{default:w(()=>[x(te,{component:ua,"component-props":{contactIds:[t.contact.id]}},{default:w(({open:n})=>[m("a",{onClick:K(n,["prevent"])},[_a,m("span",null,k(e.$t("delete")),1)],8,ya)]),_:1},8,["component-props"])]),_:1})]),_:1}))}});/*!
 * Cropper.js v1.6.0
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2023-08-26T08:14:27.943Z
 */function de(i,t){var a=Object.keys(i);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(i);t&&(e=e.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),a.push.apply(a,e)}return a}function Re(i){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?de(Object(a),!0).forEach(function(e){Ma(i,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(a)):de(Object(a)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(a,e))})}return i}function Wt(i){"@babel/helpers - typeof";return Wt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wt(i)}function Da(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(i,t){for(var a=0;a<t.length;a++){var e=t[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(i,Be(e.key),e)}}function Ca(i,t,a){return t&&pe(i.prototype,t),a&&pe(i,a),Object.defineProperty(i,"prototype",{writable:!1}),i}function Ma(i,t,a){return t=Be(t),t in i?Object.defineProperty(i,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[t]=a,i}function Ie(i){return Ea(i)||ka(i)||Ta(i)||Na()}function Ea(i){if(Array.isArray(i))return jt(i)}function ka(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Ta(i,t){if(i){if(typeof i=="string")return jt(i,t);var a=Object.prototype.toString.call(i).slice(8,-1);if(a==="Object"&&i.constructor&&(a=i.constructor.name),a==="Map"||a==="Set")return Array.from(i);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return jt(i,t)}}function jt(i,t){(t==null||t>i.length)&&(t=i.length);for(var a=0,e=new Array(t);a<t;a++)e[a]=i[a];return e}function Na(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oa(i,t){if(typeof i!="object"||i===null)return i;var a=i[Symbol.toPrimitive];if(a!==void 0){var e=a.call(i,t||"default");if(typeof e!="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(i)}function Be(i){var t=Oa(i,"string");return typeof t=="symbol"?t:String(t)}var Bt=typeof window<"u"&&typeof window.document<"u",tt=Bt?window:{},ee=Bt&&tt.document.documentElement?"ontouchstart"in tt.document.documentElement:!1,ae=Bt?"PointerEvent"in tt:!1,T="cropper",ie="all",Le="crop",Pe="move",ze="zoom",lt="e",ut="w",mt="s",at="n",xt="ne",Dt="nw",Ct="se",Mt="sw",Ut="".concat(T,"-crop"),fe="".concat(T,"-disabled"),H="".concat(T,"-hidden"),me="".concat(T,"-hide"),$a="".concat(T,"-invisible"),Rt="".concat(T,"-modal"),Vt="".concat(T,"-move"),Tt="".concat(T,"Action"),At="".concat(T,"Preview"),ne="crop",Ye="move",Xe="none",Ft="crop",Gt="cropend",qt="cropmove",Zt="cropstart",ge="dblclick",Aa=ee?"touchstart":"mousedown",Sa=ee?"touchmove":"mousemove",Ra=ee?"touchend touchcancel":"mouseup",ve=ae?"pointerdown":Aa,we=ae?"pointermove":Sa,be=ae?"pointerup pointercancel":Ra,ye="ready",_e="resize",xe="wheel",Kt="zoom",De="image/jpeg",Ia=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,Ba=/^data:/,La=/^data:image\/jpeg;base64,/,Pa=/^img|canvas$/i,He=200,We=100,Ce={viewMode:0,dragMode:ne,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:He,minContainerHeight:We,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},za='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',Ya=Number.isNaN||tt.isNaN;function D(i){return typeof i=="number"&&!Ya(i)}var Me=function(t){return t>0&&t<1/0};function zt(i){return typeof i>"u"}function pt(i){return Wt(i)==="object"&&i!==null}var Xa=Object.prototype.hasOwnProperty;function gt(i){if(!pt(i))return!1;try{var t=i.constructor,a=t.prototype;return t&&a&&Xa.call(a,"isPrototypeOf")}catch{return!1}}function X(i){return typeof i=="function"}var Ha=Array.prototype.slice;function je(i){return Array.from?Array.from(i):Ha.call(i)}function B(i,t){return i&&X(t)&&(Array.isArray(i)||D(i.length)?je(i).forEach(function(a,e){t.call(i,a,e,i)}):pt(i)&&Object.keys(i).forEach(function(a){t.call(i,i[a],a,i)})),i}var N=Object.assign||function(t){for(var a=arguments.length,e=new Array(a>1?a-1:0),r=1;r<a;r++)e[r-1]=arguments[r];return pt(t)&&e.length>0&&e.forEach(function(n){pt(n)&&Object.keys(n).forEach(function(o){t[o]=n[o]})}),t},Wa=/\.\d*(?:0|9){12}\d*$/;function bt(i){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return Wa.test(i)?Math.round(i*t)/t:i}var ja=/^width|height|left|top|marginLeft|marginTop$/;function rt(i,t){var a=i.style;B(t,function(e,r){ja.test(r)&&D(e)&&(e="".concat(e,"px")),a[r]=e})}function Ua(i,t){return i.classList?i.classList.contains(t):i.className.indexOf(t)>-1}function L(i,t){if(t){if(D(i.length)){B(i,function(e){L(e,t)});return}if(i.classList){i.classList.add(t);return}var a=i.className.trim();a?a.indexOf(t)<0&&(i.className="".concat(a," ").concat(t)):i.className=t}}function J(i,t){if(t){if(D(i.length)){B(i,function(a){J(a,t)});return}if(i.classList){i.classList.remove(t);return}i.className.indexOf(t)>=0&&(i.className=i.className.replace(t,""))}}function vt(i,t,a){if(t){if(D(i.length)){B(i,function(e){vt(e,t,a)});return}a?L(i,t):J(i,t)}}var Va=/([a-z\d])([A-Z])/g;function re(i){return i.replace(Va,"$1-$2").toLowerCase()}function Qt(i,t){return pt(i[t])?i[t]:i.dataset?i.dataset[t]:i.getAttribute("data-".concat(re(t)))}function Nt(i,t,a){pt(a)?i[t]=a:i.dataset?i.dataset[t]=a:i.setAttribute("data-".concat(re(t)),a)}function Fa(i,t){if(pt(i[t]))try{delete i[t]}catch{i[t]=void 0}else if(i.dataset)try{delete i.dataset[t]}catch{i.dataset[t]=void 0}else i.removeAttribute("data-".concat(re(t)))}var Ue=/\s\s*/,Ve=function(){var i=!1;if(Bt){var t=!1,a=function(){},e=Object.defineProperty({},"once",{get:function(){return i=!0,t},set:function(n){t=n}});tt.addEventListener("test",a,e),tt.removeEventListener("test",a,e)}return i}();function G(i,t,a){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},r=a;t.trim().split(Ue).forEach(function(n){if(!Ve){var o=i.listeners;o&&o[n]&&o[n][a]&&(r=o[n][a],delete o[n][a],Object.keys(o[n]).length===0&&delete o[n],Object.keys(o).length===0&&delete i.listeners)}i.removeEventListener(n,r,e)})}function U(i,t,a){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},r=a;t.trim().split(Ue).forEach(function(n){if(e.once&&!Ve){var o=i.listeners,s=o===void 0?{}:o;r=function(){delete s[n][a],i.removeEventListener(n,r,e);for(var l=arguments.length,c=new Array(l),h=0;h<l;h++)c[h]=arguments[h];a.apply(i,c)},s[n]||(s[n]={}),s[n][a]&&i.removeEventListener(n,s[n][a],e),s[n][a]=r,i.listeners=s}i.addEventListener(n,r,e)})}function yt(i,t,a){var e;return X(Event)&&X(CustomEvent)?e=new CustomEvent(t,{detail:a,bubbles:!0,cancelable:!0}):(e=document.createEvent("CustomEvent"),e.initCustomEvent(t,!0,!0,a)),i.dispatchEvent(e)}function Fe(i){var t=i.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}var Yt=tt.location,Ga=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Ee(i){var t=i.match(Ga);return t!==null&&(t[1]!==Yt.protocol||t[2]!==Yt.hostname||t[3]!==Yt.port)}function ke(i){var t="timestamp=".concat(new Date().getTime());return i+(i.indexOf("?")===-1?"?":"&")+t}function Et(i){var t=i.rotate,a=i.scaleX,e=i.scaleY,r=i.translateX,n=i.translateY,o=[];D(r)&&r!==0&&o.push("translateX(".concat(r,"px)")),D(n)&&n!==0&&o.push("translateY(".concat(n,"px)")),D(t)&&t!==0&&o.push("rotate(".concat(t,"deg)")),D(a)&&a!==1&&o.push("scaleX(".concat(a,")")),D(e)&&e!==1&&o.push("scaleY(".concat(e,")"));var s=o.length?o.join(" "):"none";return{WebkitTransform:s,msTransform:s,transform:s}}function qa(i){var t=Re({},i),a=0;return B(i,function(e,r){delete t[r],B(t,function(n){var o=Math.abs(e.startX-n.startX),s=Math.abs(e.startY-n.startY),u=Math.abs(e.endX-n.endX),l=Math.abs(e.endY-n.endY),c=Math.sqrt(o*o+s*s),h=Math.sqrt(u*u+l*l),d=(h-c)/c;Math.abs(d)>Math.abs(a)&&(a=d)})}),a}function St(i,t){var a=i.pageX,e=i.pageY,r={endX:a,endY:e};return t?r:Re({startX:a,startY:e},r)}function Za(i){var t=0,a=0,e=0;return B(i,function(r){var n=r.startX,o=r.startY;t+=n,a+=o,e+=1}),t/=e,a/=e,{pageX:t,pageY:a}}function ot(i){var t=i.aspectRatio,a=i.height,e=i.width,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",n=Me(e),o=Me(a);if(n&&o){var s=a*t;r==="contain"&&s>e||r==="cover"&&s<e?a=e/t:e=a*t}else n?a=e/t:o&&(e=a*t);return{width:e,height:a}}function Ka(i){var t=i.width,a=i.height,e=i.degree;if(e=Math.abs(e)%180,e===90)return{width:a,height:t};var r=e%90*Math.PI/180,n=Math.sin(r),o=Math.cos(r),s=t*o+a*n,u=t*n+a*o;return e>90?{width:u,height:s}:{width:s,height:u}}function Qa(i,t,a,e){var r=t.aspectRatio,n=t.naturalWidth,o=t.naturalHeight,s=t.rotate,u=s===void 0?0:s,l=t.scaleX,c=l===void 0?1:l,h=t.scaleY,d=h===void 0?1:h,v=a.aspectRatio,b=a.naturalWidth,M=a.naturalHeight,E=e.fillColor,O=E===void 0?"transparent":E,S=e.imageSmoothingEnabled,A=S===void 0?!0:S,j=e.imageSmoothingQuality,_=j===void 0?"low":j,p=e.maxWidth,C=p===void 0?1/0:p,R=e.maxHeight,P=R===void 0?1/0:R,F=e.minWidth,st=F===void 0?0:F,ct=e.minHeight,et=ct===void 0?0:ct,Q=document.createElement("canvas"),z=Q.getContext("2d"),ht=ot({aspectRatio:v,width:C,height:P}),$t=ot({aspectRatio:v,width:st,height:et},"cover"),Lt=Math.min(ht.width,Math.max($t.width,b)),Pt=Math.min(ht.height,Math.max($t.height,M)),oe=ot({aspectRatio:r,width:C,height:P}),se=ot({aspectRatio:r,width:st,height:et},"cover"),ce=Math.min(oe.width,Math.max(se.width,n)),he=Math.min(oe.height,Math.max(se.height,o)),Ke=[-ce/2,-he/2,ce,he];return Q.width=bt(Lt),Q.height=bt(Pt),z.fillStyle=O,z.fillRect(0,0,Lt,Pt),z.save(),z.translate(Lt/2,Pt/2),z.rotate(u*Math.PI/180),z.scale(c,d),z.imageSmoothingEnabled=A,z.imageSmoothingQuality=_,z.drawImage.apply(z,[i].concat(Ie(Ke.map(function(Qe){return Math.floor(bt(Qe))})))),z.restore(),Q}var Ge=String.fromCharCode;function Ja(i,t,a){var e="";a+=t;for(var r=t;r<a;r+=1)e+=Ge(i.getUint8(r));return e}var ti=/^data:.*,/;function ei(i){var t=i.replace(ti,""),a=atob(t),e=new ArrayBuffer(a.length),r=new Uint8Array(e);return B(r,function(n,o){r[o]=a.charCodeAt(o)}),e}function ai(i,t){for(var a=[],e=8192,r=new Uint8Array(i);r.length>0;)a.push(Ge.apply(null,je(r.subarray(0,e)))),r=r.subarray(e);return"data:".concat(t,";base64,").concat(btoa(a.join("")))}function ii(i){var t=new DataView(i),a;try{var e,r,n;if(t.getUint8(0)===255&&t.getUint8(1)===216)for(var o=t.byteLength,s=2;s+1<o;){if(t.getUint8(s)===255&&t.getUint8(s+1)===225){r=s;break}s+=1}if(r){var u=r+4,l=r+10;if(Ja(t,u,4)==="Exif"){var c=t.getUint16(l);if(e=c===18761,(e||c===19789)&&t.getUint16(l+2,e)===42){var h=t.getUint32(l+4,e);h>=8&&(n=l+h)}}}if(n){var d=t.getUint16(n,e),v,b;for(b=0;b<d;b+=1)if(v=n+b*12+2,t.getUint16(v,e)===274){v+=8,a=t.getUint16(v,e),t.setUint16(v,1,e);break}}}catch{a=1}return a}function ni(i){var t=0,a=1,e=1;switch(i){case 2:a=-1;break;case 3:t=-180;break;case 4:e=-1;break;case 5:t=90,e=-1;break;case 6:t=90;break;case 7:t=90,a=-1;break;case 8:t=-90;break}return{rotate:t,scaleX:a,scaleY:e}}var ri={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,a=this.options,e=this.container,r=this.cropper,n=Number(a.minContainerWidth),o=Number(a.minContainerHeight);L(r,H),J(t,H);var s={width:Math.max(e.offsetWidth,n>=0?n:He),height:Math.max(e.offsetHeight,o>=0?o:We)};this.containerData=s,rt(r,{width:s.width,height:s.height}),L(t,H),J(r,H)},initCanvas:function(){var t=this.containerData,a=this.imageData,e=this.options.viewMode,r=Math.abs(a.rotate)%180===90,n=r?a.naturalHeight:a.naturalWidth,o=r?a.naturalWidth:a.naturalHeight,s=n/o,u=t.width,l=t.height;t.height*s>t.width?e===3?u=t.height*s:l=t.width/s:e===3?l=t.width/s:u=t.height*s;var c={aspectRatio:s,naturalWidth:n,naturalHeight:o,width:u,height:l};this.canvasData=c,this.limited=e===1||e===2,this.limitCanvas(!0,!0),c.width=Math.min(Math.max(c.width,c.minWidth),c.maxWidth),c.height=Math.min(Math.max(c.height,c.minHeight),c.maxHeight),c.left=(t.width-c.width)/2,c.top=(t.height-c.height)/2,c.oldLeft=c.left,c.oldTop=c.top,this.initialCanvasData=N({},c)},limitCanvas:function(t,a){var e=this.options,r=this.containerData,n=this.canvasData,o=this.cropBoxData,s=e.viewMode,u=n.aspectRatio,l=this.cropped&&o;if(t){var c=Number(e.minCanvasWidth)||0,h=Number(e.minCanvasHeight)||0;s>1?(c=Math.max(c,r.width),h=Math.max(h,r.height),s===3&&(h*u>c?c=h*u:h=c/u)):s>0&&(c?c=Math.max(c,l?o.width:0):h?h=Math.max(h,l?o.height:0):l&&(c=o.width,h=o.height,h*u>c?c=h*u:h=c/u));var d=ot({aspectRatio:u,width:c,height:h});c=d.width,h=d.height,n.minWidth=c,n.minHeight=h,n.maxWidth=1/0,n.maxHeight=1/0}if(a)if(s>(l?0:1)){var v=r.width-n.width,b=r.height-n.height;n.minLeft=Math.min(0,v),n.minTop=Math.min(0,b),n.maxLeft=Math.max(0,v),n.maxTop=Math.max(0,b),l&&this.limited&&(n.minLeft=Math.min(o.left,o.left+(o.width-n.width)),n.minTop=Math.min(o.top,o.top+(o.height-n.height)),n.maxLeft=o.left,n.maxTop=o.top,s===2&&(n.width>=r.width&&(n.minLeft=Math.min(0,v),n.maxLeft=Math.max(0,v)),n.height>=r.height&&(n.minTop=Math.min(0,b),n.maxTop=Math.max(0,b))))}else n.minLeft=-n.width,n.minTop=-n.height,n.maxLeft=r.width,n.maxTop=r.height},renderCanvas:function(t,a){var e=this.canvasData,r=this.imageData;if(a){var n=Ka({width:r.naturalWidth*Math.abs(r.scaleX||1),height:r.naturalHeight*Math.abs(r.scaleY||1),degree:r.rotate||0}),o=n.width,s=n.height,u=e.width*(o/e.naturalWidth),l=e.height*(s/e.naturalHeight);e.left-=(u-e.width)/2,e.top-=(l-e.height)/2,e.width=u,e.height=l,e.aspectRatio=o/s,e.naturalWidth=o,e.naturalHeight=s,this.limitCanvas(!0,!1)}(e.width>e.maxWidth||e.width<e.minWidth)&&(e.left=e.oldLeft),(e.height>e.maxHeight||e.height<e.minHeight)&&(e.top=e.oldTop),e.width=Math.min(Math.max(e.width,e.minWidth),e.maxWidth),e.height=Math.min(Math.max(e.height,e.minHeight),e.maxHeight),this.limitCanvas(!1,!0),e.left=Math.min(Math.max(e.left,e.minLeft),e.maxLeft),e.top=Math.min(Math.max(e.top,e.minTop),e.maxTop),e.oldLeft=e.left,e.oldTop=e.top,rt(this.canvas,N({width:e.width,height:e.height},Et({translateX:e.left,translateY:e.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var a=this.canvasData,e=this.imageData,r=e.naturalWidth*(a.width/a.naturalWidth),n=e.naturalHeight*(a.height/a.naturalHeight);N(e,{width:r,height:n,left:(a.width-r)/2,top:(a.height-n)/2}),rt(this.image,N({width:e.width,height:e.height},Et(N({translateX:e.left,translateY:e.top},e)))),t&&this.output()},initCropBox:function(){var t=this.options,a=this.canvasData,e=t.aspectRatio||t.initialAspectRatio,r=Number(t.autoCropArea)||.8,n={width:a.width,height:a.height};e&&(a.height*e>a.width?n.height=n.width/e:n.width=n.height*e),this.cropBoxData=n,this.limitCropBox(!0,!0),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),n.width=Math.max(n.minWidth,n.width*r),n.height=Math.max(n.minHeight,n.height*r),n.left=a.left+(a.width-n.width)/2,n.top=a.top+(a.height-n.height)/2,n.oldLeft=n.left,n.oldTop=n.top,this.initialCropBoxData=N({},n)},limitCropBox:function(t,a){var e=this.options,r=this.containerData,n=this.canvasData,o=this.cropBoxData,s=this.limited,u=e.aspectRatio;if(t){var l=Number(e.minCropBoxWidth)||0,c=Number(e.minCropBoxHeight)||0,h=s?Math.min(r.width,n.width,n.width+n.left,r.width-n.left):r.width,d=s?Math.min(r.height,n.height,n.height+n.top,r.height-n.top):r.height;l=Math.min(l,r.width),c=Math.min(c,r.height),u&&(l&&c?c*u>l?c=l/u:l=c*u:l?c=l/u:c&&(l=c*u),d*u>h?d=h/u:h=d*u),o.minWidth=Math.min(l,h),o.minHeight=Math.min(c,d),o.maxWidth=h,o.maxHeight=d}a&&(s?(o.minLeft=Math.max(0,n.left),o.minTop=Math.max(0,n.top),o.maxLeft=Math.min(r.width,n.left+n.width)-o.width,o.maxTop=Math.min(r.height,n.top+n.height)-o.height):(o.minLeft=0,o.minTop=0,o.maxLeft=r.width-o.width,o.maxTop=r.height-o.height))},renderCropBox:function(){var t=this.options,a=this.containerData,e=this.cropBoxData;(e.width>e.maxWidth||e.width<e.minWidth)&&(e.left=e.oldLeft),(e.height>e.maxHeight||e.height<e.minHeight)&&(e.top=e.oldTop),e.width=Math.min(Math.max(e.width,e.minWidth),e.maxWidth),e.height=Math.min(Math.max(e.height,e.minHeight),e.maxHeight),this.limitCropBox(!1,!0),e.left=Math.min(Math.max(e.left,e.minLeft),e.maxLeft),e.top=Math.min(Math.max(e.top,e.minTop),e.maxTop),e.oldLeft=e.left,e.oldTop=e.top,t.movable&&t.cropBoxMovable&&Nt(this.face,Tt,e.width>=a.width&&e.height>=a.height?Pe:ie),rt(this.cropBox,N({width:e.width,height:e.height},Et({translateX:e.left,translateY:e.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),yt(this.element,Ft,this.getData())}},oi={initPreview:function(){var t=this.element,a=this.crossOrigin,e=this.options.preview,r=a?this.crossOriginUrl:this.url,n=t.alt||"The image to preview",o=document.createElement("img");if(a&&(o.crossOrigin=a),o.src=r,o.alt=n,this.viewBox.appendChild(o),this.viewBoxImage=o,!!e){var s=e;typeof e=="string"?s=t.ownerDocument.querySelectorAll(e):e.querySelector&&(s=[e]),this.previews=s,B(s,function(u){var l=document.createElement("img");Nt(u,At,{width:u.offsetWidth,height:u.offsetHeight,html:u.innerHTML}),a&&(l.crossOrigin=a),l.src=r,l.alt=n,l.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',u.innerHTML="",u.appendChild(l)})}},resetPreview:function(){B(this.previews,function(t){var a=Qt(t,At);rt(t,{width:a.width,height:a.height}),t.innerHTML=a.html,Fa(t,At)})},preview:function(){var t=this.imageData,a=this.canvasData,e=this.cropBoxData,r=e.width,n=e.height,o=t.width,s=t.height,u=e.left-a.left-t.left,l=e.top-a.top-t.top;!this.cropped||this.disabled||(rt(this.viewBoxImage,N({width:o,height:s},Et(N({translateX:-u,translateY:-l},t)))),B(this.previews,function(c){var h=Qt(c,At),d=h.width,v=h.height,b=d,M=v,E=1;r&&(E=d/r,M=n*E),n&&M>v&&(E=v/n,b=r*E,M=v),rt(c,{width:b,height:M}),rt(c.getElementsByTagName("img")[0],N({width:o*E,height:s*E},Et(N({translateX:-u*E,translateY:-l*E},t))))}))}},si={bind:function(){var t=this.element,a=this.options,e=this.cropper;X(a.cropstart)&&U(t,Zt,a.cropstart),X(a.cropmove)&&U(t,qt,a.cropmove),X(a.cropend)&&U(t,Gt,a.cropend),X(a.crop)&&U(t,Ft,a.crop),X(a.zoom)&&U(t,Kt,a.zoom),U(e,ve,this.onCropStart=this.cropStart.bind(this)),a.zoomable&&a.zoomOnWheel&&U(e,xe,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),a.toggleDragModeOnDblclick&&U(e,ge,this.onDblclick=this.dblclick.bind(this)),U(t.ownerDocument,we,this.onCropMove=this.cropMove.bind(this)),U(t.ownerDocument,be,this.onCropEnd=this.cropEnd.bind(this)),a.responsive&&U(window,_e,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,a=this.options,e=this.cropper;X(a.cropstart)&&G(t,Zt,a.cropstart),X(a.cropmove)&&G(t,qt,a.cropmove),X(a.cropend)&&G(t,Gt,a.cropend),X(a.crop)&&G(t,Ft,a.crop),X(a.zoom)&&G(t,Kt,a.zoom),G(e,ve,this.onCropStart),a.zoomable&&a.zoomOnWheel&&G(e,xe,this.onWheel,{passive:!1,capture:!0}),a.toggleDragModeOnDblclick&&G(e,ge,this.onDblclick),G(t.ownerDocument,we,this.onCropMove),G(t.ownerDocument,be,this.onCropEnd),a.responsive&&G(window,_e,this.onResize)}},ci={resize:function(){if(!this.disabled){var t=this.options,a=this.container,e=this.containerData,r=a.offsetWidth/e.width,n=a.offsetHeight/e.height,o=Math.abs(r-1)>Math.abs(n-1)?r:n;if(o!==1){var s,u;t.restore&&(s=this.getCanvasData(),u=this.getCropBoxData()),this.render(),t.restore&&(this.setCanvasData(B(s,function(l,c){s[c]=l*o})),this.setCropBoxData(B(u,function(l,c){u[c]=l*o})))}}},dblclick:function(){this.disabled||this.options.dragMode===Xe||this.setDragMode(Ua(this.dragBox,Ut)?Ye:ne)},wheel:function(t){var a=this,e=Number(this.options.wheelZoomRatio)||.1,r=1;this.disabled||(t.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){a.wheeling=!1},50),t.deltaY?r=t.deltaY>0?1:-1:t.wheelDelta?r=-t.wheelDelta/120:t.detail&&(r=t.detail>0?1:-1),this.zoom(-r*e,t)))},cropStart:function(t){var a=t.buttons,e=t.button;if(!(this.disabled||(t.type==="mousedown"||t.type==="pointerdown"&&t.pointerType==="mouse")&&(D(a)&&a!==1||D(e)&&e!==0||t.ctrlKey))){var r=this.options,n=this.pointers,o;t.changedTouches?B(t.changedTouches,function(s){n[s.identifier]=St(s)}):n[t.pointerId||0]=St(t),Object.keys(n).length>1&&r.zoomable&&r.zoomOnTouch?o=ze:o=Qt(t.target,Tt),Ia.test(o)&&yt(this.element,Zt,{originalEvent:t,action:o})!==!1&&(t.preventDefault(),this.action=o,this.cropping=!1,o===Le&&(this.cropping=!0,L(this.dragBox,Rt)))}},cropMove:function(t){var a=this.action;if(!(this.disabled||!a)){var e=this.pointers;t.preventDefault(),yt(this.element,qt,{originalEvent:t,action:a})!==!1&&(t.changedTouches?B(t.changedTouches,function(r){N(e[r.identifier]||{},St(r,!0))}):N(e[t.pointerId||0]||{},St(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var a=this.action,e=this.pointers;t.changedTouches?B(t.changedTouches,function(r){delete e[r.identifier]}):delete e[t.pointerId||0],a&&(t.preventDefault(),Object.keys(e).length||(this.action=""),this.cropping&&(this.cropping=!1,vt(this.dragBox,Rt,this.cropped&&this.options.modal)),yt(this.element,Gt,{originalEvent:t,action:a}))}}},hi={change:function(t){var a=this.options,e=this.canvasData,r=this.containerData,n=this.cropBoxData,o=this.pointers,s=this.action,u=a.aspectRatio,l=n.left,c=n.top,h=n.width,d=n.height,v=l+h,b=c+d,M=0,E=0,O=r.width,S=r.height,A=!0,j;!u&&t.shiftKey&&(u=h&&d?h/d:1),this.limited&&(M=n.minLeft,E=n.minTop,O=M+Math.min(r.width,e.width,e.left+e.width),S=E+Math.min(r.height,e.height,e.top+e.height));var _=o[Object.keys(o)[0]],p={x:_.endX-_.startX,y:_.endY-_.startY},C=function(P){switch(P){case lt:v+p.x>O&&(p.x=O-v);break;case ut:l+p.x<M&&(p.x=M-l);break;case at:c+p.y<E&&(p.y=E-c);break;case mt:b+p.y>S&&(p.y=S-b);break}};switch(s){case ie:l+=p.x,c+=p.y;break;case lt:if(p.x>=0&&(v>=O||u&&(c<=E||b>=S))){A=!1;break}C(lt),h+=p.x,h<0&&(s=ut,h=-h,l-=h),u&&(d=h/u,c+=(n.height-d)/2);break;case at:if(p.y<=0&&(c<=E||u&&(l<=M||v>=O))){A=!1;break}C(at),d-=p.y,c+=p.y,d<0&&(s=mt,d=-d,c-=d),u&&(h=d*u,l+=(n.width-h)/2);break;case ut:if(p.x<=0&&(l<=M||u&&(c<=E||b>=S))){A=!1;break}C(ut),h-=p.x,l+=p.x,h<0&&(s=lt,h=-h,l-=h),u&&(d=h/u,c+=(n.height-d)/2);break;case mt:if(p.y>=0&&(b>=S||u&&(l<=M||v>=O))){A=!1;break}C(mt),d+=p.y,d<0&&(s=at,d=-d,c-=d),u&&(h=d*u,l+=(n.width-h)/2);break;case xt:if(u){if(p.y<=0&&(c<=E||v>=O)){A=!1;break}C(at),d-=p.y,c+=p.y,h=d*u}else C(at),C(lt),p.x>=0?v<O?h+=p.x:p.y<=0&&c<=E&&(A=!1):h+=p.x,p.y<=0?c>E&&(d-=p.y,c+=p.y):(d-=p.y,c+=p.y);h<0&&d<0?(s=Mt,d=-d,h=-h,c-=d,l-=h):h<0?(s=Dt,h=-h,l-=h):d<0&&(s=Ct,d=-d,c-=d);break;case Dt:if(u){if(p.y<=0&&(c<=E||l<=M)){A=!1;break}C(at),d-=p.y,c+=p.y,h=d*u,l+=n.width-h}else C(at),C(ut),p.x<=0?l>M?(h-=p.x,l+=p.x):p.y<=0&&c<=E&&(A=!1):(h-=p.x,l+=p.x),p.y<=0?c>E&&(d-=p.y,c+=p.y):(d-=p.y,c+=p.y);h<0&&d<0?(s=Ct,d=-d,h=-h,c-=d,l-=h):h<0?(s=xt,h=-h,l-=h):d<0&&(s=Mt,d=-d,c-=d);break;case Mt:if(u){if(p.x<=0&&(l<=M||b>=S)){A=!1;break}C(ut),h-=p.x,l+=p.x,d=h/u}else C(mt),C(ut),p.x<=0?l>M?(h-=p.x,l+=p.x):p.y>=0&&b>=S&&(A=!1):(h-=p.x,l+=p.x),p.y>=0?b<S&&(d+=p.y):d+=p.y;h<0&&d<0?(s=xt,d=-d,h=-h,c-=d,l-=h):h<0?(s=Ct,h=-h,l-=h):d<0&&(s=Dt,d=-d,c-=d);break;case Ct:if(u){if(p.x>=0&&(v>=O||b>=S)){A=!1;break}C(lt),h+=p.x,d=h/u}else C(mt),C(lt),p.x>=0?v<O?h+=p.x:p.y>=0&&b>=S&&(A=!1):h+=p.x,p.y>=0?b<S&&(d+=p.y):d+=p.y;h<0&&d<0?(s=Dt,d=-d,h=-h,c-=d,l-=h):h<0?(s=Mt,h=-h,l-=h):d<0&&(s=xt,d=-d,c-=d);break;case Pe:this.move(p.x,p.y),A=!1;break;case ze:this.zoom(qa(o),t),A=!1;break;case Le:if(!p.x||!p.y){A=!1;break}j=Fe(this.cropper),l=_.startX-j.left,c=_.startY-j.top,h=n.minWidth,d=n.minHeight,p.x>0?s=p.y>0?Ct:xt:p.x<0&&(l-=h,s=p.y>0?Mt:Dt),p.y<0&&(c-=d),this.cropped||(J(this.cropBox,H),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}A&&(n.width=h,n.height=d,n.left=l,n.top=c,this.action=s,this.renderCropBox()),B(o,function(R){R.startX=R.endX,R.startY=R.endY})}},li={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&L(this.dragBox,Rt),J(this.cropBox,H),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=N({},this.initialImageData),this.canvasData=N({},this.initialCanvasData),this.cropBoxData=N({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(N(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),J(this.dragBox,Rt),L(this.cropBox,H)),this},replace:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&t&&(this.isImg&&(this.element.src=t),a?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,B(this.previews,function(e){e.getElementsByTagName("img")[0].src=t}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,J(this.cropper,fe)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,L(this.cropper,fe)),this},destroy:function(){var t=this.element;return t[T]?(t[T]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,e=this.canvasData,r=e.left,n=e.top;return this.moveTo(zt(t)?t:r+Number(t),zt(a)?a:n+Number(a))},moveTo:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,e=this.canvasData,r=!1;return t=Number(t),a=Number(a),this.ready&&!this.disabled&&this.options.movable&&(D(t)&&(e.left=t,r=!0),D(a)&&(e.top=a,r=!0),r&&this.renderCanvas(!0)),this},zoom:function(t,a){var e=this.canvasData;return t=Number(t),t<0?t=1/(1-t):t=1+t,this.zoomTo(e.width*t/e.naturalWidth,null,a)},zoomTo:function(t,a,e){var r=this.options,n=this.canvasData,o=n.width,s=n.height,u=n.naturalWidth,l=n.naturalHeight;if(t=Number(t),t>=0&&this.ready&&!this.disabled&&r.zoomable){var c=u*t,h=l*t;if(yt(this.element,Kt,{ratio:t,oldRatio:o/u,originalEvent:e})===!1)return this;if(e){var d=this.pointers,v=Fe(this.cropper),b=d&&Object.keys(d).length?Za(d):{pageX:e.pageX,pageY:e.pageY};n.left-=(c-o)*((b.pageX-v.left-n.left)/o),n.top-=(h-s)*((b.pageY-v.top-n.top)/s)}else gt(a)&&D(a.x)&&D(a.y)?(n.left-=(c-o)*((a.x-n.left)/o),n.top-=(h-s)*((a.y-n.top)/s)):(n.left-=(c-o)/2,n.top-=(h-s)/2);n.width=c,n.height=h,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return t=Number(t),D(t)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var a=this.imageData.scaleY;return this.scale(t,D(a)?a:1)},scaleY:function(t){var a=this.imageData.scaleX;return this.scale(D(a)?a:1,t)},scale:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,e=this.imageData,r=!1;return t=Number(t),a=Number(a),this.ready&&!this.disabled&&this.options.scalable&&(D(t)&&(e.scaleX=t,r=!0),D(a)&&(e.scaleY=a,r=!0),r&&this.renderCanvas(!0,!0)),this},getData:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,a=this.options,e=this.imageData,r=this.canvasData,n=this.cropBoxData,o;if(this.ready&&this.cropped){o={x:n.left-r.left,y:n.top-r.top,width:n.width,height:n.height};var s=e.width/e.naturalWidth;if(B(o,function(c,h){o[h]=c/s}),t){var u=Math.round(o.y+o.height),l=Math.round(o.x+o.width);o.x=Math.round(o.x),o.y=Math.round(o.y),o.width=l-o.x,o.height=u-o.y}}else o={x:0,y:0,width:0,height:0};return a.rotatable&&(o.rotate=e.rotate||0),a.scalable&&(o.scaleX=e.scaleX||1,o.scaleY=e.scaleY||1),o},setData:function(t){var a=this.options,e=this.imageData,r=this.canvasData,n={};if(this.ready&&!this.disabled&&gt(t)){var o=!1;a.rotatable&&D(t.rotate)&&t.rotate!==e.rotate&&(e.rotate=t.rotate,o=!0),a.scalable&&(D(t.scaleX)&&t.scaleX!==e.scaleX&&(e.scaleX=t.scaleX,o=!0),D(t.scaleY)&&t.scaleY!==e.scaleY&&(e.scaleY=t.scaleY,o=!0)),o&&this.renderCanvas(!0,!0);var s=e.width/e.naturalWidth;D(t.x)&&(n.left=t.x*s+r.left),D(t.y)&&(n.top=t.y*s+r.top),D(t.width)&&(n.width=t.width*s),D(t.height)&&(n.height=t.height*s),this.setCropBoxData(n)}return this},getContainerData:function(){return this.ready?N({},this.containerData):{}},getImageData:function(){return this.sized?N({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,a={};return this.ready&&B(["left","top","width","height","naturalWidth","naturalHeight"],function(e){a[e]=t[e]}),a},setCanvasData:function(t){var a=this.canvasData,e=a.aspectRatio;return this.ready&&!this.disabled&&gt(t)&&(D(t.left)&&(a.left=t.left),D(t.top)&&(a.top=t.top),D(t.width)?(a.width=t.width,a.height=t.width/e):D(t.height)&&(a.height=t.height,a.width=t.height*e),this.renderCanvas(!0)),this},getCropBoxData:function(){var t=this.cropBoxData,a;return this.ready&&this.cropped&&(a={left:t.left,top:t.top,width:t.width,height:t.height}),a||{}},setCropBoxData:function(t){var a=this.cropBoxData,e=this.options.aspectRatio,r,n;return this.ready&&this.cropped&&!this.disabled&&gt(t)&&(D(t.left)&&(a.left=t.left),D(t.top)&&(a.top=t.top),D(t.width)&&t.width!==a.width&&(r=!0,a.width=t.width),D(t.height)&&t.height!==a.height&&(n=!0,a.height=t.height),e&&(r?a.height=a.width/e:n&&(a.width=a.height*e)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var a=this.canvasData,e=Qa(this.image,this.imageData,a,t);if(!this.cropped)return e;var r=this.getData(t.rounded),n=r.x,o=r.y,s=r.width,u=r.height,l=e.width/Math.floor(a.naturalWidth);l!==1&&(n*=l,o*=l,s*=l,u*=l);var c=s/u,h=ot({aspectRatio:c,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),d=ot({aspectRatio:c,width:t.minWidth||0,height:t.minHeight||0},"cover"),v=ot({aspectRatio:c,width:t.width||(l!==1?e.width:s),height:t.height||(l!==1?e.height:u)}),b=v.width,M=v.height;b=Math.min(h.width,Math.max(d.width,b)),M=Math.min(h.height,Math.max(d.height,M));var E=document.createElement("canvas"),O=E.getContext("2d");E.width=bt(b),E.height=bt(M),O.fillStyle=t.fillColor||"transparent",O.fillRect(0,0,b,M);var S=t.imageSmoothingEnabled,A=S===void 0?!0:S,j=t.imageSmoothingQuality;O.imageSmoothingEnabled=A,j&&(O.imageSmoothingQuality=j);var _=e.width,p=e.height,C=n,R=o,P,F,st,ct,et,Q;C<=-s||C>_?(C=0,P=0,st=0,et=0):C<=0?(st=-C,C=0,P=Math.min(_,s+C),et=P):C<=_&&(st=0,P=Math.min(s,_-C),et=P),P<=0||R<=-u||R>p?(R=0,F=0,ct=0,Q=0):R<=0?(ct=-R,R=0,F=Math.min(p,u+R),Q=F):R<=p&&(ct=0,F=Math.min(u,p-R),Q=F);var z=[C,R,P,F];if(et>0&&Q>0){var ht=b/s;z.push(st*ht,ct*ht,et*ht,Q*ht)}return O.drawImage.apply(O,[e].concat(Ie(z.map(function($t){return Math.floor(bt($t))})))),E},setAspectRatio:function(t){var a=this.options;return!this.disabled&&!zt(t)&&(a.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var a=this.options,e=this.dragBox,r=this.face;if(this.ready&&!this.disabled){var n=t===ne,o=a.movable&&t===Ye;t=n||o?t:Xe,a.dragMode=t,Nt(e,Tt,t),vt(e,Ut,n),vt(e,Vt,o),a.cropBoxMovable||(Nt(r,Tt,t),vt(r,Ut,n),vt(r,Vt,o))}return this}},ui=tt.Cropper,qe=function(){function i(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Da(this,i),!t||!Pa.test(t.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t,this.options=N({},Ce,gt(a)&&a),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return Ca(i,[{key:"init",value:function(){var a=this.element,e=a.tagName.toLowerCase(),r;if(!a[T]){if(a[T]=this,e==="img"){if(this.isImg=!0,r=a.getAttribute("src")||"",this.originalUrl=r,!r)return;r=a.src}else e==="canvas"&&window.HTMLCanvasElement&&(r=a.toDataURL());this.load(r)}}},{key:"load",value:function(a){var e=this;if(a){this.url=a,this.imageData={};var r=this.element,n=this.options;if(!n.rotatable&&!n.scalable&&(n.checkOrientation=!1),!n.checkOrientation||!window.ArrayBuffer){this.clone();return}if(Ba.test(a)){La.test(a)?this.read(ei(a)):this.clone();return}var o=new XMLHttpRequest,s=this.clone.bind(this);this.reloading=!0,this.xhr=o,o.onabort=s,o.onerror=s,o.ontimeout=s,o.onprogress=function(){o.getResponseHeader("content-type")!==De&&o.abort()},o.onload=function(){e.read(o.response)},o.onloadend=function(){e.reloading=!1,e.xhr=null},n.checkCrossOrigin&&Ee(a)&&r.crossOrigin&&(a=ke(a)),o.open("GET",a,!0),o.responseType="arraybuffer",o.withCredentials=r.crossOrigin==="use-credentials",o.send()}}},{key:"read",value:function(a){var e=this.options,r=this.imageData,n=ii(a),o=0,s=1,u=1;if(n>1){this.url=ai(a,De);var l=ni(n);o=l.rotate,s=l.scaleX,u=l.scaleY}e.rotatable&&(r.rotate=o),e.scalable&&(r.scaleX=s,r.scaleY=u),this.clone()}},{key:"clone",value:function(){var a=this.element,e=this.url,r=a.crossOrigin,n=e;this.options.checkCrossOrigin&&Ee(e)&&(r||(r="anonymous"),n=ke(e)),this.crossOrigin=r,this.crossOriginUrl=n;var o=document.createElement("img");r&&(o.crossOrigin=r),o.src=n||e,o.alt=a.alt||"The image to crop",this.image=o,o.onload=this.start.bind(this),o.onerror=this.stop.bind(this),L(o,me),a.parentNode.insertBefore(o,a.nextSibling)}},{key:"start",value:function(){var a=this,e=this.image;e.onload=null,e.onerror=null,this.sizing=!0;var r=tt.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(tt.navigator.userAgent),n=function(l,c){N(a.imageData,{naturalWidth:l,naturalHeight:c,aspectRatio:l/c}),a.initialImageData=N({},a.imageData),a.sizing=!1,a.sized=!0,a.build()};if(e.naturalWidth&&!r){n(e.naturalWidth,e.naturalHeight);return}var o=document.createElement("img"),s=document.body||document.documentElement;this.sizingImage=o,o.onload=function(){n(o.width,o.height),r||s.removeChild(o)},o.src=e.src,r||(o.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",s.appendChild(o))}},{key:"stop",value:function(){var a=this.image;a.onload=null,a.onerror=null,a.parentNode.removeChild(a),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var a=this.element,e=this.options,r=this.image,n=a.parentNode,o=document.createElement("div");o.innerHTML=za;var s=o.querySelector(".".concat(T,"-container")),u=s.querySelector(".".concat(T,"-canvas")),l=s.querySelector(".".concat(T,"-drag-box")),c=s.querySelector(".".concat(T,"-crop-box")),h=c.querySelector(".".concat(T,"-face"));this.container=n,this.cropper=s,this.canvas=u,this.dragBox=l,this.cropBox=c,this.viewBox=s.querySelector(".".concat(T,"-view-box")),this.face=h,u.appendChild(r),L(a,H),n.insertBefore(s,a.nextSibling),J(r,me),this.initPreview(),this.bind(),e.initialAspectRatio=Math.max(0,e.initialAspectRatio)||NaN,e.aspectRatio=Math.max(0,e.aspectRatio)||NaN,e.viewMode=Math.max(0,Math.min(3,Math.round(e.viewMode)))||0,L(c,H),e.guides||L(c.getElementsByClassName("".concat(T,"-dashed")),H),e.center||L(c.getElementsByClassName("".concat(T,"-center")),H),e.background&&L(s,"".concat(T,"-bg")),e.highlight||L(h,$a),e.cropBoxMovable&&(L(h,Vt),Nt(h,Tt,ie)),e.cropBoxResizable||(L(c.getElementsByClassName("".concat(T,"-line")),H),L(c.getElementsByClassName("".concat(T,"-point")),H)),this.render(),this.ready=!0,this.setDragMode(e.dragMode),e.autoCrop&&this.crop(),this.setData(e.data),X(e.ready)&&U(a,ye,e.ready,{once:!0}),yt(a,ye)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var a=this.cropper.parentNode;a&&a.removeChild(this.cropper),J(this.element,H)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=ui,i}},{key:"setDefaults",value:function(a){N(Ce,gt(a)&&a)}}]),i}();N(qe.prototype,ri,oi,si,ci,hi,li);const di=["disabled"],pi={key:0,class:"tw-text-center"},fi=["src"],mi={class:"gray small"},gi={class:"tw-text-center"},vi={class:"tw-text-center"},wi=m("i",{class:"fas fa-cloud-upload-alt"},null,-1),bi={key:0,class:"tw-mt-4 tw-truncate small gray"},yi={key:1},_i=["src"],xi=V({__name:"FormContactChangeUserpic",props:{originalImg:{}},emits:["close"],setup(i,{emit:t}){var j;const a=i,e=["image/jpeg","image/png"],{t:r}=Te(),{contact:n}=_t(ft()),o=nt(),s=nt(),u=nt(),l=nt(null),c=nt(null),h=Ot(`crm.contact.userpic?id=${(j=n.value)==null?void 0:j.id}&userpic_size=128`,{immediate:!1}).post().json(),{isOverDropZone:d}=Je(o,S),{open:v,onChange:b}=ta({multiple:!1,accept:e.join(",")});let M,E=!1,O=null;a.originalImg&&pa(a.originalImg).then(_=>{l.value=_}).catch(_=>_),b(_=>{_&&S(Array.from(_))});async function S(_){const p=_==null?void 0:_[0];if(p)if(e.includes(p.type)){const{promise:C}=ea(p);l.value=await C.value,c.value=p.name}else alert(r("unsupportedFormat"))}aa(()=>{ia(l,async _=>{await na(),_&&s.value&&(M?M.replace(_):M=new qe(s.value,{dragMode:"move",aspectRatio:1,viewMode:1,preview:".preview",guides:!1,cropBoxResizable:!1,minCropBoxWidth:96,minCropBoxHeight:96,rotatable:!0,checkOrientation:!0,ready:function(){E=!0,M.reset()},crop:function(p){if(!E)return;const C=p.detail,{x:R,y:P,height:F}=C;O={x:Math.round(R),y:Math.round(P),size:Math.round(F)}}}))})});async function A(){if(l.value&&O){const _=l.value.split(",").pop();_&&(await h.post({photo:_,content_type:_.startsWith("/")?"image/jpeg":_.startsWith("i")?"image/png":"",crop:{...O}}).execute(),h.data.value&&(n.value.userpic=h.data.value,t("close")))}else t("close")}return(_,p)=>(f(),$(Ne,{"hide-close-icon":!0,onClose:p[1]||(p[1]=C=>t("close"))},{submit:w(()=>[m("button",{disabled:!l.value||g(h).isFetching.value,onClick:A},k(_.$t("save")),9,di)]),error:w(()=>[Z(k(g(h).error.value),1)]),default:w(()=>[m("div",{ref_key:"dropZoneRef",ref:o,class:dt(["tw-border-dashed tw-border-2 tw-border-waBorder tw-w-full tw-p-8 tw-box-border tw-overflow-hidden tw-rounded-md",{"tw-bg-waBackground":g(d)}])},[x(Y,{space:"6"},{default:w(()=>[l.value?(f(),y("div",pi,[m("div",{ref_key:"previewRef",ref:u,class:"preview tw-h-24 tw-w-24 tw-overflow-hidden tw-rounded-full tw-mx-auto tw-mb-2"},[m("img",{src:l.value,alt:"",class:"tw-h-full tw-object-contain"},null,8,fi)],512),m("div",mi,k(_.$t("preview")),1)])):W("",!0),m("div",gi,k(_.$t("userpicUploadMessage")),1),m("div",vi,[m("button",{class:"button purple outlined rounded",onClick:p[0]||(p[0]=()=>g(v)())},[wi,Z(" "+k(_.$t("chooseFile")),1)]),c.value?(f(),y("div",bi,k(c.value),1)):W("",!0)]),l.value?(f(),y("div",yi,[m("img",{ref_key:"imageRef",ref:s,src:l.value,style:{"max-height":"300px"}},null,8,_i)])):W("",!0)]),_:1})],2)]),_:1}))}}),Di={class:"tw-group tw-relative tw-w-20 tw-h-20 tw-rounded-full tw-overflow-hidden"},Ci=["onClick"],Mi=m("span",{class:"icon size-32"},[m("i",{class:"fas fa-camera"})],-1),Ei=[Mi],ki=V({__name:"ContactInfoUserpic",props:{disableEdit:{type:Boolean}},setup(i){const t=i,{contact:a}=ft();return(e,r)=>(f(),y("div",Di,[x(It,{url:g(a).userpic.thumb,size:80},null,8,["url"]),t.disableEdit?W("",!0):(f(),$(te,{key:0,component:xi,"component-props":{originalImg:g(a).userpic.original}},{default:w(({open:n})=>[m("div",{class:"tw-absolute tw-top-0 tw-left-0 tw-w-full tw-h-full tw-bg-black tw-opacity-0 group-hover:tw-opacity-30 tw-flex tw-justify-center tw-items-center tw-transition-opacity tw-cursor-pointer",onClick:n},Ei,8,Ci)]),_:1},8,["component-props"]))]))}}),Ti={class:"tw-p-2"},Ni=V({__name:"DropdownAddTags",props:{contactIds:{}},setup(i){const t=i,{contact:a}=_t(ft());return(e,r)=>(f(),y("div",Ti,[g(a)?(f(),$(ma,{key:0,modelValue:g(a),"onUpdate:modelValue":r[0]||(r[0]=n=>Xt(a)?a.value=n:null),"entity-type":"contact","entity-ids":t.contactIds},null,8,["modelValue","entity-ids"])):W("",!0)]))}}),Oi={class:"gray small tw-flex tw-items-center tw-space-x-1 hover:tw-opacity-70"},$i=m("i",{class:"fas fa-hashtag"},null,-1),Ai=V({__name:"ContactInfoTags",props:{contact:{}},setup(i){const t=i,{contact:a}=_t(ft());async function e(r){var o,s;const{response:n}=await Ot("crm.tag.remove").post({contact_id:[t.contact.id],tag:[r]});(o=n.value)!=null&&o.ok&&a.value&&a.value.id===t.contact.id&&(a.value.tags=(s=a.value)==null?void 0:s.tags.filter(u=>u.name!==r))}return(r,n)=>(f(),$(Y,{space:"none"},{default:w(()=>[x(fa,{"entity-type":"contact",tags:t.contact.tags,editable:!0,onDeleteTag:e},null,8,["tags"]),x(Jt,{"max-height":r.$route.meta.menuItemType==="frame"?"280px":void 0},{body:w(()=>[x(Ni,{"contact-ids":[t.contact.id]},null,8,["contact-ids"])]),default:w(()=>[m("a",Oi,[$i,m("span",null,k(r.$t("addTag")),1)])]),_:1},8,["max-height"])]),_:1}))}}),Si={class:"state-error"},Ze=V({__name:"ConfirmDialog",props:{message:{},submitButtonName:{},onConfirm:{type:Function},isLoading:{},error:{}},setup(i){const t=i;return(a,e)=>(f(),$(Ne,{"hide-close-icon":!0,"use-cancel-as-button-label":!0},{header:w(()=>[Z(k(t.message),1)]),error:w(()=>[m("div",Si,k(Xt(t.error)?t.error.value:t.error),1)]),submit:w(()=>[x(Se,{"is-fetching":Xt(t.isLoading)?t.isLoading.value:t.isLoading,onClick:K(t.onConfirm,["prevent"])},{default:w(()=>[Z(k(t.submitButtonName),1)]),_:1},8,["is-fetching","onClick"])]),default:w(()=>[ra(a.$slots,"default")]),_:3}))}}),Ri=["onClick"],Ii=m("i",{class:"fas fa-times-circle"},null,-1),Bi=[Ii],Li={class:"gray small tw-flex tw-items-center tw-space-x-1 hover:tw-opacity-70"},Pi=m("i",{class:"fas fa-plus"},null,-1),zi=V({__name:"ContactInfoSegments",props:{contact:{}},setup(i){const t=i,{t:a}=Te(),{contact:e}=_t(ft());async function r(n){const o=Ot(`crm.segment.exclude?id=${n}`,{immediate:!1}).post(JSON.stringify([t.contact.id])),s=async()=>{var c;await o.execute(),(c=o.response.value)!=null&&c.ok&&(e.value&&t.contact.id===e.value.id&&(e.value.segments=e.value.segments.filter(h=>h.id!==n)),l())},{show:u,hide:l}=kt(Ze,{message:a("excludeSegmentConfirmationMessage"),submitButtonName:a("exclude"),isLoading:o.isFetching,error:o.error,onConfirm:s});u()}return(n,o)=>(f(),$(Y,{space:"2"},{default:w(()=>[t.contact.segments.length?(f(),$($e,{key:0,class:"!-tw-mx-4"},{default:w(()=>[(f(!0),y(I,null,q(t.contact.segments,s=>(f(),$(Ht,{key:s.id},{default:w(()=>[(f(),$(oa(g(wt).webView?"a":"router-link"),{to:{name:"segment",params:{id:s.id}},class:dt(["tw-group",n.$constant.parentAppDisableRouterClass]),onClick:K(u=>g(wt).webView?g(sa).emit("spa:navigateTo",{name:"contactsBySegment",id:s.id}):null,["prevent"])},{default:w(()=>[s.icon||s.icon_path?(f(),$(It,{key:0,size:20,"fa-icon":s.icon,url:s.icon_path},null,8,["fa-icon","url"])):W("",!0),m("span",null,k(s.name),1),s.is_editable?(f(),y("span",{key:1,class:"icon tw-hidden tw-opacity-50 group-hover:tw-block hover:tw-opacity-100",onClick:K(u=>r(s.id),["stop","prevent"])},Bi,8,Ri)):W("",!0)]),_:2},1032,["to","class","onClick"]))]),_:2},1024))),128))]),_:1})):W("",!0),x(Jt,{"max-height":n.$route.meta.menuItemType==="frame"?"240px":"300px"},{body:w(()=>[x(da,{"contact-ids":[t.contact.id]},null,8,["contact-ids"])]),default:w(()=>[m("a",Li,[Pi,m("span",null,k(n.$t("addSegment")),1)])]),_:1},8,["max-height"])]),_:1}))}}),Yi={class:"small gray"},Xi={class:"tw-flex tw-justify-between tw-space-x-2"},Hi={class:"tw-flex tw-min-w-0 tw-flex-auto tw-items-center tw-space-x-2"},Wi=m("i",{class:"fas fa-pen gray"},null,-1),ji=[Wi],Ui=m("i",{class:"fas fa-user-tie"},null,-1),Vi=V({__name:"ContactInfoResponsible",props:{contact:{}},setup(i){const t=i;return(a,e)=>{const r=Oe("RouterLink");return f(),$(Y,{space:"2"},{default:w(()=>[t.contact.responsible?(f(),y(I,{key:0},[m("div",Yi,k(a.$t("responsible")),1),m("div",Xi,[m("div",Hi,[x(It,{size:32,url:t.contact.responsible.userpic},null,8,["url"]),x(r,{class:dt(["small tw-truncate",a.$constant.parentAppDisableRouterClass]),title:t.contact.responsible.name,to:{name:"contact",params:{id:t.contact.responsible.id}}},{default:w(()=>[Z(k(t.contact.responsible.name),1)]),_:1},8,["class","title","to"])]),a.contact.is_editable?(f(),y("button",{key:0,class:"circle transparent",onClick:e[0]||(e[0]=K(n=>g(kt)(ue,{contactIds:[t.contact.id],currentResponsible:t.contact.responsible??void 0,contactName:t.contact.main.name}).show(),["prevent"]))},ji)):W("",!0)])],64)):a.contact.is_editable?(f(),y("a",{key:1,class:"gray small tw-flex tw-items-center tw-space-x-1 hover:tw-opacity-70",onClick:e[1]||(e[1]=K(n=>g(kt)(ue,{contactIds:[t.contact.id],contactName:t.contact.main.name}).show(),["prevent"]))},[Ui,m("span",null,k(a.$t("addResponsible")),1)])):W("",!0)]),_:1})}}}),Fi=V({__name:"FormConfirmBanPersonalAccount",props:{contactId:{},contactName:{},onSuccess:{type:Function}},emits:["close"],setup(i,{emit:t}){const a=i,e=nt(""),r=Ot("crm.contact.ban",{immediate:!1}),{response:n,isFetching:o,error:s}=r,u=async()=>{var l;await r.post({id:a.contactId,reason:e.value.trim()}).execute(),(l=n.value)!=null&&l.ok&&n.value.status===204&&(a.onSuccess(),t("close"))};return(l,c)=>(f(),$(Ze,{message:`${l.$t("banContact")} ${a.contactName}`,"submit-button-name":l.$t("ban"),"is-loading":g(o),error:g(s),"on-confirm":u,onClose:c[1]||(c[1]=h=>t("close"))},{default:w(()=>[x(ga,{modelValue:e.value,"onUpdate:modelValue":c[0]||(c[0]=h=>e.value=h),placeholder:l.$t("optionalCommentBan"),"min-rows":3,"max-rows":10},null,8,["modelValue","placeholder"])]),_:1},8,["message","submit-button-name","is-loading","error"]))}}),Gi={class:"personal-account tw-flex tw-items-center tw-gap-3"},qi={class:"personal-account__status tw-text-sm"},Zi={key:0,class:"personal-account__action"},Ki=m("span",null,[m("i",{class:"fas fa-circle text-green custom-mr-4"})],-1),Qi=["onClick"],Ji=m("span",null,[m("i",{class:"fas fa-ban text-red custom-mr-4"})],-1),tn=V({__name:"ContactInfoPersonalAccount",props:{contactId:{},contactName:{},hasLogin:{type:Boolean},hasPassword:{type:Boolean},isBanned:{type:Boolean}},setup(i){const t=i,{contact:a}=ft(),e=nt(!1);function r(){kt(Fi,{contactId:t.contactId,contactName:t.contactName,onSuccess:()=>{a&&(a.details.is_banned=!0)}}).show()}async function n(){var u;e.value=!0;const{response:o,execute:s}=Ot("crm.contact.unban",{immediate:!1}).post({id:t.contactId});await s(),(u=o.value)!=null&&u.ok&&o.value.status===204&&a&&(a.details.is_banned=!1),e.value=!1}return(o,s)=>(f(),$(it,{label:o.$t("personalAccount"),"tooltip-content":o.$t("personalAccountTooltipMessage",[g(wt).backendUrl?`<a href='${g(wt).backendUrl}site/#/personal/settings/' class='semibold'>${o.$t("personalAccountTooltipLinkName")}</a>`:o.$t("personalAccountTooltipLinkName")]),"tooltip-placement":"top-end"},{default:w(()=>{var u;return[m("div",Gi,[m("div",qi,[t.isBanned?(f(),y(I,{key:0},[Z(k(o.$t("banned")),1)],64)):t.hasPassword?(f(),y(I,{key:1},[Z(k(o.$t("available")),1)],64)):(f(),y(I,{key:2},[Z(k(o.$t("notAvailable")),1)],64))]),(u=g(wt).rights)!=null&&u.is_admin&&!t.hasLogin?(f(),y("div",Zi,[t.isBanned?(f(),$(Se,{key:0,"type-link":!0,"is-fetching":e.value,size:"small",onClick:K(n,["prevent"])},{default:w(()=>[Ki,m("span",null,k(o.$t("removeBan")),1)]),_:1},8,["is-fetching","onClick"])):(f(),y("a",{key:1,class:"nowrap semibold small",onClick:K(r,["prevent"])},[Ji,m("span",null,k(o.$t("ban")),1)],8,Qi))])):W("",!0)])]}),_:1},8,["label","tooltip-content"]))}}),en=V({__name:"ContactInfoFavorites",props:{contact:{}},setup(i){const t=i,a=va(),{pinned:e,recent:r}=_t(a);(t.contact.is_pinned?e:r).value.push({id:t.contact.id,name:t.contact.main.name,userpic:t.contact.userpic.thumb});const n=le(()=>a.pinned.map(s=>s.id).includes(t.contact.id)),o=le(()=>a.fetchingIds.has(t.contact.id));return(s,u)=>(f(),$(wa,{type:"inline","is-favorite":n.value,"is-loading":o.value,onClick:u[0]||(u[0]=K(l=>g(a).pin(t.contact.id,!n.value),["prevent"]))},null,8,["is-favorite","is-loading"]))}}),an={key:0},nn={class:"tw-flex tw-justify-center md:tw-justify-start"},rn={key:1},on=m("span",{class:"icon size-80"},[m("i",{class:"fas fa-user-slash"})],-1),sn={key:2,class:"state-error-hint"},cn={class:"tw-flex tw-w-full tw-justify-between"},hn={key:0,class:"tw-flex"},ln=["onClick"],un=m("i",{class:"fas fa-pen gray"},null,-1),dn=[un],pn={class:"tw-hidden md:tw-block"},fn=m("button",{class:"circle transparent"},[m("i",{class:"fas fa-ellipsis-h gray"})],-1),mn={class:"tw-text-sm tw-text-center md:tw-text-left tw-break-words"},gn={key:0,class:"tw-bg-waBlank -tw-mx-4 tw-p-4"},vn={class:"bold"},Rn=V({__name:"ContactInfo",props:{contactId:{}},setup(i){const t=i,a=nt(!!wt.webView),{fetchId:e,contact:r,isFetching:n,error:o,statusCode:s}=_t(ft());return ca(()=>{e.value=t.contactId}),(u,l)=>{var h;const c=Oe("RouterLink");return f(),y("div",{class:dt(["tw-bg-waBackground tw-p-4",{active:a.value,"tw-min-h-[520px]":u.$route.meta.menuItemType==="frame"}])},[g(n)||((h=g(o))==null?void 0:h.code)===20?(f(),y("div",an,[x(Y,{space:"6"},{default:w(()=>[m("div",nn,[x(It,{skeleton:!0,size:80})]),(f(),y(I,null,q(2,d=>x(Y,{key:d,space:"2"},{default:w(()=>[(f(),y(I,null,q(3,v=>x(it,{key:v,skeleton:!0})),64))]),_:2},1024)),64))]),_:1})])):[403,404].includes(Number(g(s)))?(f(),y("div",rn,[x(la,{message:""},{default:w(()=>[on]),_:1})])):g(o)?(f(),y("div",sn,k(g(o)),1)):g(r)&&"id"in g(r)?(f(),$(Y,{key:3,space:"8"},{default:w(()=>[x(Y,{space:"2"},{default:w(()=>[x(c,ha({to:{name:"contact",params:{id:t.contactId}}},{...u.$route.meta.menuItemType==="frame"?{class:"tw-group/link tw-self-center"}:{custom:!0}}),{default:w(()=>[m("div",cn,[m("div",{class:dt(["md:tw-hidden",{"tw-w-8":u.$route.meta.menuItemType!=="frame"}])},null,2),x(ki,{"disable-edit":u.$route.meta.menuItemType==="frame"},null,8,["disable-edit"]),g(r).is_editable&&u.$route.meta.menuItemType!=="frame"?(f(),y("div",hn,[x(te,{component:Ae,"component-props":{contact:g(r)}},{default:w(({open:d})=>[m("button",{class:"circle transparent",onClick:K(d,["prevent"])},dn,8,ln)]),_:1},8,["component-props"]),m("div",pn,[x(Jt,{right:!0},{body:w(()=>[x(xa,{contact:g(r)},null,8,["contact"])]),default:w(()=>[fn]),_:1})])])):(f(),y("div",{key:1,class:dt(["md:tw-hidden",{"tw-w-8":u.$route.meta.menuItemType!=="frame"}])},null,2))]),x(it,{value:`${g(r).main.title??""} ${g(r).main.name}`.trim(),class:"bold black tw-text-lg tw-text-center break-words md:tw-text-left group-hover/link:tw-text-waAccent"},null,8,["value"])]),_:1},16,["to"]),m("div",mn,[Z(k(g(r).main.jobtitle??"")+" "+k(g(r).main.jobtitle&&g(r).main.company?` ${u.$t("in")} `:"")+" ",1),g(r).main.company?(f(),y(I,{key:0},[g(r).main.company_contact_id?(f(),$(c,{key:0,to:{name:"contact",params:{id:g(r).main.company_contact_id}},class:dt(u.$constant.parentAppDisableRouterClass)},{default:w(()=>[Z(k(g(r).main.company),1)]),_:1},8,["to","class"])):(f(),y(I,{key:1},[Z(k(g(r).main.company),1)],64))],64)):W("",!0)])]),_:1}),x(Y,{space:"2"},{default:w(()=>[(f(!0),y(I,null,q(new Array("address","email","phone","url"),d=>(f(),y(I,null,[(f(!0),y(I,null,q(g(r).main[d],v=>(f(),$(it,{key:v.value,value:v,type:d,"contact-id":t.contactId,class:"tw-text-sm"},null,8,["value","type","contact-id"]))),128))],64))),256))]),_:1}),x(Y,{space:"8"},{default:w(()=>[x(Y,{space:"2"},{default:w(()=>[(f(!0),y(I,null,q(new Array("im","socialnetwork"),d=>(f(),y(I,null,[(f(!0),y(I,null,q(g(r).main[d],(v,b)=>(f(),$(it,{key:b,value:v,type:d,class:"tw-text-sm"},null,8,["value","type"]))),128))],64))),256))]),_:1}),x(en,{contact:g(r)},null,8,["contact"]),x(Ai,{contact:g(r)},null,8,["contact"]),x(zi,{contact:g(r)},null,8,["contact"]),x(Vi,{contact:g(r)},null,8,["contact"]),x(Y,{space:"4"},{default:w(()=>[(f(!0),y(I,null,q(new Array("locale","timezone","birthday","sex","about"),d=>(f(),$(it,{key:d,label:u.$t(d),value:g(r).main[d],class:"tw-text-sm"},null,8,["label","value"]))),128)),x(tn,{"contact-id":g(r).id,"contact-name":g(r).main.name,"has-login":!!g(r).details.login,"has-password":g(r).details.has_password,"is-banned":g(r).details.is_banned},null,8,["contact-id","contact-name","has-login","has-password","is-banned"])]),_:1}),x(Y,{space:"4"},{default:w(()=>[(f(!0),y(I,null,q(g(r).fields,d=>(f(),y(I,{key:d.id},[d.type==="composite"?(f(),y("div",gn,[x(Y,{space:"2"},{default:w(()=>[(f(!0),y(I,null,q(d.values,(v,b)=>(f(),y(I,{key:b},[m("div",vn,k(d.name),1),(f(!0),y(I,null,q(v.data,M=>(f(),$(it,{key:M.id,label:M.name,value:M.value,class:"tw-text-sm"},null,8,["label","value"]))),128))],64))),128))]),_:2},1024)])):(f(),$(it,{key:1,label:d.name,value:d.value,class:"tw-text-sm"},null,8,["label","value"]))],64))),128))]),_:1})]),_:1})]),_:1})):W("",!0)],2)}}});export{Rn as _};
