import{d as k,a as x,z as i,h as p,g as u,o as t,c as s,i as g,e as h,w as b,F as $,l as C,n as f,f as _,b as L,p as D,k as w,j as B,m as z}from"./main-ec0df6a4.js";import{c as S}from"./tags-11dad524.js";import{v}from"./vTooltip-c8fe82a0.js";import{C as R,a as T}from"./ChipsList-64240846.js";import{U as y}from"./UserPic-87c13a4a.js";import{S as N}from"./index-4793d891.js";import{d as O}from"./dayjs-44a66bd3.js";import{i as P}from"./currency-format-0c135c5b.js";const U=["onClick"],oe=k({__name:"DealsListItemTags",props:{tags:{},small:{type:Boolean},disableOverflowSoft:{type:Boolean}},setup(d){const e=d,r=x(null),a=i(()=>r.value?r.value.innerHTML:""),n=S();return(l,o)=>{var c;return(c=e.tags)!=null&&c.length?p((t(),s("div",{key:0,class:f(["deals-item-tags",{"overflow-soft-hide-x":!e.disableOverflowSoft}])},[g("div",{ref_key:"tagsListRef",ref:r,class:f(["deals-item-tags__wrapper",{small:e.small}])},[h(R,{class:"deals-item-tags-chips__list"},{default:b(()=>[(t(!0),s($,null,C(e.tags,m=>(t(),L(T,{key:m.id,class:"custom-m-0"},{default:b(()=>[g("a",{onClick:D(I=>u(n).updateFilterParams({tag:m.id}),["prevent"])},"# "+w(m.name),9,U)]),_:2},1024))),128))]),_:1})],2)],2)),[[u(v),{delay:500,allowHTML:!0,placement:"top-start",content:a.value},void 0,{updated:!0}]]):_("",!0)}}});const F={class:"deals-item-state-reminder"},M={key:0},V={key:1},j={key:2},A={key:3},le=k({__name:"DealsListItemStates",props:{deal:{}},setup(d){const e=d,r={actual:"var(--green)",overdue:"var(--red)",burn:"var(--yellow)",normal:"var(--white)",completed:"var(--white)"},a=i(()=>e.deal.status_id==="OPEN"),n=i(()=>e.deal.reminder_state?r[e.deal.reminder_state]:null),l=i(()=>a.value&&e.deal.reminder_datetime),o=i(()=>a.value&&e.deal.message_unread),c=i(()=>e.deal.source?{name:e.deal.source.name,icon_url:e.deal.source.icon_url}:null);return(m,I)=>(t(),s("div",F,[c.value&&c.value.icon_url?p((t(),s("div",M,[h(y,{size:16,url:c.value.icon_url},null,8,["url"])])),[[u(v),c.value.name,void 0,{left:!0,200:!0}]]):_("",!0),l.value?p((t(),s("span",V,[n.value?(t(),L(y,{key:0,size:16,"bg-color":n.value,"disable-rounded":"","bordered-circle":""},null,8,["bg-color"])):_("",!0)])),[[u(v),m.deal.reminder_title||"",void 0,{right:!0,200:!0}]]):a.value?p((t(),s("span",j,[h(y,{size:16,"fa-icon":"exclamation-triangle","icon-color":"var(--yellow)"})])),[[u(v),m.$t("noRemindersAssigned"),void 0,{right:!0,200:!0}]]):_("",!0),o.value?p((t(),s("span",A,[h(y,{size:16,"fa-icon":"comment-dots","icon-color":"var(--red)"})])),[[u(v),m.$t("unreadMessages"),void 0,{right:!0,500:!0}]]):_("",!0)]))}});const H={class:"deals-item-deal"},E={key:0,class:"tw-mr-2"},G=["onClick"],q={key:0,class:"tw-ml-1"},re=k({__name:"DealsListItemDeal",props:{deal:{},disableTootltip:{type:Boolean},size:{},useLink:{type:Boolean},useUserpic:{type:Boolean}},setup(d){const e=d,r=i(()=>{var a,n;return(n=(a=e.deal)==null?void 0:a.shop_order)==null?void 0:n.id});return(a,n)=>{var o;const l=B("RouterLink");return t(),s("div",H,[e.useUserpic&&((o=e.deal.contact)!=null&&o.userpic)?(t(),s("div",E,[h(y,{url:e.deal.contact.userpic,size:20,"size-userpic":!0},null,8,["url"])])):_("",!0),h(l,{to:{name:"deal",params:{id:e.deal.id}},custom:""},{default:b(({navigate:c})=>[g("div",{class:f(["deals-item-deal__name",{link:e.useLink}]),onClick:m=>e.useLink&&c()},[p((t(),s("span",{class:f(["tw-truncate",{[`tw-text-[${e.size}]`]:e.size}])},[z(w(e.deal.name),1)],2)),[[u(v),e.disableTootltip?null:e.deal.name,void 0,{right:!0,500:!0}]]),r.value?(t(),s("span",q,[h(y,{url:u(N),size:16,"disable-rounded":""},null,8,["url"])])):_("",!0)],10,G)]),_:1},8,["to"])])}}});const J={class:"deals-item-responsible__name"},ne=k({__name:"DealsItemResponsible",props:{user:{},alignRight:{type:Boolean},disableTootltip:{type:Boolean},defaultColor:{type:Boolean}},setup(d){const e=d;return(r,a)=>(t(),s("div",{class:f(["deals-item-responsible",{"tw-justify-end":e.alignRight,"default-color":e.defaultColor}])},[e.user?(t(),s($,{key:0},[h(y,{url:e.user.userpic,size:20,"size-userpic":!0},null,8,["url"]),p((t(),s("div",J,[z(w(e.user.name),1)])),[[u(v),e.disableTootltip?null:e.user.name,void 0,{left:!0,1e3:!0}]])],64)):_("",!0)],2))}});const K=g("i",{class:"fas fa-check-circle text-green"},null,-1),Q=[K],ie=k({__name:"DealsItemAmount",props:{deal:{},size:{},swapIcon:{type:Boolean},bigIcon:{type:Boolean}},setup(d){const e=d,r=i(()=>{const l=e.deal.original_currency_id||e.deal.currency_id,o=e.deal.original_amount||e.deal.amount;return o!==null?P(l,o):""}),a=i(()=>{var l,o;return(l=e.deal.shop_order)!=null&&l.id&&((o=e.deal.shop_order)!=null&&o.paid_date)?e.deal.shop_order.paid_date:null}),n=i(()=>O(a.value).format("L"));return(l,o)=>(t(),s("div",{class:f(["deals-item-amount",{"tw-flex-row-reverse":e.swapIcon}])},[g("span",{class:f(["bold black",{[`tw-text-${e.size}`]:e.size}])},w(r.value),3),a.value?p((t(),s("span",{key:0,class:f(["icon",{"size-18":e.bigIcon}])},Q,2)),[[u(v),`${l.$t("paid")} ${n.value}`,void 0,{right:!0,500:!0}]]):_("",!0)],2))}});export{re as _,le as a,ie as b,ne as c,oe as d};
