import{_ as h}from"./TagsCloud.vue_vue_type_script_setup_true_lang-11da5cd8.js";import{D as v}from"./DropDown-d3d1a4c6.js";import{C as w}from"./CustomColumn-36c752a1.js";import{d as u,t as f,L as _,o as r,c as C,g as p,b as g,av as x,f as D,w as n,e as c,i,k,U as V}from"./main-07d84941.js";import{_ as $}from"./DropdownAddTags.vue_vue_type_script_setup_true_lang-934e2462.js";const T={class:"tw-p-2"},B=u({__name:"DropdownAddTags",props:{contactIds:{}},setup(s){const e=s,{contact:t}=f(_());return(l,a)=>(r(),C("div",T,[p(t)?(r(),g($,{key:0,modelValue:p(t),"onUpdate:modelValue":a[0]||(a[0]=o=>x(t)?t.value=o:null),"entity-type":"contact","entity-ids":e.contactIds},null,8,["modelValue","entity-ids"])):D("",!0)]))}}),I={class:"gray small tw-flex tw-items-center tw-space-x-1 hover:tw-opacity-70"},b=i("i",{class:"fas fa-hashtag"},null,-1),E=u({__name:"ContactInfoTags",props:{contact:{}},setup(s){const e=s,{contact:t}=f(_());async function l(a){var m,d;const{response:o}=await V("crm.tag.remove").post({contact_id:[e.contact.id],tag:[a]});(m=o.value)!=null&&m.ok&&t.value&&t.value.id===e.contact.id&&(t.value.tags=(d=t.value)==null?void 0:d.tags.filter(y=>y.name!==a))}return(a,o)=>(r(),g(w,{space:"none"},{default:n(()=>[c(h,{"entity-type":"contact",tags:e.contact.tags,editable:!0,onDeleteTag:l},null,8,["tags"]),c(v,{"max-height":a.$route.meta.menuItemType==="frame"?"280px":void 0},{body:n(()=>[c(B,{"contact-ids":[e.contact.id]},null,8,["contact-ids"])]),default:n(()=>[i("a",I,[b,i("span",null,k(a.$t("addTag")),1)])]),_:1},8,["max-height"])]),_:1}))}});export{E as _};
