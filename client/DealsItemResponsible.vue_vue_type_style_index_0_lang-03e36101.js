import{d as w,h as z,l as d,az as C,k as p,u,o as t,c as s,a as y,b as f,w as L,F as $,q as I,i as S,e as B,p as g,n as v,j as c,a9 as D,m as R,A as b}from"./main-2290994d.js";import{v as h}from"./vTooltip-95186f83.js";import{a as T,C as N}from"./ChipsList-0fe31c28.js";import{U as k}from"./UserPic-f44f080b.js";import{d as O}from"./index-6e4a059f.js";import{d as P}from"./dayjs-910ec40d.js";import{i as U}from"./currency-format-433ea0a4.js";const F=["onClick"],M={class:"tw-truncate"},re=w({__name:"DealsListItemTags",props:{tags:{},small:{type:Boolean},disableOverflowSoft:{type:Boolean}},setup(_){const e=_,r=z(null),a=d(()=>r.value?r.value.innerHTML:""),n=C();return(l,o)=>{var m;return(m=e.tags)!=null&&m.length?p((t(),s("div",{key:0,class:v(["deals-item-tags",{"overflow-soft-hide-x":!e.disableOverflowSoft}])},[y("div",{ref_key:"tagsListRef",ref:r,class:v(["deals-item-tags__wrapper",{small:e.small}])},[f(N,{class:"deals-item-tags-chips__list"},{default:L(()=>[(t(!0),s($,null,I(e.tags,i=>(t(),S(T,{key:i.id+String(i.color),color:i.color,"bg-color":i.bg_color,class:"small custom-m-0"},{default:L(()=>[y("a",{onClick:B(x=>u(n).updateFilterParams({tag:i.id}),["prevent"])},[y("span",M,g(i.name),1)],8,F)]),_:2},1032,["color","bg-color"]))),128))]),_:1})],2)],2)),[[u(h),{delay:500,allowHTML:!0,placement:"top-start",content:a.value},void 0,{updated:!0}]]):c("",!0)}}});const V={class:"deals-item-state-reminder"},j={key:0},A={key:1},H={key:0,class:"icon size-16"},E={key:2},ne=w({__name:"DealsListItemStates",props:{deal:{}},setup(_){const e=_,r={actual:"var(--green)",overdue:"var(--red)",burn:"var(--yellow)",normal:"var(--white)",completed:"var(--white)"},a=d(()=>e.deal.status_id==="OPEN"),n=d(()=>e.deal.reminder_state?r[e.deal.reminder_state]:""),l=d(()=>a.value&&e.deal.reminder_datetime),o=d(()=>a.value&&e.deal.message_unread),m=d(()=>e.deal.source?{name:e.deal.source.name,icon_url:e.deal.source.icon_url}:null);return(i,x)=>(t(),s("div",V,[m.value&&m.value.icon_url?p((t(),s("div",j,[f(k,{size:16,url:m.value.icon_url},null,8,["url"])])),[[u(h),m.value.name,void 0,{"top-start":!0,300:!0}]]):c("",!0),l.value?p((t(),s("span",A,[n.value?(t(),s("span",H,[y("i",{class:"fas fa-bell",style:D({color:n.value,...e.deal.reminder_state==="normal"||e.deal.reminder_state==="completed"?{stroke:"#aaaaaa",strokeWidth:"30px"}:{}})},null,4)])):c("",!0)])),[[u(h),i.deal.reminder_title||"",void 0,{"top-start":!0,300:!0}]]):c("",!0),o.value?p((t(),s("span",E,[f(k,{size:16,"fa-icon":"comment-dots","icon-color":"var(--red)"})])),[[u(h),i.$t("unreadMessages"),void 0,{"top-start":!0,300:!0}]]):c("",!0)]))}});const q={class:"deals-item-deal"},G={key:0,class:"tw-mr-2"},W=["onClick"],J={key:0,class:"tw-ml-1"},K={key:1,class:"gray small tw-font-normal tw-ml-1"},ie=w({__name:"DealsListItemDeal",props:{deal:{},disableTootltip:{type:Boolean},textSize:{},useLink:{type:Boolean},useUserpic:{type:Boolean},showId:{type:Boolean}},setup(_){const e=_,r=d(()=>{var a,n;return(n=(a=e.deal)==null?void 0:a.shop_order)==null?void 0:n.id});return(a,n)=>{var o;const l=R("RouterLink");return t(),s("div",q,[e.useUserpic&&((o=e.deal.contact)!=null&&o.userpic)?p((t(),s("div",G,[f(k,{url:e.deal.contact.userpic,size:20,"size-userpic":!0},null,8,["url"])])),[[u(h),e.deal.contact.name,void 0,{"top-start":!0,500:!0}]]):c("",!0),f(l,{to:{name:"deal",params:{id:e.deal.id}},custom:""},{default:L(({navigate:m})=>[y("div",{class:v(["deals-item-deal__name",{link:e.useLink}]),onClick:i=>e.useLink&&m()},[p((t(),s("span",{class:v(["tw-truncate",{[`tw-text-[${e.textSize}]`]:e.textSize}])},[b(g(e.deal.name),1)],2)),[[u(h),e.disableTootltip?null:e.deal.name,void 0,{"top-start":!0,500:!0}]]),r.value?(t(),s("span",J,[f(k,{url:u(O),size:16,"disable-rounded":""},null,8,["url"])])):c("",!0),e.showId?(t(),s("span",K," id: "+g(e.deal.id),1)):c("",!0)],10,W)]),_:1},8,["to"])])}}});const Q=y("i",{class:"fas fa-check-circle text-green"},null,-1),X=[Q],de=w({__name:"DealsListItemAmount",props:{deal:{},size:{},rowReverse:{type:Boolean},largeIcon:{type:Boolean}},setup(_){const e=_,r=d(()=>{const l=e.deal.original_currency_id||e.deal.currency_id,o=e.deal.original_amount||e.deal.amount;return o!==null?U(l,o):""}),a=d(()=>{var l,o;return(l=e.deal.shop_order)!=null&&l.id&&((o=e.deal.shop_order)!=null&&o.paid_date)?e.deal.shop_order.paid_date:null}),n=d(()=>P(a.value).format("L"));return(l,o)=>(t(),s("div",{class:v(["deals-item-amount",{"tw-flex-row-reverse":e.rowReverse}])},[y("span",{class:v(["bold black",{[`tw-text-${e.size}`]:e.size}])},g(r.value),3),a.value?p((t(),s("span",{key:0,class:v(["icon",{"size-18":e.largeIcon}])},X,2)),[[u(h),`${l.$t("paid")} ${n.value}`,void 0,{right:!0,500:!0}]]):c("",!0)],2))}});const Y={class:"deals-item-responsible__name"},ce=w({__name:"DealsItemResponsible",props:{user:{},alignRight:{type:Boolean},disableTootltip:{type:Boolean},defaultColor:{type:Boolean}},setup(_){const e=_;return(r,a)=>(t(),s("div",{class:v(["deals-item-responsible",{"tw-justify-end":e.alignRight,"default-color":e.defaultColor}])},[e.user?(t(),s($,{key:0},[f(k,{url:e.user.userpic,size:20,"size-userpic":!0},null,8,["url"]),p((t(),s("div",Y,[b(g(e.user.name),1)])),[[u(h),e.disableTootltip?null:e.user.name,void 0,{"top-start":!0,500:!0}]])],64)):c("",!0)],2))}});export{ie as _,ne as a,de as b,ce as c,re as d};
