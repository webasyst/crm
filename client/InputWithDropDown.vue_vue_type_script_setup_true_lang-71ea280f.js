import{d as B,a as f,A as g,P as F,b5 as M,o as n,b as v,w as u,c as p,e as h,F as k,l as C,f as x,i as r,S as E,ag as m,n as N,p as w,r as b,ab as z}from"./main-07d84941.js";import{M as K,_ as L}from"./MenuList-1948b71a.js";import{D as P}from"./DropDown-d3d1a4c6.js";import{C as D}from"./CustomColumn-36c752a1.js";const R=["placeholder"],A=["onClick"],O={class:"tw-flex-auto tw-overflow-hidden"},T=["onClick"],W=r("i",{class:"fas fa-trash-alt gray"},null,-1),j=[W],U=B({__name:"InputWithDropDown",props:{items:{},value:{},textValue:{},isMultiple:{type:Boolean},placeholder:{},onEnter:{type:Function},onItemSelect:{type:Function}},emits:["input","update","focus"],setup(I,{emit:c}){const e=I,_=f(),s=f(!1),o=f(new Set(e.value)),i=g(()=>z([null,...e.items])),S=g(()=>e.textValue?"value":"");F(o,a=>{c("update",[...a])},{deep:!0}),M(_,()=>{s.value=!1});function V(a){c("input",a.target.value),s.value=!0}function $(a){c("focus",a.target.value),s.value=!0}function y(a,t){if(a){if(e.onItemSelect){e.onItemSelect(a),s.value=!1;return}e.isMultiple||o.value.clear(),o.value.add(a),s.value=!1,t&&t.target.blur()}else e.onEnter&&t&&t.target.value&&(e.onEnter(t.target.value),t.target.blur(),s.value=!1)}return(a,t)=>(n(),v(D,{space:"4"},{default:u(()=>[e.isMultiple||!o.value.size?(n(),p("div",{key:0,ref_key:"inputRef",ref:_,class:"tw-w-full"},[h(P,{open:s.value,"disable-click-outside":!0,"prevent-toggler":!0,"max-height":"350px"},{body:u(()=>[e.items.length?(n(),v(K,{key:0},{default:u(()=>[(n(!0),p(k,null,C(e.items,(l,d)=>(n(),v(L,{key:d},{default:u(()=>[r("a",{class:N({"tw-bg-waBackground":i.value.index.value===d+1}),onClick:w(q=>y(l),["prevent"])},[b(a.$slots,"item",{item:l})],10,A)]),_:2},1024))),128))]),_:3})):x("",!0)]),default:u(()=>[r("input",E({type:"text",placeholder:e.placeholder,[S.value||""]:e.textValue,class:"tw-w-full",onInput:V,onKeyup:t[0]||(t[0]=m(l=>{y(i.value.state.value,l)},["enter"])),onKeydown:[t[1]||(t[1]=m(w(l=>i.value.prev(),["prevent"]),["up"])),t[2]||(t[2]=m(w(l=>i.value.next(),["prevent"]),["down"]))],onFocus:$}),null,16,R)]),_:3},8,["open"])],512)):x("",!0),h(D,{space:"2"},{default:u(()=>[(n(!0),p(k,null,C(o.value,l=>(n(),p("div",{key:l.id,class:"tw-flex tw-items-center tw-space-x-2"},[r("div",O,[b(a.$slots,"listItem",{item:l})]),r("a",{onClick:d=>o.value.delete(l)},j,8,T)]))),128))]),_:3})]),_:3}))}});export{U as _};
