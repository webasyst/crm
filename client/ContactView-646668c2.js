import{d as B,t as w,L as P,M as q,l as g,N as D,o as s,c as k,a as e,F as L,u as a,i as f,j as S,b as o,n as F,r as M,B as _,_ as N,y as R,m as U,w as r,e as A,p as E,k as b,v as h,O as z,P as H,s as j,x as K}from"./main-82f77a11.js";import{_ as O}from"./ViewWithSidebar.vue_vue_type_style_index_0_lang-4094c7ab.js";import{u as Q}from"./FormSegmentUpdate.vue_vue_type_script_setup_true_lang-08fcfca6.js";import I from"./IframeView-bb245ae6.js";import{_ as G,T as J,a as y}from"./TabList-122a5829.js";import{_ as W}from"./ContactsList.vue_vue_type_script_setup_true_lang-9ed1e542.js";import{_ as X}from"./ErrorDummy.vue_vue_type_script_setup_true_lang-b997d5cb.js";import{_ as Y}from"./ContactInfo.vue_vue_type_script_setup_true_lang-a8a5e019.js";import"./CustomColumn-096f9d5b.js";import"./FieldCheckbox-c89d2635.js";import"./InputWithContacts.vue_vue_type_script_setup_true_lang-cc1fd72c.js";import"./UserPic-92d000dd.js";import"./DropDown-79d42973.js";import"./index-0a4f4028.js";import"./validation-102b744f.js";import"./iframeObserver-4d483321.js";import"./index-ca686fb1.js";import"./DropdownModal-9ee3af32.js";import"./object_hash-5ce75402.js";import"./useSortable-19b28137.js";import"./SkeletonList-40d3d5be.js";import"./LazyLoadingWithProgress.vue_vue_type_script_setup_true_lang-4ac80a88.js";import"./EmptyList-1155962a.js";import"./ContactsListItems-d2f44033.js";import"./ChipsList-bf475e53.js";import"./ContactsListItemAction.vue_vue_type_style_index_0_lang-7dcd1cab.js";import"./dayjs-82f63efd.js";import"./WaDialogOpener.vue_vue_type_script_setup_true_lang-04eb8058.js";import"./DropdownIncludeSegment.vue_vue_type_script_setup_true_lang-627afe9c.js";import"./WaSpinner-dc330232.js";import"./InputWithUsers.vue_vue_type_script_setup_true_lang-89800614.js";import"./FormAddTag.vue_vue_type_script_setup_true_lang-4fc24e7a.js";import"./DropdownAddTags.vue_vue_type_script_setup_true_lang-0f96d531.js";import"./FormContactUpdate.vue_vue_type_script_setup_true_lang-ff1e46e6.js";import"./fields-b3506619.js";import"./FieldSelect-342147aa.js";import"./FormContactUpdateInfo.vue_vue_type_script_setup_true_lang-7139646c.js";import"./SortableList.vue_vue_type_script_setup_true_lang-70c99b80.js";import"./ButtonSubmit-93a0fe68.js";import"./imageUrlToBase64-bf4bcddf.js";import"./TagsCloud.vue_vue_type_script_setup_true_lang-5f9b5876.js";import"./emit-75ad975c.js";import"./CustomField-393392e0.js";import"./TextAreaAutoresize-77473b39.js";import"./recentContacts-19c74dc7.js";import"./ButtonFavorites.vue_vue_type_script_setup_true_lang-1187ec6d.js";const Z={class:"tw-flex tw-flex-col tw-min-h-full md:tw-border-0 md:tw-border-solid md:tw-border-l md:tw-border-l-waBorder"},x=B({__name:"ContactTabs",props:{contactId:{}},setup(i){const n=i,{contactId:C,tabs:v,isFetching:l}=w(P()),{isFetching:u,error:m,statusCode:t}=w(q()),d=g(()=>l.value||u.value),p=g(()=>[403,404].includes(Number(t.value))&&m.value?m.value:null);return D(()=>{C.value=n.contactId}),(c,$)=>(s(),k("div",Z,[e("div",{class:F([{"mobile:!tw-hidden":p.value},"tabs-container bordered-bottom"])},[p.value?S("",!0):(s(),k(L,{key:0},[a(_).webView?S("",!0):(s(),f(G,{key:0,"entity-type":"contact","entity-id":n.contactId,class:"tw-ml-4 tw-mr-3"},null,8,["entity-id"])),o(J,{"entity-type":"contact",value:a(v),"is-fetching":d.value},null,8,["value","is-fetching"])],64))],2),e("div",{class:F(["tw-relative tw-flex-auto tw-bg-waBlank tw-min-h-[340px]",{"tw-p-4 tw-pb-0":["contactHistoryTab","contactInvoicesTab"].includes(String(c.$route.name))}])},[p.value?(s(),f(X,{key:0,code:a(t),message:p.value},null,8,["code","message"])):M(c.$slots,"default",{key:1},void 0,!0)],2)]))}});const tt=N(x,[["__scopeId","data-v-9eb117fc"]]),T=i=>(j("data-v-b0798280"),i=i(),K(),i),et={key:0,class:"sidebarHeader"},at={class:"tw-overflow-hidden"},ot=T(()=>e("i",{class:"fas fa-arrow-left"},null,-1)),st={class:"tw-truncate"},rt=T(()=>e("i",{class:"fas fa-list-ul black"},null,-1)),it=[rt],nt=T(()=>e("i",{class:"fas fa-times black"},null,-1)),ct=[nt],lt={class:"sidebarContainer"},ut={class:"sidebarList"},mt={class:"sidebarInfo"},dt=B({__name:"ContactView",props:{contactId:{}},setup(i){const n=i,C=g(()=>({context_contact_id:n.contactId})),{previousFetchParams:v}=w(R()),{showSidebar:l}=w(Q()),{contact:u}=w(q()),m=g(()=>{var t;return(t=u.value)!=null&&t.main&&Array.isArray(u.value.main.email)&&!u.value.main.email.length?"&noemail=1":""});return(t,d)=>{const p=U("RouterView");return s(),f(O,null,{sidebar:r(()=>{var c;return[a(_).webView?S("",!0):(s(),k("div",et,[e("div",at,[e("a",{class:"tw-flex tw-space-x-3 tw-items-center black",onClick:d[0]||(d[0]=A(()=>{var $,V;t.$router.push(`/contact/${((V=($=a(v))==null?void 0:$.hash)==null?void 0:V.replace("import/","import/result/").replace("crmSearch/","search/result/"))??""}`)},["prevent"]))},[ot,e("span",st,E((c=a(v))!=null&&c.hash?a(v).title:t.$t("allContacts")),1)])]),e("button",{class:"circle transparent",onClick:d[1]||(d[1]=$=>l.value=!a(l))},[b(e("span",null,it,512),[[h,!a(l)]]),b(e("span",null,ct,512),[[h,a(l)]])])])),e("div",lt,[e("div",ut,[o(y,null,{default:r(()=>[o(W,{"fetch-params":C.value,"hide-header":!0,"active-contact-id":n.contactId},null,8,["fetch-params","active-contact-id"])]),_:1})]),e("div",mt,[o(Y,{"contact-id":n.contactId},null,8,["contact-id"])])])]}),default:r(()=>[o(tt,{"contact-id":n.contactId},{default:r(()=>[o(p,null,{default:r(({Component:c})=>[(s(),f(z,null,[(s(),f(H(c),{key:t.$route.fullPath}))],1024)),b(e("div",null,[o(y,null,{default:r(()=>[o(I,{src:`${a(_).baseUrl}call/?iframe=1&contact=${t.$route.params.id}${t.$route.query.focus?"&focus=1":""}`},null,8,["src"])]),_:1})],512),[[h,t.$route.name==="contactCallsTab"]]),b(e("div",null,[o(y,null,{default:r(()=>[(s(),f(I,{key:String(t.$route.query.conversationId)+m.value,"is-pre-fetching":!a(u),src:t.$route.query.conversationId?`${a(_).baseUrl}message/conversation/${t.$route.query.conversationId}/?iframe=1&contact=${t.$route.params.id}${m.value}`:`${a(_).baseUrl}message/?iframe=1&contact=${t.$route.params.id}${t.$route.query.focus?"&focus=1":""}${m.value}`,"disable-resize":!0,"fixed-height-mobile":!0},null,8,["is-pre-fetching","src"]))]),_:1})],512),[[h,t.$route.name==="contactMessagesTab"]]),b(e("div",null,[o(y,null,{default:r(()=>[o(I,{src:`${a(_).baseUrl}reminder/all/?iframe=1&contact=${t.$route.params.id}${t.$route.query.focus?"&focus=1":""}`},null,8,["src"])]),_:1})],512),[[h,t.$route.name==="contactRemindersTab"]])]),_:1})]),_:1},8,["contact-id"])]),_:1})}}});const re=N(dt,[["__scopeId","data-v-b0798280"]]);export{re as default};
