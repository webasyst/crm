import{_ as oe}from"./ViewWithSidebar.vue_vue_type_style_index_0_lang-1ba1bf17.js";import{_ as D,o as e,c as n,r as M,d as S,u as ae,a as F,b as f,w as l,e as u,f as v,n as I,g as i,h as j,v as ie,i as t,t as C,j as N,k as m,F as g,l as R,m as T,p as L,q as E,s as G,x as ce,y as J,z as Q,A,B as re,C as le,D as _e}from"./main-512a5cdd.js";import{u as de}from"./recentContacts-971ea6fa.js";import{U as B}from"./UserPic-2094e1a0.js";import{M as W,_ as X}from"./MenuList-bac784e3.js";import{C as P}from"./CustomColumn-351ad915.js";import{u as ue,_ as pe}from"./FormSegmentUpdate.vue_vue_type_script_setup_true_lang-911844b1.js";import{_ as me}from"./InputWithContacts.vue_vue_type_script_setup_true_lang-3d5e0b02.js";import{_ as Y}from"./WaDialogOpener.vue_vue_type_script_setup_true_lang-b56346dd.js";import{_ as fe,u as he}from"./FormContactUpdate.vue_vue_type_script_setup_true_lang-8609aaf0.js";import{u as $e}from"./tags-ec5b68fa.js";import{v as ge}from"./vTooltip-c8fe82a0.js";import{_ as ve}from"./TagsCloud.vue_vue_type_script_setup_true_lang-24d3dd10.js";import"./FieldString-0d7a3814.js";import"./FieldCheckbox-a8d5da5b.js";import"./WaDialog-079c5577.js";import"./validation-2131e443.js";import"./InputWithUsers.vue_vue_type_script_setup_true_lang-e9424cff.js";import"./DropDown-f7af334e.js";import"./index-0b315a89.js";import"./SortableList.vue_vue_type_script_setup_true_lang-0632140e.js";import"./useSortable-bb0b2f8f.js";import"./FieldSelect-46bbc3cb.js";import"./fields-536d59a3.js";import"./dialog-e5c60953.js";import"./helpers-c15b26e3.js";import"./ChipsList-784e50f6.js";import"./emit-243cfb93.js";const ye={},ke={class:"heading"};function Ce(_,o){return e(),n("div",ke,[M(_.$slots,"default",{},void 0,!0)])}const Se=D(ye,[["render",Ce],["__scopeId","data-v-e4f563ea"]]),we={key:0,class:"caret tw-w-3 tw-flex-none"},be=t("i",{class:"fas fa-caret-right"},null,-1),xe=[be],Z=S({__name:"AccordionSidebar",props:{showCaret:{type:Boolean},openOnInitial:{type:Boolean},disabled:{type:Boolean},storageKey:{}},setup(_){const o=_,a=o.storageKey?ae(`sidebar-accordions-${o.storageKey}`,o.openOnInitial):F(o.openOnInitial);return(d,c)=>(e(),f(P,{space:"2"},{default:l(()=>[u(Se,{class:I({open:i(a)}),onClick:c[0]||(c[0]=()=>{o.disabled||(a.value=!i(a))})},{default:l(()=>[o.showCaret?(e(),n("span",we,xe)):v("",!0),M(d.$slots,"header")]),_:3},8,["class"]),j(t("div",null,[M(d.$slots,"default")],512),[[ie,i(a)]])]),_:3}))}});const K=_=>(E("data-v-9a18827c"),_=_(),G(),_),Re={class:"tw-px-4"},Ie={key:0,class:"skeleton"},Ve={key:0,class:"tw-pl-4 small gray"},Be=["title"],Le=["onClick"],Ne={key:0},ze=K(()=>t("i",{class:"fas fa-spinner text-yellow tw-animate-spin"},null,-1)),Ae=[ze],Me={key:1},Te=K(()=>t("i",{class:"fas fa-star text-yellow"},null,-1)),De=[Te],Fe={key:2},Pe=K(()=>t("i",{class:"far fa-star text-light-gray"},null,-1)),Ke=[Pe],Oe=S({__name:"ContactsSidebarRecent",setup(_){const o=de(),{pinned:a,recent:d,isFetching:c,error:s,fetchingIds:y,pin:k}=C(o);return o.refetch(),($,O)=>{const V=N("RouterLink");return e(),f(Z,{"show-caret":!0,"open-on-initial":!0,"storage-key":"recent"},{header:l(()=>[t("span",null,m($.$t("recentContacts")),1)]),default:l(()=>[t("div",Re,[i(c)?(e(),n("div",Ie,[(e(),n(g,null,R(8,x=>t("div",{ref_for:!0,ref:"lineRef",key:x,class:"skeleton-line"})),64))])):i(s)?(e(),n(g,{key:1},[T(m(i(s)),1)],64)):(e(),n(g,{key:2},[![...i(a),...i(d)].length&&!i(c)?(e(),n("div",Ve,m($.$t("emptyList")),1)):v("",!0),u(W,null,{default:l(()=>[(e(!0),n(g,null,R([i(a),i(d)],(x,w)=>(e(),n(g,{key:w},[(e(!0),n(g,null,R(x,h=>(e(),f(X,{key:h.id,class:"rounded selected"},{default:l(()=>[u(V,{to:{name:"contact",params:{id:h.id}},class:I($.$constant.parentAppDisableRouterClass)},{default:l(()=>[u(B,{url:h.userpic,size:20},null,8,["url"]),t("div",{class:"tw-flex-auto tw-truncate",title:h.name},m(h.name),9,Be),t("span",{class:"count",onClick:L(H=>i(k)(h.id,!!w),["stop","prevent"])},[i(y).has(h.id)?(e(),n("span",Ne,Ae)):v("",!0),!i(y).has(h.id)&&w===0?(e(),n("span",Me,De)):v("",!0),!i(y).has(h.id)&&w===1?(e(),n("span",Fe,Ke)):v("",!0)],8,Le)]),_:2},1032,["to","class"])]),_:2},1024))),128))],64))),128))]),_:1})],64))])]),_:1})}}});const He=D(Oe,[["__scopeId","data-v-9a18827c"]]),Ue={class:"tw-px-4"},je={class:"tw-flex tw-space-x-2 tw-items-center tw-w-full"},Ee={class:"tw-flex-auto"},Ge=t("i",{class:"fas fa-filter gray"},null,-1),Je=[Ge],Qe={class:"tw-flex-none"},We=["onClick","onVnodeMounted"],Xe=t("i",{class:"fas fa-user-plus"},null,-1),Ye=[Xe],Ze={class:"tw-flex-none md:tw-hidden"},qe=t("i",{class:"fas fa-sliders-h black"},null,-1),et=[qe],tt=S({__name:"ContactsSidebarFilter",setup(_){const{showSidebar:o}=C(ue()),a=F("");return(d,c)=>(e(),n("div",Ue,[t("div",je,[t("div",Ee,[u(me,{"text-value":a.value,"on-enter":s=>{s&&d.$router.push({name:"search",params:{id:`contact_info.${s.includes("@")?"email":/^[+\-0-9() ]+$/.test(s)?"phone":"name.name"}*=${s}`}})},"on-item-select":s=>{d.$router.push({name:"contact",params:{id:s.id}})},onInput:c[0]||(c[0]=s=>a.value=s)},null,8,["text-value","on-enter","on-item-select"])]),t("div",{class:"tw-flex-none icon tw-cursor-pointer",onClick:c[1]||(c[1]=s=>d.$router.push({name:"detailedSearch"}))},Je),t("div",Qe,[u(Y,{component:fe},{default:l(({open:s})=>[t("button",{class:"circle",onClick:L(s,["prevent"]),onVnodeMounted:y=>d.$route.path==="/contact/new/"&&s()},Ye,8,We)]),_:1})]),t("div",Ze,[t("button",{class:"circle transparent",onClick:c[2]||(c[2]=L(s=>o.value=!i(o),["prevent"]))},et)])])]))}}),st=_=>(E("data-v-12cf976d"),_=_(),G(),_),nt={class:"bricks"},ot=["onClick"],at={class:"icon"},it=["src","alt"],ct={class:"count"},rt=["onClick"],lt=st(()=>t("span",{class:"icon"},[t("i",{class:"fas fa-users"})],-1)),_t={class:"count"},dt=S({__name:"ContactsSidebarBricks",setup(_){const{allContactsTotal:o}=C(ce()),{responsibles:a}=C(J()),d=Q(()=>{var c;return((c=a.value.find(s=>s.responsible.id===A.user.id))==null?void 0:c.count)??0});return(c,s)=>{const y=N("RouterLink");return e(),n("div",nt,[u(y,{to:{name:"myContacts"},custom:""},{default:l(({isExactActive:k,navigate:$})=>[t("div",{class:I(["brick",{selected:k}]),onClick:$},[t("span",at,[t("img",{src:i(A).user.userpic,alt:i(A).user.name,class:"userpic"},null,8,it)]),t("span",ct,m(d.value),1),T(" "+m(c.$t("myContacts")),1)],10,ot)]),_:1}),u(y,{to:{name:"contacts"},custom:""},{default:l(({isExactActive:k,navigate:$})=>[t("div",{class:I(["brick",{selected:k}]),onClick:$},[lt,t("span",_t,m(i(o)),1),T(" "+m(c.$t("allContacts")),1)],10,rt)]),_:1})])}}});const ut=D(dt,[["__scopeId","data-v-12cf976d"]]),pt={key:0,class:"count"},mt=["onClick"],ft=t("i",{class:"fas fa-plus-circle"},null,-1),ht=[ft],$t={key:0,class:"tw-mx-4"},gt={key:0,class:"tw-pl-4 small gray"},vt={key:0,class:"tw-pl-8 small gray"},yt=["href","onClick"],kt={class:"count"},Ct={class:"tw-truncate"},U=S({__name:"ContactsSidebarSegments",props:{only:{},except:{}},setup(_){const o=_,{t:a}=re(),d=le(),{sharedSegment:c,archivedSegment:s,mySegment:y,isFetching:k}=C(d);d.refetch();const $=he(),{vaults:O}=C($);$.refetch();const V=J(),{responsibles:x}=C(V);V.refetch();const w=Q(()=>x.value.map(b=>({...b,...b.responsible}))),h=$e(),{tags:H}=C(h);h.refetch();const z=F([{id:"mySegment",name:a("mySegments"),items:y,loading:"segments",routeName:"segment",showPlus:!0},{id:"sharedSegment",name:a("sharedSegments"),items:c,loading:"segments",routeName:"segment",showPlus:!0},{id:"archivedSegment",name:a("archivedSegments"),items:s,loading:"segments",routeName:"segment",showCounter:!0},{id:"tags",name:a("tags"),items:H,loading:"tags",routeName:"tag"},{id:"vaults",name:a("vaults"),items:O,loading:"vaults",routeName:"vault"},{id:"responsibles",name:a("responsibles"),items:w,loading:"responsibles",routeName:"responsible"}]);return(b,wt)=>{const q=N("RouterLink");return e(),f(P,{space:"4"},{default:l(()=>[(e(!0),n(g,null,R(o.only?z.value.filter(r=>r.id===o.only):o.except?z.value.filter(r=>r.id!==o.except):z.value,(r,ee)=>(e(),n(g,{key:r.id},[r.id!=="archivedSegment"||r.items.length?(e(),f(Z,{key:0,"show-caret":!0,"open-on-initial":!!r.items.length&&ee===0,"storage-key":r.id},{header:l(()=>[t("span",null,m(r.name),1),r.showCounter?(e(),n("span",pt,m(r.items.length||""),1)):v("",!0),r.showPlus?(e(),f(Y,{key:1,component:pe,"component-props":{initialShared:r.id==="mySegment"?"0":"1"}},{default:l(({open:p})=>[t("span",{class:"icon",onClick:L(p,["stop"])},ht,8,mt)]),_:2},1032,["component-props"])):v("",!0)]),default:l(()=>[r.id==="tags"?(e(),n("div",$t,[!r.items.length&&!i(k)?(e(),n("div",gt,m(b.$t("emptyList")),1)):v("",!0),u(ve,{"entity-type":"contact",tags:r.items},null,8,["tags"])])):(e(),n(g,{key:1},[!r.items.length&&!i(k)?(e(),n("div",vt,m(b.$t("emptyList")),1)):(e(),f(W,{key:1},{default:l(()=>[(e(!0),n(g,null,R(r.items,p=>(e(),f(q,{key:p.id,to:{name:r.routeName,params:{id:p.id}},custom:""},{default:l(({isActive:te,href:se,navigate:ne})=>[u(X,{selected:te},{default:l(()=>[j((e(),n("a",{href:se,class:I(b.$constant.parentAppDisableRouterClass),onClick:ne},["icon"in p?(e(),f(B,{key:0,size:20,url:p.icon_path,"fa-icon":p.icon,"disable-rounded":!0},null,8,["url","fa-icon"])):"responsible"in p?(e(),f(B,{key:1,size:20,url:p.responsible.userpic},null,8,["url"])):"color"in p?(e(),f(B,{key:2,size:20,"fa-icon":"circle","icon-color":p.color},null,8,["icon-color"])):v("",!0),t("span",kt,m(p.count),1),t("span",Ct,m(p.name),1)],10,yt)),[[i(ge),p.name,void 0,{right:!0,700:!0}]])]),_:2},1032,["selected"])]),_:2},1032,["to"]))),128))]),_:2},1024))],64))]),_:2},1032,["open-on-initial","storage-key"])):v("",!0)],64))),128))]),_:1})}}}),St=S({__name:"ContactsSidebar",setup(_){return(o,a)=>(e(),f(P,{space:"4",class:"tw-my-4"},{default:l(()=>[u(tt),u(ut),u(U,{only:"mySegment"}),u(He),u(U,{except:"mySegment"})]),_:1}))}}),qt=S({__name:"ContactsView",setup(_){return(o,a)=>{const d=N("RouterView");return e(),f(oe,{slidable:!0,onVnodeMounted:a[0]||(a[0]=c=>{var s;return(s=i(_e))==null?void 0:s.setTitle(o.$t("contacts"))})},{sidebar:l(()=>[u(St)]),default:l(()=>[u(d)]),_:1},512)}}});export{qt as default};
