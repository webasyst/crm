import{v as $}from"./vTooltip-95186f83.js";import{d as k,k as I,u as r,o as a,c as s,n as h,j as i,s as T,x as V,a as n,_ as F,i as C,w as W,b as D,a1 as z,a7 as E,F as f,a9 as M,p,A as v,B as c,S as U,r as N}from"./main-2290994d.js";import H from"./IframeView-4c556b87.js";const L=o=>(T("data-v-c3165166"),o=o(),V(),o),O=L(()=>n("i",{class:"fas fa-question-circle"},null,-1)),j=[O],P=k({__name:"TooltipIcon",props:{content:{},placement:{},triggerClick:{type:Boolean},delay:{},interactive:{type:Boolean}},setup(o){const e=o;return(u,m)=>e.content?I((a(),s("span",{key:0,class:h(["icon",{"tw-cursor-pointer":e.triggerClick}])},j,2)),[[r($),{...e.placement?{placement:e.placement}:{},trigger:e.triggerClick?"click":"mouseenter",delay:e.delay||0,interactive:!!e.interactive,allowHTML:!0,content:e.content}]]):i("",!0)}});const R=F(P,[["__scopeId","data-v-c3165166"]]),q=k({__name:"IframeViewInDialog",props:{src:{},hideCloseIcon:{type:Boolean}},setup(o){const e=o;return(u,m)=>(a(),C(z,{"hide-buttons":!0,"hide-close-icon":e.hideCloseIcon},{default:W(({close:w})=>[D(H,{src:e.src,"static-position":!0,"force-resize":!0,onClose:w},null,8,["src","onClose"])]),_:1},8,["hide-close-icon"]))}}),G={class:"tw-flex tw-items-baseline tw-space-x-2"},J={class:"tw-flex tw-items-baseline tw-space-x-2 tw-max-w-full"},K={class:"icon size-14"},Q=["href"],X={key:1},Y=n("span",{class:"icon size-14"},[n("i",{class:"fas fa-map-marker-alt gray"})],-1),Z={class:"break-words"},ee={class:"custom-mr-4"},te={key:0,class:"hint custom-mr-4"},ae=["href"],se=n("i",{class:"fas fa-angle-right"},null,-1),oe={class:"icon size-14"},ne={key:0,class:"fas fa-envelope tw-text-waAccent"},le={key:1,class:"fas fa-phone-alt tw-text-waAccent"},ce={key:2,class:"fas fa-link tw-text-waAccent"},ie=["title"],re=n("i",{class:"fas fa-check-circle tw-text-waAccent",style:{color:"rgb(52, 199, 89)"}},null,-1),ue=[re],pe=["href"],de=n("i",{class:"fas fa-sms"},null,-1),me=[de],_e=["title"],fe=k({__name:"CustomFieldIm",props:{value:{},type:{},contactId:{}},setup(o){const e=o,u=E(),m=u.meta.menuItemType==="deals"&&typeof u.params.id=="string"?u.params.id:null;function w(t,l,d){e.contactId&&(c.can_init_call&&l==="phone"&&g(t,`${c.baseUrl}?module=call&action=initContactDialog&contact_id=${e.contactId}&phone=${d}&iframe=1`),c.is_email_configured&&l==="email"&&g(t,`${c.baseUrl}?module=message&action=writeNewDialog&contact_id=${e.contactId}&email=${d}${m?`&deal_id=${m}`:""}&iframe=1`))}function A(t,l){g(t,`${c.baseUrl}?module=message&action=writeSMSNewDialog&contact_id=${e.contactId}&phone=${l}&iframe=1`)}function g(t,l){t.preventDefault(),U(q,{src:l,hideCloseIcon:u.meta.isWidgetMode}).show()}const _={im:{whatsapp:{icon:"fab fa-whatsapp",color:"#29C54D",link:"https://wa.me/{name}"},telegram:{icon:"fab fa-telegram-plane",color:"#279FDA",link:"https://t.me/{name}"},skype:{icon:"fab fa-skype",color:"#28A8EA",link:"skype:{name}?chat"},viber:{icon:"fab fa-viber",color:"#7360F4",link:"viber://chat?number={name}"},facebook:{icon:"fab fa-facebook-messenger",color:"#0084FF",link:"https://m.me/{name}"},discord:{icon:"fab fa-discord",color:"#404EED",link:""},slack:{icon:"fab fa-slack",color:"#A436AB",link:""},yahoo:{icon:"fab fa-yahoo",color:"#581cc7",link:""},custom:{icon:"fas fa-comments text-purple",color:"",link:""}},socialnetwork:{facebook:{icon:"fab fa-facebook-f",color:"#1877F2",link:"http://facebook.com/{name}"},twitter:{icon:"fab fa-twitter",color:"#29A6F3",link:"http://twitter.com/{name}"},linkedin:{icon:"fab fa-linkedin-in",color:"#0078B6",link:""},vkontakte:{icon:"fab fa-vk",color:"#2787F5",link:"http://vk.com/{name}"},instagram:{icon:"fab fa-instagram",color:"#FF2565",link:""},custom:{icon:"fas fa-comments text-purple",color:"",link:""}}};function B(t,l,d){try{const y=new URL(t);return t}catch{return d==="telegram"&&(t=t.startsWith("@")?t.slice(1):t),_[l][d].link.replace("{name}",t)}}return(t,l)=>{var d,y,x,S;return a(),s("div",G,[n("div",J,[["im","socialnetwork"].includes(e.type)?(a(),s(f,{key:0},[n("span",K,[n("i",{class:h(((d=_[e.type][e.value.ext])==null?void 0:d.icon)||_[e.type].custom.icon),style:M(`color: ${((y=_[e.type][e.value.ext])==null?void 0:y.color)||_[e.type].custom.color};`)},null,6)]),(x=_[e.type][e.value.ext])!=null&&x.link?(a(),s("a",{key:0,href:B(e.value.data,e.type,e.value.ext),class:"tw-truncate",target:"_blank"},p(e.value.value),9,Q)):(a(),s("span",X,p(e.value.value),1))],64)):e.type==="address"?(a(),s(f,{key:1},[Y,n("div",Z,[n("span",ee,p(e.value.value),1),e.value.ext_value?(a(),s("span",te,p(e.value.ext_value),1)):i("",!0),e.value.map_url?(a(),s("a",{key:1,href:e.value.map_url,target:"_blank",class:"nowrap"},[v(p(t.$t("map"))+" ",1),se],8,ae)):i("",!0)])],64)):["phone","email","url"].includes(e.type)&&((S=e.value.value)!=null&&S.trim())?(a(),s(f,{key:2},[n("span",oe,[e.type==="email"?(a(),s("i",ne)):i("",!0),e.type==="phone"?(a(),s("i",le)):i("",!0),e.type==="url"?(a(),s("i",ce)):i("",!0)]),e.value.status==="confirmed"?(a(),s("span",{key:0,class:"icon size-12 tw-absolute -tw-translate-y-2",title:t.$t("confirmed")},ue,8,ie)):i("",!0),I((a(),s("a",{href:`${e.type==="url"?"":e.type==="email"?"mailto:":"tel:"}${e.value.data}`,class:"tw-truncate",onClick:l[0]||(l[0]=b=>!r(c).webView&&(t.$route.meta.menuItemType!=="frame"||t.$route.meta.isWidgetMode||e.type==="phone")?w(b,e.type,e.value.data):null)},[v(p(e.value.value),1)],8,pe)),[[r($),e.type==="email"?r(c).is_email_configured?t.$t("sendEmail"):{interactiveContent:t.$t("settingsEmailIfDisableHint",{link:`<a href='${r(c).backendUrl}crm/settings/message-sources/email/' class='semibold nowrap' target='_blank'>${t.$t("settingsEmail")} <i class='fas fa-external-link-alt fa-sm'></i></a>`})}:""]]),!r(c).webView&&e.type==="phone"&&(t.$route.meta.menuItemType!=="frame"||t.$route.meta.isWidgetMode)?I((a(),s("a",{key:1,class:h(["icon size-16",{"text-gray":!r(c).is_sms_configured}]),onClick:l[1]||(l[1]=b=>r(c).is_sms_configured&&A(b,e.value.data))},me,2)),[[r($),r(c).is_sms_configured?t.$t("sendSMS"):{interactiveContent:t.$t("settingsSMSIfDisableHint",{link:`<a href='${r(c).backendUrl}crm/settings/sms/' class='semibold nowrap' target='_blank'>${t.$t("settingsSMS")} <i class='fas fa-external-link-alt fa-sm'></i></a>`})}]]):i("",!0)],64)):i("",!0)]),e.value.ext_value&&e.type!=="address"?(a(),s("span",{key:0,title:e.value.ext_value,class:"tw-truncate gray small"},p(e.value.ext_value),9,_e)):i("",!0)])}}});function ke(o){return o.value!==void 0}const ye=k({__name:"CustomFieldValue",props:{type:{},value:{},contactId:{}},setup(o){const e=o;return(u,m)=>r(ke)(e.value)?(a(),s(f,{key:0},[e.type?(a(),C(fe,{key:0,value:e.value,type:e.type,"contact-id":e.contactId},null,8,["value","type","contact-id"])):(a(),s(f,{key:1},[v(p(e.value.value),1)],64))],64)):(a(),s(f,{key:1},[v(p(e.value),1)],64))}}),he=n("span",{class:"skeleton-line"},null,-1),ve=[he],we={key:1},ge={key:0,class:"small gray break-word tw-flex tw-items-baseline tw-gap-2 tw-mb-1"},be=k({__name:"CustomField",props:{contactId:{},label:{},skeleton:{type:Boolean},skeletonWidth:{},class:{},tooltipContent:{},tooltipPlacement:{},type:{},value:{}},setup(o){const e=o;return(u,m)=>e.skeleton?(a(),s("div",{key:0,class:"skeleton",style:M(`width: ${e.skeletonWidth||100}%`)},ve,4)):u.$slots.default||e.value?(a(),s("div",we,[e.label?(a(),s("div",ge,[n("span",null,p(e.label),1),e.tooltipContent?(a(),C(R,{key:0,content:e.tooltipContent,placement:e.tooltipPlacement,interactive:!0},null,8,["content","placement"])):i("",!0)])):i("",!0),n("div",{class:h([e.class,u.$style.text])},[N(u.$slots,"default",{},()=>[D(ye,{type:e.type,value:e.value,"contact-id":e.contactId},null,8,["type","value","contact-id"])])],2)])):i("",!0)}}),$e="_text_161d4_1",Ie={text:$e},Ce={$style:Ie},De=F(be,[["__cssModules",Ce]]);export{De as C,R as T};
