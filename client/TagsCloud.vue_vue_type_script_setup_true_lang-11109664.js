import{d as T,a1 as $,h as B,m as L,o as a,c as i,i as u,w as p,F as y,q as R,j as m,e as d,p as f,n as _,a as g,u as h,B as V,aa as S}from"./main-d7f03521.js";import{C as q,a as x}from"./ChipsList-ee14164a.js";import{b as D}from"./emit-b4342586.js";const F=["onClick"],M={class:"tw-flex-auto tw-truncate"},N=["onClick"],j=g("i",{class:"fas fa-times-circle text-gray !tw-opacity-70 hover:!tw-opacity-100 tw-rounded-full tw-bg-waBackground"},null,-1),z=[j],k=8,X=T({__name:"TagsCloud",props:{entityType:{},tags:{},editable:{type:Boolean}},emits:["deleteTag"],setup(C,{emit:w}){const t=C,n=$(),l=B(!0);function v(s,o){if(t.entityType==="deal"){if(!s){D();const c=n.currentRoute.value.meta.tabView||n.currentRoute.value.name;n.push({name:c,query:{tag:o}})}}else n.push(s?{name:"contacts"}:{name:"tag",params:{id:o}})}return(s,o)=>{const c=L("RouterLink");return a(),i(y,null,[t.tags.length?(a(),u(q,{key:0},{default:p(()=>[(a(!0),i(y,null,R([...t.tags].sort((e,r)=>r.count-e.count).slice(0,l.value?k:t.tags.length),e=>(a(),u(c,{key:e.id,to:{name:"tag",params:{id:e.id}},custom:""},{default:p(({isActive:r})=>[(a(),u(x,{key:e.id+String(e.color),color:e.color,"bg-color":e.bg_color,class:_(["smaller",{selected:r}])},{default:p(()=>[g("a",{class:_(["tw-group",s.$constant.parentAppDisableRouterClass]),onClick:d(b=>h(V).webView?h(S).emit("spa:navigateTo",{name:`${t.entityType}sByTag`,id:e.id}):v(r,e.id),["prevent"])},[g("span",M,f(e.name),1),t.editable?(a(),i("span",{key:0,onClick:d(b=>w("deleteTag",e.name),["stop","prevent"])},z,8,N)):m("",!0)],10,F)]),_:2},1032,["color","bg-color","class"]))]),_:2},1032,["to"]))),128))]),_:1})):m("",!0),t.tags.length>k?(a(),i("a",{key:1,class:"gray small",onClick:o[0]||(o[0]=d(e=>l.value=!l.value,["prevent"]))},f(l.value?`${s.$t("showAll")} (${t.tags.length})`:s.$t("collapse")),1)):m("",!0)],64)}}});export{X as _};
