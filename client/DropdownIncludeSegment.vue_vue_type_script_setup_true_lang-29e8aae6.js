import{d as L,C as F,t as h,L as I,a as y,A as u,o as a,c as l,i as n,n as p,k as d,g as x,F as m,b as _,w,l as z,p as A}from"./main-49799bbb.js";import{U as M}from"./UserPic-0ac47e38.js";import{M as D,_ as U}from"./MenuList-7aba2312.js";const E={class:"tw-sticky tw-top-0 tw-p-2 tw-bg-waBlank tw-z-10"},N={class:"toggle rounded smallest"},P={key:0,class:"tw-p-2"},R=n("div",{class:"spinner"},null,-1),T=[R],j=["disabled","onClick"],q={key:0,class:"icon"},G=n("i",{class:"fas fa-spinner text-yellow tw-animate-spin"},null,-1),H=[G],J=["title"],K={key:1,class:"small tw-px-4 tw-pb-4"},Y=L({__name:"DropdownIncludeSegment",props:{modelValue:{},contactIds:{}},emits:["update:modelValue"],setup(k,{emit:S}){const i=k,r=F(),{sharedSegment:g,mySegment:C,isFetching:$}=h(r);r.refetch();const{contact:f}=h(I()),o=y(!1),c=y(new Set),b=u(()=>C.value.filter(e=>e.type==="category").filter(e=>{var s;return!((s=f.value)!=null&&s.segments.map(t=>t.id).includes(e.id))})),V=u(()=>g.value.filter(e=>e.type==="category").filter(e=>{var s;return!((s=f.value)!=null&&s.segments.map(t=>t.id).includes(e.id))})),v=u(()=>o.value?V.value:b.value);async function B(e){Array.isArray(i.contactIds)&&(c.value.has(e)||(c.value.add(e),await r.includeContactsToSegment(e,i.contactIds).execute(),c.value.delete(e))),"modelValue"in i&&S("update:modelValue",e)}return(e,s)=>(a(),l(m,null,[n("div",E,[n("div",N,[n("span",{class:p({selected:!o.value}),onClick:s[0]||(s[0]=t=>o.value=!1)},d(e.$t("my",2)),3),n("span",{class:p({selected:o.value}),onClick:s[1]||(s[1]=t=>o.value=!0)},d(e.$t("shared",2)),3)])]),x($)?(a(),l("div",P,T)):(a(),l(m,{key:1},[v.value.length?(a(),_(D,{key:0},{default:w(()=>[(a(!0),l(m,null,z(v.value,t=>(a(),_(U,{key:t.id,class:p({selected:i.modelValue===t.id})},{default:w(()=>[n("a",{disabled:!t.is_editable,onClick:A(O=>B(t.id),["prevent"])},[c.value.has(t.id)?(a(),l("span",q,H)):(a(),_(M,{key:1,size:16,"fa-icon":t.icon,url:t.icon_path},null,8,["fa-icon","url"])),n("span",{title:t.name,class:"tw-truncate"},d(t.name),9,J)],8,j)]),_:2},1032,["class"]))),128))]),_:1})):(a(),l("div",K,d(e.$t("notFound")),1))],64))],64))}});export{Y as _};
