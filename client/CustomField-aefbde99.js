import{v as $}from"./vTooltip-95186f83.js";import{d as y,k as I,u as r,o as a,c as s,n as v,j as c,s as T,x as V,a as o,_ as F,i as C,w as W,b as M,a2 as z,Q as E,F as _,a9 as D,p,A as k,B as i,S as U,r as N}from"./main-d7f03521.js";import H from"./IframeView-f8660ec0.js";const L=n=>(T("data-v-c3165166"),n=n(),V(),n),O=L(()=>o("i",{class:"fas fa-question-circle"},null,-1)),j=[O],P=y({__name:"TooltipIcon",props:{content:{},placement:{},triggerClick:{type:Boolean},delay:{},interactive:{type:Boolean}},setup(n){const e=n;return(u,m)=>e.content?I((a(),s("span",{key:0,class:v(["icon",{"tw-cursor-pointer":e.triggerClick}])},j,2)),[[r($),{...e.placement?{placement:e.placement}:{},trigger:e.triggerClick?"click":"mouseenter",delay:e.delay||0,interactive:!!e.interactive,allowHTML:!0,content:e.content}]]):c("",!0)}});const R=F(P,[["__scopeId","data-v-c3165166"]]),q=y({__name:"IframeViewInDialog",props:{src:{},hideCloseIcon:{type:Boolean}},setup(n){const e=n;return(u,m)=>(a(),C(z,{"hide-buttons":!0,"hide-close-icon":e.hideCloseIcon},{default:W(({close:w})=>[M(H,{src:e.src,"static-position":!0,"force-resize":!0,onClose:w},null,8,["src","onClose"])]),_:1},8,["hide-close-icon"]))}}),Q={class:"tw-flex tw-items-baseline tw-space-x-2"},G={class:"tw-flex tw-items-baseline tw-space-x-2 tw-max-w-full"},J={class:"icon size-14"},K=["href"],X={key:1},Y=o("span",{class:"icon size-14"},[o("i",{class:"fas fa-map-marker-alt gray"})],-1),Z={class:"break-words"},ee={class:"custom-mr-4"},te={key:0,class:"hint custom-mr-4"},ae=["href"],se=o("i",{class:"fas fa-angle-right"},null,-1),oe={class:"icon size-14"},ne={key:0,class:"fas fa-envelope tw-text-waAccent"},le={key:1,class:"fas fa-phone-alt tw-text-waAccent"},ie={key:2,class:"fas fa-link tw-text-waAccent"},ce=["title"],re=o("i",{class:"fas fa-check-circle tw-text-waAccent",style:{color:"rgb(52, 199, 89)"}},null,-1),ue=[re],pe=["href"],de=o("span",{class:"icon size-16"},[o("i",{class:"fas fa-sms"})],-1),me=["title"],fe=y({__name:"CustomFieldIm",props:{value:{},type:{},contactId:{}},setup(n){const e=n,u=E(),m=u.meta.menuItemType==="deals"&&typeof u.params.id=="string"?u.params.id:null;function w(t,l,d){e.contactId&&(i.can_init_call&&l==="phone"&&g(t,`${i.baseUrl}?module=call&action=initContactDialog&contact_id=${e.contactId}&phone=${d}&iframe=1`),i.is_email_configured&&l==="email"&&g(t,`${i.baseUrl}?module=message&action=writeNewDialog&contact_id=${e.contactId}&email=${d}${m?`&deal_id=${m}`:""}&iframe=1`))}function A(t,l){g(t,`${i.baseUrl}?module=message&action=writeSMSNewDialog&contact_id=${e.contactId}&phone=${l}&iframe=1`)}function g(t,l){t.preventDefault(),U(q,{src:l,hideCloseIcon:u.meta.isWidgetMode}).show()}const f={im:{whatsapp:{icon:"fab fa-whatsapp",color:"#29C54D",link:"https://wa.me/{name}"},telegram:{icon:"fab fa-telegram-plane",color:"#279FDA",link:"https://t.me/{name}"},skype:{icon:"fab fa-skype",color:"#28A8EA",link:"skype:{name}?chat"},viber:{icon:"fab fa-viber",color:"#7360F4",link:"viber://chat?number={name}"},facebook:{icon:"fab fa-facebook-messenger",color:"#0084FF",link:"https://m.me/{name}"},discord:{icon:"fab fa-discord",color:"#404EED",link:""},slack:{icon:"fab fa-slack",color:"#A436AB",link:""},yahoo:{icon:"fab fa-yahoo",color:"#581cc7",link:""},custom:{icon:"fas fa-comments text-purple",color:"",link:""}},socialnetwork:{facebook:{icon:"fab fa-facebook-f",color:"#1877F2",link:"http://facebook.com/{name}"},twitter:{icon:"fab fa-twitter",color:"#29A6F3",link:"http://twitter.com/{name}"},linkedin:{icon:"fab fa-linkedin-in",color:"#0078B6",link:""},vkontakte:{icon:"fab fa-vk",color:"#2787F5",link:"http://vk.com/{name}"},instagram:{icon:"fab fa-instagram",color:"#FF2565",link:""},custom:{icon:"fas fa-comments text-purple",color:"",link:""}}};function B(t,l,d){try{const h=new URL(t);return t}catch{return d==="telegram"&&(t=t.startsWith("@")?t.slice(1):t),f[l][d].link.replace("{name}",t)}}return(t,l)=>{var d,h,x,S;return a(),s("div",Q,[o("div",G,[["im","socialnetwork"].includes(e.type)?(a(),s(_,{key:0},[o("span",J,[o("i",{class:v(((d=f[e.type][e.value.ext])==null?void 0:d.icon)||f[e.type].custom.icon),style:D(`color: ${((h=f[e.type][e.value.ext])==null?void 0:h.color)||f[e.type].custom.color};`)},null,6)]),(x=f[e.type][e.value.ext])!=null&&x.link?(a(),s("a",{key:0,href:B(e.value.data,e.type,e.value.ext),class:"tw-truncate",target:"_blank"},p(e.value.value),9,K)):(a(),s("span",X,p(e.value.value),1))],64)):e.type==="address"?(a(),s(_,{key:1},[Y,o("div",Z,[o("span",ee,p(e.value.value),1),e.value.ext_value?(a(),s("span",te,p(e.value.ext_value),1)):c("",!0),e.value.map_url?(a(),s("a",{key:1,href:e.value.map_url,target:"_blank",class:"nowrap"},[k(p(t.$t("map"))+" ",1),se],8,ae)):c("",!0)])],64)):["phone","email","url"].includes(e.type)&&((S=e.value.value)!=null&&S.trim())?(a(),s(_,{key:2},[o("span",oe,[e.type==="email"?(a(),s("i",ne)):c("",!0),e.type==="phone"?(a(),s("i",le)):c("",!0),e.type==="url"?(a(),s("i",ie)):c("",!0)]),e.value.status==="confirmed"?(a(),s("span",{key:0,class:"icon size-12 tw-absolute -tw-translate-y-2",title:t.$t("confirmed")},ue,8,ce)):c("",!0),I((a(),s("a",{href:`${e.type==="url"?"":e.type==="email"?"mailto:":"tel:"}${e.value.data}`,class:"tw-truncate",onClick:l[0]||(l[0]=b=>!r(i).webView&&(t.$route.meta.menuItemType!=="frame"||t.$route.meta.isWidgetMode||e.type==="phone")?w(b,e.type,e.value.data):null)},[k(p(e.value.value),1)],8,pe)),[[r($),e.type==="email"?r(i).is_email_configured?t.$t("sendEmail"):{interactiveContent:t.$t("settingsEmailIfDisableHint",{link:`<a href='${r(i).backendUrl}crm/settings/message-sources/email/' class='semibold nowrap' target='_blank'>${t.$t("settingsEmail")} <i class='fas fa-external-link-alt fa-sm'></i></a>`})}:""]]),!r(i).webView&&e.type==="phone"&&(t.$route.meta.menuItemType!=="frame"||t.$route.meta.isWidgetMode)?I((a(),s("a",{key:1,class:v(["nowrap",{"text-gray":!r(i).is_sms_configured}]),onClick:l[1]||(l[1]=b=>r(i).is_sms_configured&&A(b,e.value.data))},[de,k(" SMS ")],2)),[[r($),r(i).is_sms_configured?t.$t("sendSMS"):{interactiveContent:t.$t("settingsSMSIfDisableHint",{link:`<a href='${r(i).backendUrl}crm/settings/sms/' class='semibold nowrap' target='_blank'>${t.$t("settingsSMS")} <i class='fas fa-external-link-alt fa-sm'></i></a>`})}]]):c("",!0)],64)):c("",!0)]),!t.$route.meta.isWidgetMode&&e.value.ext_value&&e.type!=="address"?(a(),s("span",{key:0,title:e.value.ext_value,class:"tw-truncate gray small"},p(e.value.ext_value),9,me)):c("",!0)])}}});function _e(n){return n.value!==void 0}const ke=y({__name:"CustomFieldValue",props:{type:{},value:{},contactId:{}},setup(n){const e=n;return(u,m)=>r(_e)(e.value)?(a(),s(_,{key:0},[e.type?(a(),C(fe,{key:0,value:e.value,type:e.type,"contact-id":e.contactId},null,8,["value","type","contact-id"])):(a(),s(_,{key:1},[k(p(e.value.value),1)],64))],64)):(a(),s(_,{key:1},[k(p(e.value),1)],64))}}),ye=o("span",{class:"skeleton-line"},null,-1),he=[ye],ve={key:1,class:"tw-grid"},we={key:0,class:"small gray break-word tw-flex tw-items-baseline tw-gap-2 tw-mb-1"},ge=y({__name:"CustomField",props:{contactId:{},label:{},skeleton:{type:Boolean},skeletonWidth:{},class:{},tooltipContent:{},tooltipPlacement:{},type:{},value:{}},setup(n){const e=n;return(u,m)=>e.skeleton?(a(),s("div",{key:0,class:"skeleton",style:D(`width: ${e.skeletonWidth||100}%`)},he,4)):u.$slots.default||e.value?(a(),s("div",ve,[e.label?(a(),s("div",we,[o("span",null,p(e.label),1),e.tooltipContent?(a(),C(R,{key:0,content:e.tooltipContent,placement:e.tooltipPlacement,interactive:!0},null,8,["content","placement"])):c("",!0)])):c("",!0),o("div",{class:v([e.class,u.$style.text])},[N(u.$slots,"default",{},()=>[M(ke,{type:e.type,value:e.value,"contact-id":e.contactId},null,8,["type","value","contact-id"])])],2)])):c("",!0)}}),be="_text_161d4_1",$e={text:be},Ie={$style:$e},Fe=F(ge,[["__cssModules",Ie]]);export{Fe as C,R as T};
