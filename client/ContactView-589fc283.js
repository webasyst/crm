import{d as q,t as w,L as P,M as B,A as g,N as A,o as s,c as k,i as e,F as D,g as a,b as f,f as S,e as o,n as F,r as L,B as _,_ as N,y as M,j as R,w as r,p as U,k as E,h,v as b,O as z,P as H,q as j,s as K}from"./main-14ee4927.js";import{_ as O}from"./ViewWithSidebar.vue_vue_type_style_index_0_lang-e3a3ba75.js";import{u as Q}from"./FormSegmentUpdate.vue_vue_type_script_setup_true_lang-ac324058.js";import I from"./IframeView-9a46a878.js";import{_ as G,T as J,a as y}from"./TabList-39744a7c.js";import{_ as W}from"./ContactsList.vue_vue_type_script_setup_true_lang-c23d0dc0.js";import{_ as X}from"./ErrorDummy.vue_vue_type_script_setup_true_lang-14dd1963.js";import{_ as Y}from"./ContactInfo.vue_vue_type_script_setup_true_lang-a6a3ced7.js";import"./CustomColumn-9af7d856.js";import"./FieldCheckbox-7ee9d154.js";import"./InputWithContacts.vue_vue_type_script_setup_true_lang-4f517706.js";import"./UserPic-88a434b2.js";import"./DropDown-3d660bad.js";import"./index-927b8924.js";import"./validation-a60457f0.js";import"./iframeObserver-8b9df6a9.js";import"./index-39be567b.js";import"./DropdownModal-f33869b5.js";import"./object_hash-aa3eea5b.js";import"./useSortable-653c7c49.js";import"./SkeletonList-eb58974a.js";import"./LazyLoadingWithProgress.vue_vue_type_script_setup_true_lang-90c89f08.js";import"./EmptyList-32476ed0.js";import"./ContactsListItems-6500ae0c.js";import"./ChipsList-2ef71dd1.js";import"./ContactsListItemAction.vue_vue_type_style_index_0_lang-9e41edf9.js";import"./dayjs-733f6bc6.js";import"./WaDialogOpener.vue_vue_type_script_setup_true_lang-406f9c22.js";import"./DropdownIncludeSegment.vue_vue_type_script_setup_true_lang-3e978773.js";import"./WaSpinner-8d72557e.js";import"./InputWithUsers.vue_vue_type_script_setup_true_lang-deba38b3.js";import"./FormAddTag.vue_vue_type_script_setup_true_lang-f9b7052e.js";import"./DropdownAddTags.vue_vue_type_script_setup_true_lang-6d18531f.js";import"./FormContactUpdate.vue_vue_type_script_setup_true_lang-8f4ccd02.js";import"./fields-2ab9835b.js";import"./FieldSelect-b035d25b.js";import"./FormContactUpdateInfo.vue_vue_type_script_setup_true_lang-a1d0a572.js";import"./SortableList.vue_vue_type_script_setup_true_lang-b03ce62e.js";import"./imageUrlToBase64-bf4bcddf.js";import"./TagsCloud.vue_vue_type_script_setup_true_lang-6e9e5deb.js";import"./emit-e8138e70.js";import"./ButtonSubmit-4d96401d.js";import"./CustomField-60551acb.js";import"./TextAreaAutoresize-0b20aa66.js";import"./recentContacts-56405508.js";import"./ButtonFavorites.vue_vue_type_script_setup_true_lang-d39506c3.js";const Z={class:"tw-flex tw-flex-col tw-min-h-full md:tw-border-0 md:tw-border-solid md:tw-border-l md:tw-border-l-waBorder"},x=q({__name:"ContactTabs",props:{contactId:{}},setup(i){const n=i,{contactId:C,tabs:v,isFetching:l}=w(P()),{isFetching:u,error:m,statusCode:t}=w(B()),d=g(()=>l.value||u.value),p=g(()=>[403,404].includes(Number(t.value))&&m.value?m.value:null);return A(()=>{C.value=n.contactId}),(c,$)=>(s(),k("div",Z,[e("div",{class:F([{"mobile:!tw-hidden":p.value},"tabs-container bordered-bottom"])},[p.value?S("",!0):(s(),k(D,{key:0},[a(_).webView?S("",!0):(s(),f(G,{key:0,"entity-type":"contact","entity-id":n.contactId,class:"tw-ml-4 tw-mr-3"},null,8,["entity-id"])),o(J,{"entity-type":"contact",value:a(v),"is-fetching":d.value},null,8,["value","is-fetching"])],64))],2),e("div",{class:F(["tw-relative tw-flex-auto tw-bg-waBlank tw-min-h-[340px]",{"tw-p-4 tw-pb-0":["contactHistoryTab","contactInvoicesTab"].includes(String(c.$route.name))}])},[p.value?(s(),f(X,{key:0,code:a(t),message:p.value},null,8,["code","message"])):L(c.$slots,"default",{key:1},void 0,!0)],2)]))}});const tt=N(x,[["__scopeId","data-v-9eb117fc"]]),T=i=>(j("data-v-b0798280"),i=i(),K(),i),et={key:0,class:"sidebarHeader"},at={class:"tw-overflow-hidden"},ot=T(()=>e("i",{class:"fas fa-arrow-left"},null,-1)),st={class:"tw-truncate"},rt=T(()=>e("i",{class:"fas fa-list-ul black"},null,-1)),it=[rt],nt=T(()=>e("i",{class:"fas fa-times black"},null,-1)),ct=[nt],lt={class:"sidebarContainer"},ut={class:"sidebarList"},mt={class:"sidebarInfo"},dt=q({__name:"ContactView",props:{contactId:{}},setup(i){const n=i,C=g(()=>({context_contact_id:n.contactId})),{previousFetchParams:v}=w(M()),{showSidebar:l}=w(Q()),{contact:u}=w(B()),m=g(()=>{var t;return(t=u.value)!=null&&t.main&&Array.isArray(u.value.main.email)&&!u.value.main.email.length?"&noemail=1":""});return(t,d)=>{const p=R("RouterView");return s(),f(O,null,{sidebar:r(()=>{var c;return[a(_).webView?S("",!0):(s(),k("div",et,[e("div",at,[e("a",{class:"tw-flex tw-space-x-3 tw-items-center black",onClick:d[0]||(d[0]=U(()=>{var $,V;t.$router.push(`/contact/${((V=($=a(v))==null?void 0:$.hash)==null?void 0:V.replace("import/","import/result/").replace("crmSearch/","search/result/"))??""}`)},["prevent"]))},[ot,e("span",st,E((c=a(v))!=null&&c.hash?a(v).title:t.$t("allContacts")),1)])]),e("button",{class:"circle transparent",onClick:d[1]||(d[1]=$=>l.value=!a(l))},[h(e("span",null,it,512),[[b,!a(l)]]),h(e("span",null,ct,512),[[b,a(l)]])])])),e("div",lt,[e("div",ut,[o(y,null,{default:r(()=>[o(W,{"fetch-params":C.value,"hide-header":!0,"active-contact-id":n.contactId},null,8,["fetch-params","active-contact-id"])]),_:1})]),e("div",mt,[o(Y,{"contact-id":n.contactId},null,8,["contact-id"])])])]}),default:r(()=>[o(tt,{"contact-id":n.contactId},{default:r(()=>[o(p,null,{default:r(({Component:c})=>[(s(),f(z,null,[(s(),f(H(c),{key:t.$route.fullPath}))],1024)),h(e("div",null,[o(y,null,{default:r(()=>[o(I,{src:`${a(_).baseUrl}call/?iframe=1&contact=${t.$route.params.id}${t.$route.query.focus?"&focus=1":""}`},null,8,["src"])]),_:1})],512),[[b,t.$route.name==="contactCallsTab"]]),h(e("div",null,[o(y,null,{default:r(()=>[(s(),f(I,{key:String(t.$route.query.conversationId)+m.value,"is-pre-fetching":!a(u),src:t.$route.query.conversationId?`${a(_).baseUrl}message/conversation/${t.$route.query.conversationId}/?iframe=1&contact=${t.$route.params.id}${m.value}`:`${a(_).baseUrl}message/?iframe=1&contact=${t.$route.params.id}${t.$route.query.focus?"&focus=1":""}${m.value}`,"disable-resize":!0,"fixed-height-mobile":!0},null,8,["is-pre-fetching","src"]))]),_:1})],512),[[b,t.$route.name==="contactMessagesTab"]]),h(e("div",null,[o(y,null,{default:r(()=>[o(I,{src:`${a(_).baseUrl}reminder/all/?iframe=1&contact=${t.$route.params.id}${t.$route.query.focus?"&focus=1":""}`},null,8,["src"])]),_:1})],512),[[b,t.$route.name==="contactRemindersTab"]])]),_:1})]),_:1},8,["contact-id"])]),_:1})}}});const re=N(dt,[["__scopeId","data-v-b0798280"]]);export{re as default};
