import{v as I}from"./vTooltip-9ea5107e.js";import{d as k,k as C,u as r,o as t,c as s,n as v,j as l,s as B,x as M,a as n,_ as F,i as b,w as V,b as z,a0 as E,a6 as U,F as m,a9 as D,p,A as w,B as i,R as N,r as W}from"./main-46836c41.js";import H from"./IframeView-19d2dace.js";const L=o=>(B("data-v-eb6c8161"),o=o(),M(),o),O=L(()=>n("i",{class:"fas fa-question-circle"},null,-1)),R=[O],j=k({__name:"TooltipIcon",props:{content:{},placement:{},triggerClick:{type:Boolean},delay:{},interactive:{type:Boolean}},setup(o){const e=o,u=document.body;return(_,y)=>e.content?C((t(),s("span",{key:0,class:v(["icon",{"tw-cursor-pointer":e.triggerClick}])},R,2)),[[r(I),{...e.placement?{placement:e.placement}:{},trigger:e.triggerClick?"click":"mouseenter",delay:e.delay||0,interactive:!!e.interactive,allowHTML:!0,content:e.content,appendTo:r(u)}]]):l("",!0)}});const P=F(j,[["__scopeId","data-v-eb6c8161"]]),q=k({__name:"IframeViewInDialog",props:{src:{}},setup(o){const e=o;return(u,_)=>(t(),b(E,{"hide-buttons":!0},{default:V(({close:y})=>[z(H,{src:e.src,"static-position":!0,"force-resize":!0,onClose:y},null,8,["src","onClose"])]),_:1}))}}),G={class:"tw-flex tw-items-baseline tw-space-x-2"},J={class:"tw-flex tw-items-baseline tw-space-x-2 tw-max-w-full"},K={class:"icon size-14"},Q=["href"],X={key:1},Y=n("span",{class:"icon size-14"},[n("i",{class:"fas fa-map-marker-alt gray"})],-1),Z={class:"break-words"},ee={class:"custom-mr-4"},te={key:0,class:"hint custom-mr-4"},ae=["href"],se=n("i",{class:"fas fa-angle-right"},null,-1),oe={class:"icon size-14"},ne={key:0,class:"fas fa-envelope tw-text-waAccent"},le={key:1,class:"fas fa-phone-alt tw-text-waAccent"},ce={key:2,class:"fas fa-link tw-text-waAccent"},ie=["title"],re=n("i",{class:"fas fa-check-circle tw-text-waAccent",style:{color:"rgb(52, 199, 89)"}},null,-1),ue=[re],pe=["href"],de=n("i",{class:"fas fa-sms"},null,-1),me=[de],_e=["title"],fe=k({__name:"CustomFieldIm",props:{value:{},type:{},contactId:{}},setup(o){const e=o,u=U(),_=u.meta.menuItemType==="deals"&&typeof u.params.id=="string"?u.params.id:null;function y(a,c,d){e.contactId&&(i.can_init_call&&c==="phone"&&g(a,`${i.baseUrl}?module=call&action=initContactDialog&contact_id=${e.contactId}&phone=${d}&iframe=1`),i.is_email_configured&&c==="email"&&g(a,`${i.baseUrl}?module=message&action=writeNewDialog&contact_id=${e.contactId}&email=${d}${_?`&deal_id=${_}`:""}&iframe=1`))}function A(a,c){g(a,`${i.baseUrl}?module=message&action=writeSMSNewDialog&contact_id=${e.contactId}&phone=${c}&iframe=1`)}function g(a,c){a.preventDefault(),N(q,{src:c}).show()}const f={im:{whatsapp:{icon:"fab fa-whatsapp",color:"#29C54D",link:"https://wa.me/{name}"},telegram:{icon:"fab fa-telegram-plane",color:"#279FDA",link:"https://t.me/{name}"},skype:{icon:"fab fa-skype",color:"#28A8EA",link:"skype:{name}?chat"},viber:{icon:"fab fa-viber",color:"#7360F4",link:"viber://chat?number={name}"},facebook:{icon:"fab fa-facebook-messenger",color:"#0084FF",link:"https://m.me/{name}"},discord:{icon:"fab fa-discord",color:"#404EED",link:""},slack:{icon:"fab fa-slack",color:"#A436AB",link:""},yahoo:{icon:"fab fa-yahoo",color:"#581cc7",link:""},custom:{icon:"fas fa-comments text-purple",color:"",link:""}},socialnetwork:{facebook:{icon:"fab fa-facebook-f",color:"#1877F2",link:"http://facebook.com/{name}"},twitter:{icon:"fab fa-twitter",color:"#29A6F3",link:"http://twitter.com/{name}"},linkedin:{icon:"fab fa-linkedin-in",color:"#0078B6",link:""},vkontakte:{icon:"fab fa-vk",color:"#2787F5",link:"http://vk.com/{name}"},instagram:{icon:"fab fa-instagram",color:"#FF2565",link:""},custom:{icon:"fas fa-comments text-purple",color:"",link:""}}};function T(a,c,d){try{const h=new URL(a);return a}catch{return d==="telegram"&&(a=a.startsWith("@")?a.slice(1):a),f[c][d].link.replace("{name}",a)}}return(a,c)=>{var d,h,x,S;return t(),s("div",G,[n("div",J,[["im","socialnetwork"].includes(e.type)?(t(),s(m,{key:0},[n("span",K,[n("i",{class:v(((d=f[e.type][e.value.ext])==null?void 0:d.icon)||f[e.type].custom.icon),style:D(`color: ${((h=f[e.type][e.value.ext])==null?void 0:h.color)||f[e.type].custom.color};`)},null,6)]),(x=f[e.type][e.value.ext])!=null&&x.link?(t(),s("a",{key:0,href:T(e.value.data,e.type,e.value.ext),class:"tw-truncate",target:"_blank"},p(e.value.value),9,Q)):(t(),s("span",X,p(e.value.value),1))],64)):e.type==="address"?(t(),s(m,{key:1},[Y,n("div",Z,[n("span",ee,p(e.value.value),1),e.value.ext_value?(t(),s("span",te,p(e.value.ext_value),1)):l("",!0),e.value.map_url?(t(),s("a",{key:1,href:e.value.map_url,target:"_blank",class:"nowrap"},[w(p(a.$t("map"))+" ",1),se],8,ae)):l("",!0)])],64)):["phone","email","url"].includes(e.type)&&((S=e.value.value)!=null&&S.trim())?(t(),s(m,{key:2},[n("span",oe,[e.type==="email"?(t(),s("i",ne)):l("",!0),e.type==="phone"?(t(),s("i",le)):l("",!0),e.type==="url"?(t(),s("i",ce)):l("",!0)]),e.value.status==="confirmed"?(t(),s("span",{key:0,class:"icon size-12 tw-absolute -tw-translate-y-2",title:a.$t("confirmed")},ue,8,ie)):l("",!0),C((t(),s("a",{href:`${e.type==="url"?"":e.type==="email"?"mailto:":"tel:"}${e.value.data}`,class:"tw-truncate",onClick:c[0]||(c[0]=$=>!r(i).webView&&(a.$route.meta.menuItemType!=="frame"||e.type==="phone")?y($,e.type,e.value.data):null)},[w(p(e.value.value),1)],8,pe)),[[r(I),e.type==="email"?r(i).is_email_configured?a.$t("sendEmail"):{interactiveContent:a.$t("settingsEmailIfDisableHint",{link:`<a href='${r(i).backendUrl}crm/settings/message-sources/email/' class='semibold nowrap' target='_blank'>${a.$t("settingsEmail")} <i class='fas fa-external-link-alt fa-sm'></i></a>`})}:""]]),!r(i).webView&&a.$route.meta.menuItemType!=="frame"&&e.type==="phone"?C((t(),s("a",{key:1,class:v(["icon size-16",{"text-gray":!r(i).is_sms_configured}]),onClick:c[1]||(c[1]=$=>r(i).is_sms_configured&&A($,e.value.data))},me,2)),[[r(I),r(i).is_sms_configured?a.$t("sendSMS"):{interactiveContent:a.$t("settingsSMSIfDisableHint",{link:`<a href='${r(i).backendUrl}crm/settings/sms/' class='semibold nowrap' target='_blank'>${a.$t("settingsSMS")} <i class='fas fa-external-link-alt fa-sm'></i></a>`})}]]):l("",!0)],64)):l("",!0)]),e.value.ext_value&&e.type!=="address"?(t(),s("span",{key:0,title:e.value.ext_value,class:"tw-truncate gray small"},p(e.value.ext_value),9,_e)):l("",!0)])}}});function ke(o){return o.value!==void 0}const ye=k({__name:"CustomFieldValue",props:{type:{},value:{},contactId:{}},setup(o){const e=o;return(u,_)=>r(ke)(e.value)?(t(),s(m,{key:0},[e.type?(t(),b(fe,{key:0,value:e.value,type:e.type,"contact-id":e.contactId},null,8,["value","type","contact-id"])):(t(),s(m,{key:1},[w(p(e.value.value),1)],64))],64)):(t(),s(m,{key:1},[w(p(e.value),1)],64))}}),he=n("span",{class:"skeleton-line"},null,-1),ve=[he],be={key:1},we={key:0,class:"small gray break-word tw-flex tw-items-baseline tw-gap-2 tw-mb-1"},ge=k({__name:"CustomField",props:{contactId:{},label:{},skeleton:{type:Boolean},skeletonWidth:{},class:{},tooltipContent:{},tooltipPlacement:{},type:{},value:{}},setup(o){const e=o;return(u,_)=>(t(),s(m,null,[e.skeleton?(t(),s("div",{key:0,class:"skeleton",style:D(`width: ${e.skeletonWidth||100}%`)},ve,4)):l("",!0),(u.$slots.default||e.value)&&!e.skeleton?(t(),s("div",be,[e.label?(t(),s("div",we,[n("span",null,p(e.label),1),e.tooltipContent?(t(),b(P,{key:0,content:e.tooltipContent,placement:e.tooltipPlacement,interactive:!0},null,8,["content","placement"])):l("",!0)])):l("",!0),n("div",{class:v([e.class,u.$style.text])},[u.$slots.default?W(u.$slots,"default",{key:0}):(t(),b(ye,{key:1,type:e.type,value:e.value,"contact-id":e.contactId},null,8,["type","value","contact-id"]))],2)])):l("",!0)],64))}}),$e="_text_161d4_1",Ie={text:$e},Ce={$style:Ie},De=F(ge,[["__cssModules",Ce]]);export{De as C,P as T};
