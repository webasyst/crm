import{d as k,o as a,b as l,w as o,m as C,k as m,i,at as x,p as y,B as b,t as L,E as $,j as B,c as w,l as N,F as S,f,e as _,n as D,M,I as F}from"./main-512a5cdd.js";import{U as R}from"./UserPic-2094e1a0.js";import{M as V,_ as E}from"./MenuList-bac784e3.js";import{D as I}from"./DropDown-f7af334e.js";import{C as z}from"./CustomColumn-351ad915.js";import{W as T}from"./WaDialog-079c5577.js";import{_ as U}from"./DropdownIncludeSegment.vue_vue_type_script_setup_true_lang-2c6bb1ae.js";const W=["disabled"],j=k({__name:"ConfirmDialog",props:{message:{},submitButtonName:{},onConfirm:{type:Function},isLoading:{},error:{}},setup(u){const e=u;return(r,s)=>(a(),l(T,null,{header:o(()=>[C(m(e.message),1)]),error:o(()=>[C(m(e.error),1)]),submit:o(()=>[i("button",{disabled:x(e.isLoading)?e.isLoading.value:e.isLoading,onClick:s[0]||(s[0]=y((...d)=>r.onConfirm&&r.onConfirm(...d),["prevent"]))},m(e.submitButtonName),9,W)]),_:1}))}}),A=["onClick"],J=i("i",{class:"fas fa-times-circle"},null,-1),O=[J],P={class:"gray small tw-flex tw-items-center tw-space-x-1 hover:tw-opacity-70"},q=i("i",{class:"fas fa-plus"},null,-1),ee=k({__name:"ContactInfoSegments",props:{contact:{}},setup(u){const e=u,{t:r}=b(),{contact:s}=L($());async function d(n){const c=M(`crm.segment.exclude?id=${n}`,{immediate:!1}).post(JSON.stringify([e.contact.id])),p=async()=>{var g;await c.execute(),(g=c.response.value)!=null&&g.ok&&(s.value&&e.contact.id===s.value.id&&(s.value.segments=s.value.segments.filter(v=>v.id!==n)),h())},{show:t,hide:h}=F(j,{message:r("excludeSegmentConfirmationMessage"),submitButtonName:r("exclude"),isLoading:c.isFetching,error:c.error,onConfirm:p});t()}return(n,c)=>{const p=B("RouterLink");return a(),l(z,{space:"2"},{default:o(()=>[e.contact.segments.length?(a(),l(V,{key:0,class:"!-tw-mx-4"},{default:o(()=>[(a(!0),w(S,null,N(e.contact.segments,t=>(a(),l(E,{key:t.id},{default:o(()=>[_(p,{to:{name:"segment",params:{id:t.id}},class:D(["tw-group",n.$constant.parentAppDisableRouterClass])},{default:o(()=>[t.icon||t.icon_path?(a(),l(R,{key:0,size:20,"fa-icon":t.icon,url:t.icon_path},null,8,["fa-icon","url"])):f("",!0),i("span",null,m(t.name),1),t.is_editable?(a(),w("span",{key:1,class:"icon tw-hidden tw-opacity-50 group-hover:tw-block hover:tw-opacity-100",onClick:y(h=>d(t.id),["stop","prevent"])},O,8,A)):f("",!0)]),_:2},1032,["to","class"])]),_:2},1024))),128))]),_:1})):f("",!0),_(I,{"max-height":n.$route.meta.menuItemType==="frame"?"240px":"300px"},{body:o(()=>[_(U,{"contact-ids":[e.contact.id]},null,8,["contact-ids"])]),default:o(()=>[i("a",P,[q,i("span",null,m(n.$t("addSegment")),1)])]),_:1},8,["max-height"])]),_:1})}}});export{ee as _};
