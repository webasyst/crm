import{d as k,o as n,b as l,w as o,m as _,k as m,i,ar as w,p as y,B as b,t as x,a8 as L,j as $,c as B,l as N,F as S,f as C,e as f,n as D,J as F,G as M}from"./main-ec0df6a4.js";import{U as R}from"./UserPic-87c13a4a.js";import{M as V,_ as z}from"./MenuList-466c4134.js";import{D as E}from"./DropDown-5d25a522.js";import{C as I}from"./CustomColumn-959e6ffe.js";import{W as J}from"./WaDialog-c7c19903.js";import{_ as T}from"./DropdownIncludeSegment.vue_vue_type_script_setup_true_lang-d79f5cda.js";const U=["disabled"],W=k({__name:"ConfirmDialog",props:{message:{},submitButtonName:{},onConfirm:{type:Function},isLoading:{},error:{}},setup(u){const e=u;return(r,s)=>(n(),l(J,null,{header:o(()=>[_(m(e.message),1)]),error:o(()=>[_(m(e.error),1)]),submit:o(()=>[i("button",{disabled:w(e.isLoading)?e.isLoading.value:e.isLoading,onClick:s[0]||(s[0]=y((...d)=>r.onConfirm&&r.onConfirm(...d),["prevent"]))},m(e.submitButtonName),9,U)]),_:1}))}}),j=["onClick"],A=i("i",{class:"fas fa-times-circle"},null,-1),G=[A],O={class:"gray small"},P=i("i",{class:"fas fa-plus"},null,-1),ee=k({__name:"ContactInfoSegments",props:{contact:{}},setup(u){const e=u,{t:r}=b(),{contact:s}=x(L());async function d(a){const c=F(`crm.segment.exclude?id=${a}`,{immediate:!1}).post(JSON.stringify([e.contact.id])),p=async()=>{var g;await c.execute(),(g=c.response.value)!=null&&g.ok&&(s.value&&e.contact.id===s.value.id&&(s.value.segments=s.value.segments.filter(v=>v.id!==a)),h())},{show:t,hide:h}=M(W,{message:r("excludeSegmentConfirmationMessage"),submitButtonName:r("exclude"),isLoading:c.isFetching,error:c.error,onConfirm:p});t()}return(a,c)=>{const p=$("RouterLink");return n(),l(I,{space:"2"},{default:o(()=>[e.contact.segments.length?(n(),l(V,{key:0,class:"!-tw-mx-4"},{default:o(()=>[(n(!0),B(S,null,N(e.contact.segments,t=>(n(),l(z,{key:t.id},{default:o(()=>[f(p,{to:{name:"segment",params:{id:t.id}},class:D(["tw-group",a.$constant.parentAppDisableRouterClass])},{default:o(()=>[t.icon||t.icon_path?(n(),l(R,{key:0,size:20,"fa-icon":t.icon,url:t.icon_path},null,8,["fa-icon","url"])):C("",!0),i("span",null,m(t.name),1),i("span",{class:"icon tw-hidden tw-opacity-50 group-hover:tw-block hover:tw-opacity-100",onClick:y(h=>d(t.id),["stop","prevent"])},G,8,j)]),_:2},1032,["to","class"])]),_:2},1024))),128))]),_:1})):C("",!0),f(E,{"max-height":a.$route.meta.menuItemType==="frame"?"240px":"300px"},{body:o(()=>[f(T,{"contact-ids":[e.contact.id]},null,8,["contact-ids"])]),default:o(()=>[i("a",O,[P,_("Â "+m(a.$t("addSegment")),1)])]),_:1},8,["max-height"])]),_:1})}}});export{ee as _};
