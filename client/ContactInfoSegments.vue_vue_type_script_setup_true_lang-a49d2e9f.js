import{d as k,H as y,t as x,L as v,j as S,o as s,b as r,w as a,c as _,l as $,F as b,f as m,e as u,i as c,k as h,n as L,p as B,U as D,R as M}from"./main-49799bbb.js";import{U as N}from"./UserPic-0ac47e38.js";import{M as R,_ as F}from"./MenuList-7aba2312.js";import{D as U}from"./DropDown-a179a782.js";import{C as V}from"./CustomColumn-69543086.js";import{_ as z}from"./ConfirmDialog.vue_vue_type_script_setup_true_lang-a48aca33.js";import{_ as E}from"./DropdownIncludeSegment.vue_vue_type_script_setup_true_lang-29e8aae6.js";const I=["onClick"],j=c("i",{class:"fas fa-times-circle"},null,-1),A=[j],H={class:"gray small tw-flex tw-items-center tw-space-x-1 hover:tw-opacity-70"},J=c("i",{class:"fas fa-plus"},null,-1),W=k({__name:"ContactInfoSegments",props:{contact:{}},setup(w){const o=w,{t:p}=y(),{contact:i}=x(v());async function C(e){const n=D(`crm.segment.exclude?id=${e}`,{immediate:!1}).post(JSON.stringify([o.contact.id])),l=async()=>{var f;await n.execute(),(f=n.response.value)!=null&&f.ok&&(i.value&&o.contact.id===i.value.id&&(i.value.segments=i.value.segments.filter(g=>g.id!==e)),d())},{show:t,hide:d}=M(z,{message:p("excludeSegmentConfirmationMessage"),submitButtonName:p("exclude"),isLoading:n.isFetching,error:n.error,onConfirm:l});t()}return(e,n)=>{const l=S("RouterLink");return s(),r(V,{space:"2"},{default:a(()=>[o.contact.segments.length?(s(),r(R,{key:0,class:"!-tw-mx-4"},{default:a(()=>[(s(!0),_(b,null,$(o.contact.segments,t=>(s(),r(F,{key:t.id},{default:a(()=>[u(l,{to:{name:"segment",params:{id:t.id}},class:L(["tw-group",e.$constant.parentAppDisableRouterClass])},{default:a(()=>[t.icon||t.icon_path?(s(),r(N,{key:0,size:20,"fa-icon":t.icon,url:t.icon_path},null,8,["fa-icon","url"])):m("",!0),c("span",null,h(t.name),1),t.is_editable?(s(),_("span",{key:1,class:"icon tw-hidden tw-opacity-50 group-hover:tw-block hover:tw-opacity-100",onClick:B(d=>C(t.id),["stop","prevent"])},A,8,I)):m("",!0)]),_:2},1032,["to","class"])]),_:2},1024))),128))]),_:1})):m("",!0),u(U,{"max-height":e.$route.meta.menuItemType==="frame"?"240px":"300px"},{body:a(()=>[u(E,{"contact-ids":[o.contact.id]},null,8,["contact-ids"])]),default:a(()=>[c("a",H,[J,c("span",null,h(e.$t("addSegment")),1)])]),_:1},8,["max-height"])]),_:1})}}});export{W as _};
