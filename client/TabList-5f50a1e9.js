import{d as B,a as _,aV as ne,b0 as le,R as W,r as ee,f as E,H as ie,b1 as H,o as d,b as O,w as S,i as a,b2 as re,Q as ce,ad as ue,am as de,c as m,h as j,v as X,g,a3 as G,q as te,s as ae,_ as se,I as fe,aa as pe,b3 as ve,A as M,aL as me,at as V,Y as _e,j as he,F as A,l as F,e as ye,m as K,k as x,P as be,ae as Z,n as I}from"./main-e63d6b61.js";import{D as we}from"./DropdownModal-872f106f.js";import{u as ge}from"./useSortable-6edb9dbf.js";import{D as ke}from"./DropDown-b752b133.js";import{b as Te}from"./index-6448b8a4.js";const Xe=B({__name:"ComponentActivator",setup(c){const s=_(!1),o=ne(le()),u=W(o,f=>{f&&(s.value=!0,u())});return(f,v)=>s.value?ee(f.$slots,"default",{key:0}):E("",!0)}}),Ce=a("button",{class:"button circle"},[a("i",{class:"fas fa-plus"})],-1),Ge=B({__name:"TabsAddEntityButton",props:{entityType:{},entityId:{}},setup(c){const s=c,{t:o}=ie(),u=[{label:o("addNoteOrFile"),classIcon:"fas fa-sticky-note",clickHandler:()=>{H.push({name:`${s.entityType}NotesTab`,query:{focus:"1"}})}},{label:o("addReminder"),classIcon:"fas fa-check-circle",clickHandler:()=>{H.push({name:`${s.entityType}RemindersTab`,query:{focus:"1"}})}},{label:o("addInvoice"),classIcon:"fas fa-file-invoice-dollar",clickHandler:()=>{H.push({name:`${s.entityType}InvoicesTab`,query:{is_new:"1"}})}}];return(f,v)=>(d(),O(we,{items:u},{default:S(()=>[Ce]),_:1}))}}),oe=c=>(te("data-v-8af80abb"),c=c(),ae(),c),Se={class:"tw-sticky tw-left-0 tw-z-10"},xe=oe(()=>a("span",{class:"icon size-16"},[a("i",{class:"fas fa-chevron-left"})],-1)),Ne=[xe],$e=oe(()=>a("span",{class:"icon size-16"},[a("i",{class:"fas fa-chevron-left"})],-1)),Re=[$e],Ie=B({__name:"HorizontalScrollContainer",props:{step:{default:90},fadeColor:{default:"var(--background-color-blank)"}},setup(c){const s=c;re(b=>({ba883736:b.fadeColor}));const o=_(null),u=_(!1),f=_(0),{x:v,arrivedState:h}=ce(o,{behavior:"smooth"});return ue(o,b=>{const p=b[0];f.value=p.target.clientHeight,u.value=p.target.scrollWidth>p.target.clientWidth}),de(()=>{o.value&&(f.value=o.value.clientHeight,u.value=o.value.scrollWidth>o.value.clientWidth)}),W(u,()=>{h.right=!1}),(b,p)=>(d(),m("div",{ref_key:"scrollableRef",ref:o,class:"tw-relative tw-overflow-x-scroll tw-scrollbar-hide"},[a("div",Se,[j(a("div",{class:"arr -tw-left-2",style:G({height:`${f.value}px`}),onClick:p[0]||(p[0]=N=>v.value-=s.step)},Ne,4),[[X,u.value&&g(v)>0]]),j(a("div",{class:"arr tw-right-0 tw-rotate-180",style:G({height:`${f.value}px`}),onClick:p[1]||(p[1]=N=>v.value+=s.step)},Re,4),[[X,u.value&&!g(h).right]])]),ee(b.$slots,"default")],512))}});const Ee=se(Ie,[["__scopeId","data-v-8af80abb"]]),q=c=>(te("data-v-e8ce25f8"),c=c(),ae(),c),Oe=q(()=>a("div",{class:"skeleton-line"},null,-1)),Be=[Oe],De=["data-id"],ze=["href","onClick"],Le={key:0,class:"count"},He={key:0,class:"nowrap tw-ml-1 tw-py-3"},Me=q(()=>a("span",{class:"icon size-16 text-light-gray"},[a("i",{class:"fas fa-chevron-down"})],-1)),Ve=["data-id"],Ae=["href","onClick"],Fe=["title"],We={key:0,class:"count tw-flex-none"},qe=q(()=>a("canvas",{id:"tabs-canvas",class:"hidden"},null,-1)),Ue=B({__name:"TabList",props:{entityType:{},value:{},isFetching:{type:Boolean},fadeColor:{}},setup(c){const s=c,o=fe(Te),u=_(null),f=_(null),v=_(null),h=_(null),{width:b}=pe(h),{tabsOrder:p,tabsOrderMap:N}=ve(s.entityType),w=_(new Map),k=M(()=>[...s.value].sort((e,i)=>N.value[e.routeName]-N.value[i.routeName])),D=M(()=>k.value.filter(e=>w.value.get(e.routeName))),$=M(()=>w.value.size>0?k.value.filter(e=>!w.value.get(e.routeName)):[]),U=()=>{for(const e of k.value)w.value.set(e.routeName,!0)},Q=(e,i)=>{const r=document.getElementById("tabs-canvas");if(r){const t=r.getContext("2d");if(t)return t.font=i,t.measureText(e).width}return 0},J=e=>{const r="1rem sans-serif",t="0.75em sans-serif";let l=0;for(let n=0;n<e.length;n++)l+=24,l+=Q(e[n].name,r),e[n].count&&(l+=Q(String(e[n].count),t));return l-24};async function z(e=!1){if(!h.value)return;const i=[...k.value],r=()=>{var n;let l=v.value?80:0;return f.value&&(l=f.value.offsetWidth+20),e&&((n=v.value)==null?void 0:n.children.length)===1?0:l},t=r();if(!(J(i)<h.value.clientWidth-t))for(let l=0;l<k.value.length;l++){const n=i.pop();if(w.value.set(n==null?void 0:n.routeName,!1),await Z(),J(i)<h.value.clientWidth-(e?t:r()))break}}W(()=>s.value,()=>{if(!s.value.length)return;me(()=>s.isFetching,async()=>{p.value.length||s.value.forEach(i=>{p.value.push(i.routeName)}),U(),await Z(),z()},{immediate:!s.isFetching})},{immediate:!!s.value,deep:!0});let L,R;V(D,e=>{u.value&&e.length&&(L=P(u.value,e))},{immediate:!0,debounce:250}),V($,e=>{v.value&&e.length&&(R=P(v.value,e))},{immediate:!0,debounce:250}),V(b,(e,i)=>{e>i&&R&&U(),z(e>i)},{debounce:200}),_e(()=>{L&&L.stop(),R&&R.stop()});function P(e,i){return ge(e,i,{handle:".handle",group:"tabs",animation:150,forceFallback:!0,fallbackOnBody:!0,fallbackTolerance:5,delay:150,delayOnTouchOnly:!0,onStart:()=>{document.querySelectorAll("iframe").forEach(r=>{r.classList.add("tw-pointer-events-none")})},onEnd:r=>{var T,C;document.querySelectorAll("iframe").forEach(y=>{y.classList.remove("tw-pointer-events-none")});const{id:t}=r.item.dataset;typeof t=="string"&&(r.to.classList.contains("tabs-dropdown-list")?w.value.set(t,!1):r.to.classList.contains("tabs-main-list")&&w.value.set(t,!0));const l=[...((T=u.value)==null?void 0:T.children)||[],...((C=v.value)==null?void 0:C.children)||[]].map(y=>y.dataset.id),n=[...p.value];for(let y=0;y<n.length;y++){const Y=n[y];l.includes(Y)||l.splice(y,0,Y)}p.value=l,setTimeout(z)}})}return(e,i)=>{const r=he("router-link");return d(),m("div",{ref_key:"tabsListRef",ref:h,class:"tabs-list tw-flex-auto tw-overflow-hidden tw-mx-2"},[(d(),O(be(g(o)?Ee:"div"),{"fade-color":s.fadeColor||"var(--background-color)",class:"tw-select-none md:tw-flex"},{default:S(()=>[(d(),m("ul",{key:JSON.stringify(D.value),ref_key:"mainUlRef",ref:u,class:"tabs tabs-main-list overflow-arrows tw-flex-none"},[s.isFetching?(d(),m(A,{key:0},F(7,t=>a("li",{key:t,class:"skeleton tw-w-16"},Be)),64)):(d(!0),m(A,{key:1},F(g(o)?k.value:D.value,t=>(d(),O(r,{key:t.routeName,to:{name:t.routeName},replace:"",custom:""},{default:S(({isActive:l,href:n,navigate:T})=>[a("li",{class:I([{selected:l,handle:!g(o)},"tab-item"]),"data-id":t.routeName},[a("a",{href:n,class:I(e.$constant.parentAppDisableRouterClass),onClick:C=>T(C).then(()=>typeof t.onClick=="function"?t.onClick():null)},[a("span",null,[K(x(t.name)+" ",1),t.count?(d(),m("span",Le,x(t.count),1)):E("",!0)])],10,ze)],10,De)]),_:2},1032,["to"]))),128))])),!g(o)&&$.value.length?(d(),m("div",He,[ye(ke,{"fallback-on-open":!0,hover:!0,"strategy-fixed":!0},{body:S(()=>[(d(),m("ul",{key:JSON.stringify($.value),ref_key:"dropdownUlRef",ref:v,class:"menu tabs-dropdown-list"},[(d(!0),m(A,null,F($.value,t=>(d(),O(r,{key:t.routeName,to:{name:t.routeName},replace:"",custom:""},{default:S(({isActive:l,href:n,navigate:T})=>[a("li",{class:I([{selected:l,handle:!g(o)},"tab-item"]),"data-id":t.routeName},[a("a",{href:n,class:I([e.$constant.parentAppDisableRouterClass,"!tw-py-3"]),onClick:C=>T(C).then(()=>typeof t.onClick=="function"?t.onClick():null)},[a("span",{title:t.name,class:"tw-truncate"},x(t.name),9,Fe),t.count?(d(),m("span",We,x(t.count),1)):E("",!0)],10,Ae)],10,Ve)]),_:2},1032,["to"]))),128))]))]),default:S(()=>[a("button",{ref_key:"dropdownButtonRef",ref:f,class:"button light-gray transparent rounded custom-px-4"},[Me,K(" "+x(e.$t("more")),1)],512)]),_:1})])):E("",!0),qe]),_:1},8,["fade-color"]))],512)}}});const Ke=se(Ue,[["__scopeId","data-v-e8ce25f8"]]);export{Ke as T,Ge as _,Xe as a};
