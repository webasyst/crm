import{d as k,a as x,A as u,as as C,h as _,g as r,o as t,c as s,i as g,e as h,w as b,F as $,l as D,n as y,f as p,b as L,p as B,k as w,j as R,m as z}from"./main-14ee4927.js";import{C as S,v as m,a as T}from"./ChipsList-2ef71dd1.js";import{U as f}from"./UserPic-88a434b2.js";import{c as N}from"./index-39be567b.js";import{d as O}from"./dayjs-733f6bc6.js";import{i as P}from"./currency-format-d77bdc4b.js";const U=["onClick"],se=k({__name:"DealsListItemTags",props:{tags:{},small:{type:Boolean},disableOverflowSoft:{type:Boolean}},setup(d){const e=d,n=x(null),a=u(()=>n.value?n.value.innerHTML:""),i=C();return(l,o)=>{var c;return(c=e.tags)!=null&&c.length?_((t(),s("div",{key:0,class:y(["deals-item-tags",{"overflow-soft-hide-x":!e.disableOverflowSoft}])},[g("div",{ref_key:"tagsListRef",ref:n,class:y(["deals-item-tags__wrapper",{small:e.small}])},[h(S,{class:"deals-item-tags-chips__list"},{default:b(()=>[(t(!0),s($,null,D(e.tags,v=>(t(),L(T,{key:v.id,class:"custom-m-0"},{default:b(()=>[g("a",{onClick:B(I=>r(i).updateFilterParams({tag:v.id}),["prevent"])},"# "+w(v.name),9,U)]),_:2},1024))),128))]),_:1})],2)],2)),[[r(m),{delay:500,allowHTML:!0,placement:"top-start",content:a.value},void 0,{updated:!0}]]):p("",!0)}}});const F={class:"deals-item-state-reminder"},M={key:0},V={key:1},A={key:2},j={key:3},ae=k({__name:"DealsListItemStates",props:{deal:{}},setup(d){const e=d,n={actual:"var(--green)",overdue:"var(--red)",burn:"var(--yellow)",normal:"var(--white)",completed:"var(--white)"},a=u(()=>e.deal.status_id==="OPEN"),i=u(()=>e.deal.reminder_state?n[e.deal.reminder_state]:null),l=u(()=>a.value&&e.deal.reminder_datetime),o=u(()=>a.value&&e.deal.message_unread),c=u(()=>e.deal.source?{name:e.deal.source.name,icon_url:e.deal.source.icon_url}:null);return(v,I)=>(t(),s("div",F,[c.value&&c.value.icon_url?_((t(),s("div",M,[h(f,{size:16,url:c.value.icon_url},null,8,["url"])])),[[r(m),c.value.name,void 0,{"top-start":!0,300:!0}]]):p("",!0),l.value?_((t(),s("span",V,[i.value?(t(),L(f,{key:0,size:16,"bg-color":i.value,"disable-rounded":"","bordered-circle":""},null,8,["bg-color"])):p("",!0)])),[[r(m),v.deal.reminder_title||"",void 0,{"top-start":!0,300:!0}]]):a.value?_((t(),s("span",A,[h(f,{size:16,"fa-icon":"exclamation-triangle","icon-color":"var(--yellow)"})])),[[r(m),v.$t("noRemindersAssigned"),void 0,{"top-start":!0,300:!0}]]):p("",!0),o.value?_((t(),s("span",j,[h(f,{size:16,"fa-icon":"comment-dots","icon-color":"var(--red)"})])),[[r(m),v.$t("unreadMessages"),void 0,{"top-start":!0,300:!0}]]):p("",!0)]))}});const H={class:"deals-item-deal"},E={key:0,class:"tw-mr-2"},G=["onClick"],q={key:0,class:"tw-ml-1"},oe=k({__name:"DealsListItemDeal",props:{deal:{},disableTootltip:{type:Boolean},size:{},useLink:{type:Boolean},useUserpic:{type:Boolean}},setup(d){const e=d,n=u(()=>{var a,i;return(i=(a=e.deal)==null?void 0:a.shop_order)==null?void 0:i.id});return(a,i)=>{var o;const l=R("RouterLink");return t(),s("div",H,[e.useUserpic&&((o=e.deal.contact)!=null&&o.userpic)?_((t(),s("div",E,[h(f,{url:e.deal.contact.userpic,size:20,"size-userpic":!0},null,8,["url"])])),[[r(m),e.deal.contact.name,void 0,{"top-start":!0,500:!0}]]):p("",!0),h(l,{to:{name:"deal",params:{id:e.deal.id}},custom:""},{default:b(({navigate:c})=>[g("div",{class:y(["deals-item-deal__name",{link:e.useLink}]),onClick:v=>e.useLink&&c()},[_((t(),s("span",{class:y(["tw-truncate",{[`tw-text-[${e.size}]`]:e.size}])},[z(w(e.deal.name),1)],2)),[[r(m),e.disableTootltip?null:e.deal.name,void 0,{"top-start":!0,500:!0}]]),n.value?(t(),s("span",q,[h(f,{url:r(N),size:16,"disable-rounded":""},null,8,["url"])])):p("",!0)],10,G)]),_:1},8,["to"])])}}});const J={class:"deals-item-responsible__name"},le=k({__name:"DealsItemResponsible",props:{user:{},alignRight:{type:Boolean},disableTootltip:{type:Boolean},defaultColor:{type:Boolean}},setup(d){const e=d;return(n,a)=>(t(),s("div",{class:y(["deals-item-responsible",{"tw-justify-end":e.alignRight,"default-color":e.defaultColor}])},[e.user?(t(),s($,{key:0},[h(f,{url:e.user.userpic,size:20,"size-userpic":!0},null,8,["url"]),_((t(),s("div",J,[z(w(e.user.name),1)])),[[r(m),e.disableTootltip?null:e.user.name,void 0,{"top-start":!0,500:!0}]])],64)):p("",!0)],2))}});const K=g("i",{class:"fas fa-check-circle text-green"},null,-1),Q=[K],re=k({__name:"DealsItemAmount",props:{deal:{},size:{},swapIcon:{type:Boolean},bigIcon:{type:Boolean}},setup(d){const e=d,n=u(()=>{const l=e.deal.original_currency_id||e.deal.currency_id,o=e.deal.original_amount||e.deal.amount;return o!==null?P(l,o):""}),a=u(()=>{var l,o;return(l=e.deal.shop_order)!=null&&l.id&&((o=e.deal.shop_order)!=null&&o.paid_date)?e.deal.shop_order.paid_date:null}),i=u(()=>O(a.value).format("L"));return(l,o)=>(t(),s("div",{class:y(["deals-item-amount",{"tw-flex-row-reverse":e.swapIcon}])},[g("span",{class:y(["bold black",{[`tw-text-${e.size}`]:e.size}])},w(n.value),3),a.value?_((t(),s("span",{key:0,class:y(["icon",{"size-18":e.bigIcon}])},Q,2)),[[r(m),`${l.$t("paid")} ${i.value}`,void 0,{right:!0,500:!0}]]):p("",!0)],2))}});export{oe as _,ae as a,re as b,le as c,se as d};
