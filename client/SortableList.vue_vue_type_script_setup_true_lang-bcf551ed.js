import{S as u,m as f}from"./useSortable-1dcfe543.js";import{d as y,a as h,ai as x,P as d,a6 as c,o as l,c as i,F as b,l as w,r as _,J as S,L as g}from"./main-ad3d4b2a.js";const k=["data-id"],L=y({__name:"SortableList",props:{list:{},minLength:{},itemKey:{},extOptions:{},disable:{type:Boolean},useSort:{type:Boolean}},emits:["update","scrollLeftSide","scrollRightSide"],setup(m,{emit:p}){const e=m,r=h(null);let a;return x(()=>{d(()=>e.list.length,async()=>{!r.value||e.list.length<e.minLength||(a&&a.destroy(),a=new u(r.value,{handle:".handle",animation:150,forceFallback:!0,onUpdate:async t=>{if(typeof t.oldIndex=="number"&&typeof t.newIndex=="number"&&t.oldIndex!==t.newIndex){a.sort(a.toArray().sort((s,n)=>+s-+n)),await c();const o=[...e.list];f(o,t.oldIndex,t.newIndex),p("update",o)}},...e.extOptions?e.extOptions:{}}),e.useSort&&(await c(),a.sort(a.toArray().sort((t,o)=>+t-+o))))},{immediate:!0})}),d(()=>e.disable,()=>{a&&a.option("disabled",e.disable)}),(t,o)=>(l(),i("div",{ref_key:"el",ref:r,class:"tw-flex tw-flex-col tw-space-y-2",style:{"touch-action":"auto"}},[(l(!0),i(b,null,w(e.list,(s,n)=>(l(),i("div",{key:e.itemKey?s[e.itemKey]:n,"data-id":e.itemKey?s[e.itemKey]:n},[_(t.$slots,"default",S(g({item:s,index:n})))],8,k))),128))],512))}});export{L as _};
