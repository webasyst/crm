import{d as k,a as x,z as i,h as m,g as u,o as t,c as s,i as g,e as f,w as b,F as $,l as C,n as h,f as _,b as L,p as D,k as w,j as B,m as z}from"./main-512a5cdd.js";import{c as R}from"./tags-ec5b68fa.js";import{v}from"./vTooltip-c8fe82a0.js";import{C as S,a as T}from"./ChipsList-784e50f6.js";import{U as y}from"./UserPic-2094e1a0.js";import{c as N}from"./index-f44a2c60.js";import{d as O}from"./dayjs-63c9a14c.js";import{i as P}from"./currency-format-9c5f5abd.js";const U=["onClick"],oe=k({__name:"DealsListItemTags",props:{tags:{},small:{type:Boolean},disableOverflowSoft:{type:Boolean}},setup(d){const e=d,r=x(null),a=i(()=>r.value?r.value.innerHTML:""),n=R();return(l,o)=>{var c;return(c=e.tags)!=null&&c.length?m((t(),s("div",{key:0,class:h(["deals-item-tags",{"overflow-soft-hide-x":!e.disableOverflowSoft}])},[g("div",{ref_key:"tagsListRef",ref:r,class:h(["deals-item-tags__wrapper",{small:e.small}])},[f(S,{class:"deals-item-tags-chips__list"},{default:b(()=>[(t(!0),s($,null,C(e.tags,p=>(t(),L(T,{key:p.id,class:"custom-m-0"},{default:b(()=>[g("a",{onClick:D(I=>u(n).updateFilterParams({tag:p.id}),["prevent"])},"# "+w(p.name),9,U)]),_:2},1024))),128))]),_:1})],2)],2)),[[u(v),{delay:500,allowHTML:!0,placement:"top-start",content:a.value},void 0,{updated:!0}]]):_("",!0)}}});const F={class:"deals-item-state-reminder"},M={key:0},V={key:1},j={key:2},A={key:3},le=k({__name:"DealsListItemStates",props:{deal:{}},setup(d){const e=d,r={actual:"var(--green)",overdue:"var(--red)",burn:"var(--yellow)",normal:"var(--white)",completed:"var(--white)"},a=i(()=>e.deal.status_id==="OPEN"),n=i(()=>e.deal.reminder_state?r[e.deal.reminder_state]:null),l=i(()=>a.value&&e.deal.reminder_datetime),o=i(()=>a.value&&e.deal.message_unread),c=i(()=>e.deal.source?{name:e.deal.source.name,icon_url:e.deal.source.icon_url}:null);return(p,I)=>(t(),s("div",F,[c.value&&c.value.icon_url?m((t(),s("div",M,[f(y,{size:16,url:c.value.icon_url},null,8,["url"])])),[[u(v),c.value.name,void 0,{"top-start":!0,300:!0}]]):_("",!0),l.value?m((t(),s("span",V,[n.value?(t(),L(y,{key:0,size:16,"bg-color":n.value,"disable-rounded":"","bordered-circle":""},null,8,["bg-color"])):_("",!0)])),[[u(v),p.deal.reminder_title||"",void 0,{"top-start":!0,300:!0}]]):a.value?m((t(),s("span",j,[f(y,{size:16,"fa-icon":"exclamation-triangle","icon-color":"var(--yellow)"})])),[[u(v),p.$t("noRemindersAssigned"),void 0,{"top-start":!0,300:!0}]]):_("",!0),o.value?m((t(),s("span",A,[f(y,{size:16,"fa-icon":"comment-dots","icon-color":"var(--red)"})])),[[u(v),p.$t("unreadMessages"),void 0,{"top-start":!0,300:!0}]]):_("",!0)]))}});const H={class:"deals-item-deal"},E={key:0,class:"tw-mr-2"},G=["onClick"],q={key:0,class:"tw-ml-1"},re=k({__name:"DealsListItemDeal",props:{deal:{},disableTootltip:{type:Boolean},size:{},useLink:{type:Boolean},useUserpic:{type:Boolean}},setup(d){const e=d,r=i(()=>{var a,n;return(n=(a=e.deal)==null?void 0:a.shop_order)==null?void 0:n.id});return(a,n)=>{var o;const l=B("RouterLink");return t(),s("div",H,[e.useUserpic&&((o=e.deal.contact)!=null&&o.userpic)?(t(),s("div",E,[f(y,{url:e.deal.contact.userpic,size:20,"size-userpic":!0},null,8,["url"])])):_("",!0),f(l,{to:{name:"deal",params:{id:e.deal.id}},custom:""},{default:b(({navigate:c})=>[g("div",{class:h(["deals-item-deal__name",{link:e.useLink}]),onClick:p=>e.useLink&&c()},[m((t(),s("span",{class:h(["tw-truncate",{[`tw-text-[${e.size}]`]:e.size}])},[z(w(e.deal.name),1)],2)),[[u(v),e.disableTootltip?null:e.deal.name,void 0,{"top-start":!0,500:!0}]]),r.value?(t(),s("span",q,[f(y,{url:u(N),size:16,"disable-rounded":""},null,8,["url"])])):_("",!0)],10,G)]),_:1},8,["to"])])}}});const J={class:"deals-item-responsible__name"},ne=k({__name:"DealsItemResponsible",props:{user:{},alignRight:{type:Boolean},disableTootltip:{type:Boolean},defaultColor:{type:Boolean}},setup(d){const e=d;return(r,a)=>(t(),s("div",{class:h(["deals-item-responsible",{"tw-justify-end":e.alignRight,"default-color":e.defaultColor}])},[e.user?(t(),s($,{key:0},[f(y,{url:e.user.userpic,size:20,"size-userpic":!0},null,8,["url"]),m((t(),s("div",J,[z(w(e.user.name),1)])),[[u(v),e.disableTootltip?null:e.user.name,void 0,{"top-start":!0,500:!0}]])],64)):_("",!0)],2))}});const K=g("i",{class:"fas fa-check-circle text-green"},null,-1),Q=[K],ie=k({__name:"DealsItemAmount",props:{deal:{},size:{},swapIcon:{type:Boolean},bigIcon:{type:Boolean}},setup(d){const e=d,r=i(()=>{const l=e.deal.original_currency_id||e.deal.currency_id,o=e.deal.original_amount||e.deal.amount;return o!==null?P(l,o):""}),a=i(()=>{var l,o;return(l=e.deal.shop_order)!=null&&l.id&&((o=e.deal.shop_order)!=null&&o.paid_date)?e.deal.shop_order.paid_date:null}),n=i(()=>O(a.value).format("L"));return(l,o)=>(t(),s("div",{class:h(["deals-item-amount",{"tw-flex-row-reverse":e.swapIcon}])},[g("span",{class:h(["bold black",{[`tw-text-${e.size}`]:e.size}])},w(r.value),3),a.value?m((t(),s("span",{key:0,class:h(["icon",{"size-18":e.bigIcon}])},Q,2)),[[u(v),`${l.$t("paid")} ${n.value}`,void 0,{right:!0,500:!0}]]):_("",!0)],2))}});export{re as _,le as a,ie as b,ne as c,oe as d};
