import{d as $,S as b,h as B,m as L,o as s,c,i as h,w as p,F as _,q as R,j as m,e as d,p as g,b as V,n as f,a as o,u as y,B as N,a2 as S}from"./main-82f77a11.js";import{C as q,a as x}from"./ChipsList-bf475e53.js";import{a as D}from"./emit-75ad975c.js";const F=["onClick"],M=o("i",{class:"fas fa-hashtag"},null,-1),j={class:"tw-flex-auto tw-truncate"},z={class:"count tw-mt-0.5"},A=["onClick"],E=o("i",{class:"fas fa-times-circle text-gray !tw-opacity-70 hover:!tw-opacity-100"},null,-1),P=[E],w=8,I=$({__name:"TagsCloud",props:{entityType:{},tags:{},editable:{type:Boolean}},emits:["deleteTag"],setup(C,{emit:k}){const t=C,l=b(),r=B(!0);function v(a,n){if(t.entityType==="deal"){if(!a){D();const u=l.currentRoute.value.meta.tabView||l.currentRoute.value.name;l.push({name:u,query:{tag:n}})}}else l.push(a?{name:"contacts"}:{name:"tag",params:{id:n}})}return(a,n)=>{const u=L("RouterLink");return s(),c(_,null,[t.tags.length?(s(),h(q,{key:0},{default:p(()=>[(s(!0),c(_,null,R([...t.tags].sort((e,i)=>i.count-e.count).slice(0,r.value?w:t.tags.length),e=>(s(),h(u,{key:e.id,to:{name:"tag",params:{id:e.id}},custom:""},{default:p(({isActive:i})=>[V(x,{class:f(["small",{selected:i}])},{default:p(()=>[o("a",{class:f(["tw-group",a.$constant.parentAppDisableRouterClass]),onClick:d(T=>y(N).webView?y(S).emit("spa:navigateTo",{name:`${t.entityType}sByTag`,id:e.id}):v(i,e.id),["prevent"])},[M,o("span",j,g(e.name),1),o("span",z,g(e.count),1),t.editable?(s(),c("span",{key:0,class:"tw-rounded-full tw-bg-waBackground",onClick:d(T=>k("deleteTag",e.name),["stop","prevent"])},P,8,A)):m("",!0)],10,F)]),_:2},1032,["class"])]),_:2},1032,["to"]))),128))]),_:1})):m("",!0),t.tags.length>w?(s(),c("a",{key:1,class:"gray small",onClick:n[0]||(n[0]=d(e=>r.value=!r.value,["prevent"]))},g(r.value?`${a.$t("showAll")} (${t.tags.length})`:a.$t("collapse")),1)):m("",!0)],64)}}});export{I as _};
