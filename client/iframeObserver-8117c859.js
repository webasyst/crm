import{by as b,I as v,az as p,N as E,E as y,ad as g}from"./main-e63d6b61.js";import{b as w}from"./index-6448b8a4.js";function f(e){const{stop:r}=b(document.documentElement,l=>{var c,o;const d=l[0].target.getAttribute("data-theme")??"";(o=(c=e.value)==null?void 0:c.contentWindow)==null||o.document.documentElement.setAttribute("data-theme",d)},{attributes:!0,attributeFilter:["data-theme"]});return{stop:r}}function I(e,r,l){const d=v(w),{stop:c}=f(e),o=t=>{e.value&&(d.value||l)&&(e.value.style.height=t+1+"px")},m=p(()=>{var t,u,a,s;(s=(a=(u=(t=e.value)==null?void 0:t.contentWindow)==null?void 0:u.document)==null?void 0:a.documentElement)==null||s.querySelectorAll('a[data-link="top"]').forEach(n=>{n.addEventListener("click",i=>{i.preventDefault(),window.history.pushState({reload:!0},"",n.href)})})},100);if(e.value)h();else{const t=E(()=>{e.value&&(e.value.onload=h,t())})}y(()=>{c()});function h(){var u,a,s;const t=(s=(a=(u=e.value)==null?void 0:u.contentWindow)==null?void 0:a.document)==null?void 0:s.documentElement;if(t){t.style.background="transparent";const n=t.querySelector("body");n&&(n.style.minHeight="auto",n.style.background="transparent"),r||g(t,i=>{o(i[0].contentRect.height)}),b(t,()=>{r||o(t.scrollHeight),m()},{childList:!0,subtree:!0}),m()}}}export{I as u};
